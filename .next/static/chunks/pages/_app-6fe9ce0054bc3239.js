(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{2224:function(e,t,n){"use strict";var r,i,o=n(6099),a=n(909),s=n(7582),u=n(4589),c=n(4594),l=((i={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",i["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",i["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",i["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",i["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",i["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",i["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",i["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",i["recaptcha-error"]="ReCAPTCHA error.",i),h=new u.ErrorFactory("appCheck","AppCheck",l),f=new Map,d={activated:!1,tokenListeners:[]},p={enabled:!1};function v(e){return f.get(e)||d}function g(e,t){f.set(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(){return self.grecaptcha}function m(e){if(!v(e).activated)throw h.create("use-before-activation",{appName:e.name})}function _(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),o=v(e);g(e,s.__assign(s.__assign({},o),{reCAPTCHAState:s.__assign(s.__assign({},o.reCAPTCHAState),{widgetId:i})}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b="https://content-firebaseappcheck.googleapis.com/v1beta",w=function(){function e(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(e){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:var r;return n.trys.push([1,6,,7]),this.pending=new u.Deferred,[4,(r=this.getNextRun(e),new Promise(function(e){setTimeout(e,r)}))];case 2:case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new u.Deferred,[4,this.operation()];case 5:return n.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return t=n.sent(),this.retryPolicy(t)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}})})},e.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(e,t){var n=e.url,r=e.body;return s.__awaiter(this,void 0,void 0,function(){var e,i,o,a,u,c,l,f,d,p;return s.__generator(this,function(s){switch(s.label){case 0:e={"Content-Type":"application/json"},(i=t.getImmediate({optional:!0}))&&(e["X-Firebase-Client"]=i.getPlatformInfoString()),o={method:"POST",body:JSON.stringify(r),headers:e},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,fetch(n,o)];case 2:return a=s.sent(),[3,4];case 3:throw u=s.sent(),h.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==a.status)throw h.create("fetch-status-error",{httpStatus:a.status});s.label=5;case 5:return s.trys.push([5,7,,8]),[4,a.json()];case 6:return c=s.sent(),[3,8];case 7:throw l=s.sent(),h.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(f=c.ttl.match(/^([\d.]+)(s)$/))||!f[2]||isNaN(Number(f[1])))throw h.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(f[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}})})}function T(e,t){var n=e.options;return{url:b+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:t}}}var E="firebase-app-check-store",S="debug-token",C=null;function k(){return C||(C=new Promise(function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(h.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(E,{keyPath:"compositeKey"})}}catch(e){t(h.create("storage-open",{originalErrorMessage:e.message}))}}))}function N(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,r;return s.__generator(this,function(i){switch(i.label){case 0:return[4,k()];case 1:return r=(n=i.sent().transaction(E,"readwrite")).objectStore(E).put({compositeKey:e,value:t}),[2,new Promise(function(e,t){r.onsuccess=function(t){e()},n.onerror=function(e){var n;t(h.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})]}})})}function A(e){return s.__awaiter(this,void 0,void 0,function(){var t,n;return s.__generator(this,function(r){switch(r.label){case 0:return[4,k()];case 1:return n=(t=r.sent().transaction(E,"readonly")).objectStore(E).get(e),[2,new Promise(function(e,r){n.onsuccess=function(t){var n=t.target.result;n?e(n.value):e(void 0)},t.onerror=function(e){var t;r(h.create("storage-get",{originalErrorMessage:null===(t=e.target.error)||void 0===t?void 0:t.message}))}})]}})})}function x(e){return e.options.appId+"-"+e.name}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P=new c.Logger("@firebase/app-check"),R={error:"UNKNOWN_ERROR"};function D(e,t,n){return void 0===n&&(n=!1),s.__awaiter(this,void 0,void 0,function(){var r,i,o,a,c,l,f,d,y,_,w,E,S;return s.__generator(this,function(C){var k,D,M,F;switch(C.label){case 0:if(m(e),!p.enabled)return[3,3];return r=I,i=T,o=[e],[4,function(){return s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(t){if((e=p).enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}()];case 1:return[4,r.apply(void 0,[i.apply(void 0,o.concat([C.sent()])),t])];case 2:return[2,{token:C.sent().token}];case 3:if(c=(a=v(e)).token,l=void 0,c)return[3,5];return[4,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n;return s.__generator(this,function(r){switch(r.label){case 0:if(!u.isIndexedDBAvailable())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,A(x(e))];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),P.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}})})}(e)];case 4:(f=C.sent())&&L(f)&&(c=f,g(e,s.__assign(s.__assign({},a),{token:c})),O(e,{token:c.token})),C.label=5;case 5:if(!n&&c&&L(c))return[2,{token:c.token}];C.label=6;case 6:if(C.trys.push([6,12,,13]),!a.customProvider)return[3,8];return[4,a.customProvider.getToken()];case 7:return d=C.sent(),_=null!==(y=u.issuedAtTime(d.token))&&y<Date.now()&&y>0?1e3*y:Date.now(),c=s.__assign(s.__assign({},d),{issuedAtTimeMillis:_}),[3,11];case 8:return[4,(function(e){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(n){switch(n.label){case 0:return m(e),[4,v(e).reCAPTCHAState.initialized.promise];case 1:return t=n.sent(),[2,new Promise(function(n,r){var i=v(e).reCAPTCHAState;t.ready(function(){n(t.execute(i.widgetId,{action:"fire_app_check"}))})})]}})})})(e).catch(function(e){throw h.create("recaptcha-error")})];case 9:return w=C.sent(),[4,I({url:b+"/projects/"+(k=e.options).projectId+"/apps/"+k.appId+":exchangeRecaptchaToken?key="+k.apiKey,body:{recaptcha_token:w}},t)];case 10:c=C.sent(),C.label=11;case 11:return[3,13];case 12:return E=C.sent(),P.error(E),l=E,[3,13];case 13:if(c)return[3,14];return D=l,S={token:u.base64.encodeString(JSON.stringify(R),!1),error:D},[3,16];case 14:return S={token:c.token},g(e,s.__assign(s.__assign({},a),{token:c})),[4,(M=e,F=c,u.isIndexedDBAvailable()?N(x(M),F).catch(function(e){P.warn("Failed to write token to indexeddb. Error: "+e)}):Promise.resolve())];case 15:C.sent(),C.label=16;case 16:return O(e,S),[2,S]}})})}function O(e,t){for(var n=v(e).tokenListeners,r=0;r<n.length;r++){var i=n[r];try{i(t)}catch(e){}}}function L(e){return e.expireTimeMillis-Date.now()>0}var M="app-check-internal";(r=(o&&"object"==typeof o&&"default"in o?o:{default:o}).default).INTERNAL.registerComponent(new a.Component("appCheck",function(e){var t;return t=e.getProvider("app").getImmediate(),{activate:function(e,n){return(/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t,n){var r,i,o,a,c,l,f,d,p=v(e);if(p.activated)throw h.create("already-activated",{appName:e.name});var m=s.__assign(s.__assign({},p),{activated:!0});"string"==typeof t?m.siteKey=t:m.customProvider=t,m.isTokenAutoRefreshEnabled=void 0===n?e.automaticDataCollectionEnabled:n,g(e,m),m.siteKey&&(o=m.siteKey,a=v(e),c=new u.Deferred,g(e,s.__assign(s.__assign({},a),{reCAPTCHAState:{initialized:c}})),l="fire_app_check_"+e.name,(f=document.createElement("div")).id=l,f.style.display="none",document.body.appendChild(f),(d=y())?d.ready(function(){_(e,o,d,l),c.resolve(d)}):(r=function(){var t=y();if(!t)throw Error("no recaptcha");t.ready(function(){_(e,o,t,l),c.resolve(t)})},(i=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",i.onload=r,document.head.appendChild(i)),c.promise).catch(function(){})}(t,e,n))},setTokenAutoRefreshEnabled:function(e){var n;(n=v(t)).tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),g(t,s.__assign(s.__assign({},n),{isTokenAutoRefreshEnabled:e}))}}},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider(M).initialize()})),r.INTERNAL.registerComponent(new a.Component(M,function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger");return{getToken:function(e){return D(t,n,e)},addTokenListener:function(e){return function(e,t,n){var r=v(e),i=s.__assign(s.__assign({},r),{tokenListeners:s.__spreadArray(s.__spreadArray([],r.tokenListeners),[n])});if(p.enabled)p.enabled&&p.token&&p.token.promise.then(function(e){return n({token:e})}).catch(function(){});else{if(!i.tokenRefresher){var o=function(e,t){var n=this;return new w(function(){return s.__awaiter(n,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:if(v(e).token)return[3,2];return[4,D(e,t)];case 1:return n=r.sent(),[3,4];case 2:return[4,D(e,t,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}})})},function(){return!0},function(){var t=v(e);if(!t.token)return 0;var n=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5;return Math.max(0,(n=Math.min(n,t.token.expireTimeMillis-3e5))-Date.now())},3e4,96e4)}(e,t);i.tokenRefresher=o}if(i.tokenRefresher.isRunning()||!0!==r.isTokenAutoRefreshEnabled||i.tokenRefresher.start(),r.token&&L(r.token)){var a=r.token;Promise.resolve().then(function(){return n({token:a.token})}).catch(function(){})}}g(e,i)}(t,n,e)},removeTokenListener:function(e){var n,r;0===(r=(n=v(t)).tokenListeners.filter(function(t){return t!==e})).length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),g(t,s.__assign(s.__assign({},n),{tokenListeners:r}))}}},"PUBLIC").setInstantiationMode("EXPLICIT")),r.registerVersion("@firebase/app-check","0.1.1"),function(){var e=u.getGlobal();if("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){p.enabled=!0;var t=new u.Deferred;p.token=t,"string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?t.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):t.resolve(function(){return s.__awaiter(this,void 0,void 0,function(){var e,t;return s.__generator(this,function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,A(S)];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:if(e)return[2,e];return N(S,t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})).catch(function(e){return P.warn("Failed to persist debug token to indexeddb. Error: "+e)}),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t]}})})}())}}()},6099:function(e,t,n){"use strict";n.r(t),n.d(t,{firebase:function(){return b}});var r,i,o=n(7582),a=n(4589),s=n(909),u=n(4594),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),v=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=(0,a.deepCopy)(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(e){return r._addComponent(e)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(e){return e.delete()}))}).then(function(){e.isDeleted_=!0})},e.prototype._getService=function(e,t){void 0===t&&(t=f),this.checkDestroyed_();var n,r=this.container.getProvider(e);return r.isInitialized()||(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)!=="EXPLICIT"||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=f),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){p.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var g=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e(){var t=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),("object"!=typeof i||null===i)&&(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.contains)(t,s))throw l.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=d[e])&&void 0!==r?r:e;n&&(i+="-"+n);var a=i.match(/\s|\//),u=t.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+t+'":'];a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),p.warn(c.join(" "));return}o(new s.Component(i+"-version",function(){return{library:i,version:t}},"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw l.create("invalid-log-argument");(0,u.setUserLogHandler)(e,t)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(e=e||f,!(0,a.contains)(t,e))throw l.create("no-app",{appName:e});return t[e]}function o(o){var s=o.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[s])throw l.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==o.serviceProps&&(0,a.deepExtend)(u,o.serviceProps),r[s]=u,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,s).apply(this,o.multipleInstances?e:[])}}for(var c=0,h=Object.keys(t);c<h.length;c++)t[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),i.App=e,r}(v);return t.INTERNAL=(0,o.__assign)((0,o.__assign)({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,a.deepExtend)(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),y=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if((null==(t=e.getComponent())?void 0:t.type)!=="VERSION")return null;var t,n=e.getImmediate();return n.library+"/"+n.version}).filter(function(e){return e}).join(" ")},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if((0,a.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=g.initializeApp;g.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,a.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,e)};var b=g;b.INTERNAL.registerComponent(new s.Component("platform-logger",function(e){return new y(e)},"PRIVATE")),b.registerVersion(h,"0.6.22",void 0),b.registerVersion("fire-js",""),t.default=b},909:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return o},ComponentContainer:function(){return u},Provider:function(){return s}});var r=n(7582),i=n(4589),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return e.prototype.get=function(e){void 0===e&&(e=a);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=(0,r.__assign)({identifier:a,optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(e){if(i)return null;throw e}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:a})}catch(e){}try{for(var i=(0,r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.__read)(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.__awaiter)(this,void 0,void 0,function(){var e;return(0,r.__generator)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.__read)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=a),this.instances.has(e)},e.prototype.initialize=function(e){void 0===e&&(e={});var t,n,i=e.instanceIdentifier,o=e.options,s=this.normalizeInstanceIdentifier(void 0===i?a:i);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:void 0===o?{}:o});try{for(var c=(0,r.__values)(this.instancesDeferred.entries()),l=c.next();!l.done;l=c.next()){var h=(0,r.__read)(l.value,2),f=h[0],d=h[1],p=this.normalizeInstanceIdentifier(f);s===p&&d.resolve(u)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return this.invokeOnInitCallbacks(u,s),u},e.prototype.onInit=function(e){var t=this;return this.onInitCallbacks.add(e),function(){t.onInitCallbacks.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i;try{for(var o=(0,r.__values)(this.onInitCallbacks),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:t===a?void 0:t,options:void 0===n?{}:n}),this.instances.set(t,r),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(e){}return r||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:a:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},9446:function(e,t,n){"use strict";var r,i,o,a,s,u,c,l,h,f,d,p,v,g,y,m,_,b=n(6099),w=n(909),I=n(4589),T=n(7582),E=n(4594);e=n.hmd(e);var S=n(3454),C="",k=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,I.stringify)(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,I.jsonEval)(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),N=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return(0,I.contains)(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),A=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new k(t)}}catch(e){}return new N},x=A("localStorage"),P=A("sessionStorage"),R=new E.Logger("@firebase/database"),D=(o=1,function(){return o++}),O=function(e){var t=(0,I.stringToByteArray)(e),n=new I.Sha1;n.update(t);var r=n.digest();return I.base64.encodeByteArray(r)},L=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=L.apply(null,i):"object"==typeof i?n+=(0,I.stringify)(i):n+=i,n+=" "}return n},M=null,F=!0,j=function(e,t){(0,I.assert)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(R.logLevel=E.LogLevel.VERBOSE,M=R.log.bind(R),t&&P.set("logging_enabled",!0)):"function"==typeof e?M=e:(M=null,P.remove("logging_enabled"))},U=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===F&&(F=!1,null===M&&!0===P.get("logging_enabled")&&j(!0)),M){var n=L.apply(null,e);M(n)}},q=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];U.apply(void 0,(0,T.__spreadArray)([e],(0,T.__read)(t)))}},V=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+L.apply(void 0,(0,T.__spreadArray)([],(0,T.__read)(e)));R.error(n)},B=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+L.apply(void 0,(0,T.__spreadArray)([],(0,T.__read)(e)));throw R.error(n),Error(n)},K=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+L.apply(void 0,(0,T.__spreadArray)([],(0,T.__read)(e)));R.warn(n)},W=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&K("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},H=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},z=function(e){if((0,I.isNodeSdk)()||"complete"===document.readyState)e();else{var t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},G="[MIN_NAME]",Q="[MAX_NAME]",Y=function(e,t){if(e===t)return 0;if(e===G||t===Q)return -1;if(t===G||e===Q)return 1;var n=er(e),r=er(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},X=function(e,t){return e===t?0:e<t?-1:1},$=function(e,t){if(t&&e in t)return t[e];throw Error("Missing required key ("+e+") in object: "+(0,I.stringify)(t))},J=function(e){if("object"!=typeof e||null===e)return(0,I.stringify)(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=(0,I.stringify)(t[i])+":"+J(e[t[i]]);return r+"}"},Z=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ee(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var et=function(e){(0,I.assert)(!H(e),"Invalid JSON number"),0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=22250738585072014e-324?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,r=Math.round(e*Math.pow(2,52-i)-4503599627370496)):(n=0,r=Math.round(e/5e-324)));var t,n,r,i,o,a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse();var s=a.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},en=RegExp("^-?(0*)\\d{1,10}$"),er=function(e){if(en.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ei=function(e){try{e()}catch(e){setTimeout(function(){throw K("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},eo=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},ea=function(){function e(e,t){var n=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(function(e){return n.appCheck=e})}return e.prototype.getToken=function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise(function(n,r){setTimeout(function(){t.appCheck?t.getToken(e).then(n,r):n(null)},0)})},e.prototype.addTokenChangeListener=function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(function(t){return t.addTokenListener(e)})},e.prototype.notifyForInvalidToken=function(){K('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}(),es=function(){function e(e,t,n){var r=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(e){return r.auth_=e})}return e.prototype.getToken=function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch(function(e){return e&&"auth/token-not-initialized"===e.code?(U("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}):new Promise(function(n,r){setTimeout(function(){t.auth_?t.getToken(e).then(n,r):n(null)},0)})},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)})},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',K(e)},e}(),eu=function(){function e(e){this.accessToken=e}return e.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(e){e(this.accessToken)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}(),ec=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,el="websocket",eh="long_polling",ef=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=x.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&x.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function ed(e,t,n){if((0,I.assert)("string"==typeof t,"typeof type must == string"),(0,I.assert)("object"==typeof n,"typeof params must == object"),t===el)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===eh)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw Error("Unknown connection type: "+t);(e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=e.namespace);var r,i=[];return ee(n,function(e,t){i.push(e+"="+t)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ep=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),(0,I.contains)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return(0,I.deepCopy)(this.counters_)},e}(),ev={},eg={};function ey(e){var t=e.toString();return ev[t]||(ev[t]=new ep),ev[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var em=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=function(t){e[t]&&ei(function(){n.onMessage_(e[t])})},i=0;i<e.length;++i)t(i);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},e}(),e_="start",eb=function(){function e(e,t,n,r,i,o,a){var s=this;this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=q(e),this.stats_=ey(t),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),ed(t,eh,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new em(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),z(function(){if(!n.isClosed_){n.scriptTagHolder=new ew(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,T.__read)(e,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(e),n.scriptTagHolder){if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===e_)n.id=o,n.password=a;else if("close"===i)o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_();else throw Error("Unrecognized command received: "+i)}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,T.__read)(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var e={};e[e_]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&ec.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!(0,I.isNodeSdk)()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){!this.isClosed_&&(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=(0,I.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Z((0,I.base64Encode)(t),1840),r=0;r<n.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[r]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!(0,I.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={};n.dframe="t",n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=(0,I.stringify)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),ew=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,I.isNodeSdk)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=D(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";</script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(e){U("frame writing exception"),e.stack&&U(e.stack),U(e)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||U("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(!this.alive||!this.sendNewPolls||!(this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)))return!1;this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;)if(this.pendingSegs[0].d.length+30+n.length<=1870){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}else break;return t+=n,this.addLongPollTag_(t,this.currentSerial),!0},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,function(){clearTimeout(i),r()})},e.prototype.addTag=function(e,t){var n=this;(0,I.isNodeSdk)()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){U("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(e){}},Math.floor(1))},e}(),eI=null;"undefined"!=typeof MozWebSocket?eI=MozWebSocket:"undefined"!=typeof WebSocket&&(eI=WebSocket);var eT=function(){function e(t,n,r,i,o,a,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=q(this.connId),this.stats_=ey(n),this.connURL=e.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n,r){var i={};return i.v="5",!(0,I.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&ec.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),ed(e,el,i)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,x.set("previous_websocket_failure",!0);try{if((0,I.isNodeSdk)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+C+"/"+S.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?i.headers.Authorization=this.authToken||"":i.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var o=S.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new eI(this.connURL,[],i)}else{var i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new eI(this.connURL,[],i)}}catch(e){this.log_("Error instantiating WebSocket.");var s=e.message||e.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&4.4>parseFloat(n[1])&&(t=!0)}return!t&&null!==eI&&!e.forceDisallow_},e.previouslyFailed=function(){return x.isInMemoryStorage||!0===x.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){x.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=(0,I.jsonEval)(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if((0,I.assert)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=(0,I.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Z(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){!this.isClosed_&&(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),eE=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[eb,eT]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=eT&&eT.isAvailable(),o=i&&!eT.previouslyFailed();if(t.webSocketOnly&&(i||K("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[eT];else{var a=this.transports_=[];try{for(var s=(0,T.__values)(e.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),eS=function(){function e(e,t,n,r,i,o,a,s,u,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=q("c:"+this.id+":"),this.transportManager_=new eE(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=eo(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){this.sendData_({t:"d",d:e})},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=$("t",e),n=$("d",e);if("c"===t)this.onSecondaryControl_(n);else if("d"===t)this.pendingDataMessages.push(n);else throw Error("Unknown protocol layer: "+t)},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=$("t",e),n=$("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){!this.isHealthy_&&(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=$("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?V("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):V("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&K("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),eo(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):eo(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(x.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),eC=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.refreshAppCheckToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),ek=function(){function e(e){this.allowedEvents_=e,this.listeners_={},(0,I.assert)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=(0,T.__spreadArray)([],(0,T.__read)(this.listeners_[e])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context)){r.splice(i,1);return}},e.prototype.validateEventType_=function(e){(0,I.assert)(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}(),eN=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,I.isMobileCordova)()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return(0,T.__extends)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,I.assert)("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(ek),eA=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();function ex(){return new eA("")}function eP(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function eR(e){return e.pieces_.length-e.pieceNum_}function eD(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new eA(e.pieces_,t)}function eO(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function eL(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function eM(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new eA(t,0)}function eF(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof eA)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var i=t.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new eA(n,0)}function ej(e){return e.pieceNum_>=e.pieces_.length}function eU(e,t){var n=eP(e),r=eP(t);if(null===n)return t;if(n===r)return eU(eD(e),eD(t));throw Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function eq(e,t){for(var n=eL(e,0),r=eL(t,0),i=0;i<n.length&&i<r.length;i++){var o=Y(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function eV(e,t){if(eR(e)!==eR(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function eB(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(eR(e)>eR(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var eK=function(e,t){this.errorPrefix_=t,this.parts_=eL(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,I.stringLength)(this.parts_[n]);eW(this)};function eW(e){if(e.byteLength_>768)throw Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+eH(e))}function eH(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ez=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))},!1),r}return(0,T.__extends)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,I.assert)("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(ek),eG=function(e){function t(n,r,i,o,a,s,u,c){var l=e.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=a,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=t.nextPersistentConnectionId_++,l.log_=q("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!(0,I.isNodeSdk)())throw Error("Auth override specified in options, but not supported on non Node.js platforms");return ez.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&eN.getInstance().on("online",l.onOnline_,l),l}return(0,T.__extends)(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,I.stringify)(i)),(0,I.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this;this.initConnection_();var n=new I.Deferred,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var e=t.outstandingGets_[o];void 0!==e&&i===e&&(delete t.outstandingGets_[o],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+o+" timed out on connection"),n.reject(Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),n.promise},t.prototype.listen=function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),(0,I.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,I.assert)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))})},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&(0,I.contains)(e,"w")){var n=(0,I.safeGet)(e,"w");Array.isArray(n)&&~n.indexOf("no_index")&&K('Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ".indexOn": "'+t._queryParams.getIndex().toString()+'" at '+t._path.toString()+" to your security rules for better performance.")}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||(0,I.isAdmin)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.refreshAppCheckToken=function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=(0,I.isValidFormat)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))})}},t.prototype.tryAppCheck=function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)})},t.prototype.unlisten=function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,I.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)})},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}})}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+(0,I.stringify)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else if("error"in e)throw"A server-side error has occurred: "+e.error;else"a"in e&&this.onDataPush_(e.a,e.b)},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):V("Unrecognized action received from server: "+(0,I.stringify)(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;(0,I.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(e){!e||this.visible_||this.reconnectDelay_!==this.maxReconnectDelay_||(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());var e=new Date().getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return(0,T.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,l,h,f,d,p,v=this;return(0,T.__generator)(this,function(g){switch(g.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,r())},c=function(e){(0,I.assert)(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:u,sendRequest:c},l=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)])];case 2:return f=(h=T.__read.apply(void 0,[g.sent(),2]))[0],d=h[1],a?U("getToken() completed but was canceled"):(U("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=d&&d.token,s=new eS(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,function(e){K(e+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")},o)),[3,4];case 3:return p=g.sent(),this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&K(p),u()),[3,4];case 4:return[2]}})})},t.prototype.interrupt=function(e){U("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){U("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,I.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){n=t?t.map(function(e){return J(e)}).join("$"):"default";var n,r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new eA(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){U("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(e,t){U("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,T.__values)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,(0,T.__values)(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(var l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},t.prototype.sendConnectStats_=function(){var e={},t="js";(0,I.isNodeSdk)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+C.replace(/\./g,"-")]=1,(0,I.isMobileCordova)()?e["framework.cordova"]=1:(0,I.isReactNative)()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=eN.getInstance().currentlyOnline();return(0,I.isEmpty)(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(eC),eQ=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),eY=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new eQ(G,e),r=new eQ(G,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return eQ.MIN},e}(),eX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,T.__extends)(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return c},set:function(e){c=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return Y(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw(0,I.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return eQ.MIN},t.prototype.maxPost=function(){return new eQ(Q,c)},t.prototype.makePost=function(e,t){return(0,I.assert)("string"==typeof e,"KeyIndex indexValue must always be a string."),new eQ(e,c)},t.prototype.toString=function(){return".key"},t}(eY),e$=new eX,eJ=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else if(0===o){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),eZ=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e1.EMPTY_NODE,this.right=null!=o?o:e1.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return e1.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(n=this,0>t(e,n.key))n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return e1.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){return Math.pow(2,this.check_())<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e===this.right.check_())return e+(this.isRed_()?0:1);throw Error("Black depths differ")},e.RED=!0,e.BLACK=!1,e}(),e0=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new eZ(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),e1=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,eZ.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,eZ.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty()){if(r)return r.key;return null}for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new eJ(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new eJ(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new eJ(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new eJ(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new e0,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(e,t){return Y(e.name,t.name)}function e4(e,t){return Y(e,t)}var e3=function(e){return"number"==typeof e?"number:"+et(e):"string:"+e},e6=function(e){if(e.isLeafNode()){var t=e.val();(0,I.assert)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,I.contains)(t,".sv"),"Priority must be a string or number.")}else(0,I.assert)(e===l||e.isEmpty(),"priority of unexpected type.");(0,I.assert)(e===l||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},e5=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,I.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),e6(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return h},set:function(e){h=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return ej(t)?this:".priority"===eP(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=eP(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,I.assert)(".priority"!==r||1===eR(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(eD(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+e3(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":","number"===t?e+=et(this.value_):e+=this.value_,this.lazyHash_=O(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,I.assert)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return((0,I.assert)(i>=0,"Unknown leaf type: "+n),(0,I.assert)(o>=0,"Unknown leaf type: "+r),i!==o)?o-i:"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),e8=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,T.__extends)(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Y(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return eQ.MIN},t.prototype.maxPost=function(){return new eQ(Q,new e5("[PRIORITY-POST]",d))},t.prototype.makePost=function(e,t){return new eQ(t,new e5("[PRIORITY-POST]",f(e)))},t.prototype.toString=function(){return".priority"},t}(eY)),e9=Math.log(2),e7=function(){function e(e){this.count=parseInt(Math.log(e+1)/e9,10),this.current_=this.count-1;var t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),te=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,a=r-t;if(0===a)return null;if(1===a)return o=e[t],new eZ(n?n(o):o,o.node,eZ.BLACK,null,null);var s=parseInt(a/2,10)+t,u=i(t,s),c=i(s+1,r);return o=e[s],new eZ(n?n(o):o,o.node,eZ.BLACK,u,c)};return new e1(r||t,function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var c=i(o+1,s),l=e[o];u(new eZ(n?n(l):l,l.node,r,null,c))},u=function(e){r?r.left=e:o=e,r=e},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,eZ.BLACK):(s(h,eZ.BLACK),s(h,eZ.RED))}return o}(new e7(e.length)))},tt={},tn=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return(0,I.assert)(tt&&e8,"ChildrenNode.ts has not been loaded"),p=p||new e({".priority":tt},{".priority":e8})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=(0,I.safeGet)(this.indexes_,e);if(!t)throw Error("No index defined for "+e);return t instanceof e1?t:null},e.prototype.hasIndex=function(e){return(0,I.contains)(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){(0,I.assert)(t!==e$,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(eQ.Wrap),s=a.getNext();s;)o=o||t.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?te(i,t.getCompare()):tt;var u=t.toString(),c=(0,T.__assign)({},this.indexSet_);c[u]=t;var l=(0,T.__assign)({},this.indexes_);return l[u]=r,new e(l,c)},e.prototype.addToIndexes=function(t,n){var r=this;return new e((0,I.map)(this.indexes_,function(e,i){var o=(0,I.safeGet)(r.indexSet_,i);if((0,I.assert)(o,"Missing index implementation for "+i),e===tt){if(!o.isDefinedOn(t.node))return tt;for(var a=[],s=n.getIterator(eQ.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),te(a,o.getCompare())}var c=n.get(t.name),l=e;return c&&(l=l.remove(new eQ(t.name,c))),l.insert(t,t.node)}),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e((0,I.map)(this.indexes_,function(e){if(e===tt)return e;var r=n.get(t.name);return r?e.remove(new eQ(t.name,r)):e}),this.indexSet_)},e}(),tr=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&e6(this.priorityNode_),this.children_.isEmpty()&&(0,I.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return v||(v=new e(new e1(e4),null,tn.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||v},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?v:t},e.prototype.getChild=function(e){var t=eP(e);return null===t?this:this.getImmediateChild(t).getChild(eD(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if((0,I.assert)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new eQ(t,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?v:this.priorityNode_;return new e(i,a,o)},e.prototype.updateChild=function(e,t){var n=eP(e);if(null===n)return t;(0,I.assert)(".priority"!==eP(e)||1===eR(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(eD(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(e8,function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),t||!o||!(i<2*r))return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n;var a=[];for(var s in n)a[s]=n[s];return a},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+e3(this.getPriority().val())+":"),this.forEachChild(e8,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":O(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(!r)return this.children_.getPredecessorKey(e);var i=r.getPredecessorKey(new eQ(e,t));return i?i.name:null},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(!t)return this.children_.minKey();var n=t.minKey();return n&&n.name},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new eQ(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(!t)return this.children_.maxKey();var n=t.maxKey();return n&&n.name},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new eQ(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,eQ.Wrap),i=r.peek();null!=i&&0>t.compare(i,e);)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,eQ.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ti?-1:0},e.prototype.withIndex=function(t){if(t===e$||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===e$||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()||!this.getPriority().equals(e.getPriority())||this.children_.count()!==e.children_.count())return!1;for(var t=this.getIterator(e8),n=e.getIterator(e8),r=t.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=t.getNext(),i=n.getNext()}return null===r&&null===i},e.prototype.resolveIndex_=function(e){return e===e$?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),ti=new(function(e){function t(){return e.call(this,new e1(e4),tr.EMPTY_NODE,tn.Default)||this}return(0,T.__extends)(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return tr.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(tr));function to(e,t){if(void 0===t&&(t=null),null===e)return tr.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,I.assert)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new e5(e,to(t));if(e instanceof Array){var n=tr.EMPTY_NODE;return ee(e,function(t,r){if((0,I.contains)(e,t)&&"."!==t.substring(0,1)){var i=to(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(t,i))}}),n.updatePriority(to(t))}var r=[],i=!1;if(ee(e,function(e,t){if("."!==e.substring(0,1)){var n=to(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new eQ(e,n)))}}),0===r.length)return tr.EMPTY_NODE;var o=te(r,e2,function(e){return e.name},e4);if(!i)return new tr(o,to(t),tn.Default);var a=te(r,e8.getCompare());return new tr(o,to(t),new tn({".priority":a},{".priority":e8}))}Object.defineProperties(eQ,{MIN:{value:new eQ(G,tr.EMPTY_NODE)},MAX:{value:new eQ(Q,ti)}}),eX.__EMPTY_NODE=tr.EMPTY_NODE,e5.__childrenNodeConstructor=tr,l=ti,d=ti,f=to;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ta=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,(0,I.assert)(!ej(t)&&".priority"!==eP(t),"Can't create PathIndex with empty path or .priority key"),n}return(0,T.__extends)(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Y(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=to(e);return new eQ(t,tr.EMPTY_NODE.updateChild(this.indexPath_,n))},t.prototype.maxPost=function(){return new eQ(Q,tr.EMPTY_NODE.updateChild(this.indexPath_,ti))},t.prototype.toString=function(){return eL(this.indexPath_,0).join("/")},t}(eY),ts=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,T.__extends)(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?Y(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return eQ.MIN},t.prototype.maxPost=function(){return eQ.MAX},t.prototype.makePost=function(e,t){return new eQ(t,to(e))},t.prototype.toString=function(){return".value"},t}(eY)),tu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",tc=(a=0,s=[],function(e){var t,n=e===a;a=e;var r=Array(8);for(t=7;t>=0;t--)r[t]=tu.charAt(e%64),e=Math.floor(e/64);(0,I.assert)(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;t>=0&&63===s[t];t--)s[t]=0;s[t]++}else for(t=0;t<12;t++)s[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=tu.charAt(s[t]);return(0,I.assert)(20===i.length,"nextPushId: Length should be 20."),i}),tl=function(e){if("2147483647"===e)return"-";var t=er(e);if(null!=t)return""+(t+1);for(var n=Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return Q;var o=n[i],a=tu.charAt(tu.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},th=function(e){if("-2147483648"===e)return G;var t=er(e);if(null!=t)return""+(t-1);for(var n=Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=tu.charAt(tu.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(e){return{type:"value",snapshotNode:e}}function td(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function tp(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function tv(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tg=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){(0,I.assert)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(tp(t,a)):(0,I.assert)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(td(t,n)):o.trackChildChange(tv(t,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)},e.prototype.updateFullNode=function(e,t,n){return null==n||(e.isLeafNode()||e.forEachChild(e8,function(e,r){t.hasChild(e)||n.trackChildChange(tp(e,r))}),t.isLeafNode()||t.forEachChild(e8,function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(tv(t,r,i))}else n.trackChildChange(td(t,r))})),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?tr.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),ty=function(){function e(t){this.indexedFilter_=new tg(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return 0>=this.index_.compare(this.getStartPost(),e)&&0>=this.index_.compare(e,this.getEndPost())},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new eQ(t,n))||(n=tr.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=tr.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(tr.EMPTY_NODE);var i=this;return t.forEachChild(e8,function(e,t){i.matches(new eQ(e,t))||(r=r.updateImmediateChild(e,tr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(!e.hasStart())return e.getIndex().minPost();var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)},e.getEndPost_=function(e){if(!e.hasEnd())return e.getIndex().maxPost();var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)},e}(),tm=function(){function e(e){this.rangedFilter_=new ty(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return(this.rangedFilter_.matches(new eQ(t,n))||(n=tr.EMPTY_NODE),e.getImmediateChild(t).equals(n))?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=tr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=tr.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext(),s=void 0;if(s=this.reverse_?0>=this.index_.compare(this.rangedFilter_.getStartPost(),a):0>=this.index_.compare(a,this.rangedFilter_.getEndPost()))r=r.updateImmediateChild(a.name,a.node),o++;else break}}else{r=(r=t.withIndex(this.index_)).updatePriority(tr.EMPTY_NODE);var u=void 0,c=void 0,l=void 0,i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(e,t){return h(t,e)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();for(var o=0,f=!1;i.hasNext();){var a=i.getNext();!f&&0>=l(u,a)&&(f=!0);var s=f&&o<this.limit_&&0>=l(a,c);s?o++:r=r.updateImmediateChild(a.name,tr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){if(this.reverse_){var o,a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();(0,I.assert)(e.numChildren()===this.limit_,"");var s=new eQ(t,n),u=this.reverse_?e.getFirstChild(this.index_):e.getLastChild(this.index_),c=this.rangedFilter_.matches(s);if(e.hasChild(t)){for(var l=e.getImmediateChild(t),h=r.getChildAfterChild(this.index_,u,this.reverse_);null!=h&&(h.name===t||e.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var f=null==h?1:o(h,s);if(c&&!n.isEmpty()&&f>=0)return null!=i&&i.trackChildChange(tv(t,n,l)),e.updateImmediateChild(t,n);null!=i&&i.trackChildChange(tp(t,l));var d=e.updateImmediateChild(t,tr.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(td(h.name,h.node)),d.updateImmediateChild(h.name,h.node)):d}return n.isEmpty()?e:c&&o(u,s)>=0?(null!=i&&(i.trackChildChange(tp(u.name,u.node)),i.trackChildChange(td(t,n))),e.updateImmediateChild(t,n).updateImmediateChild(u.name,tr.EMPTY_NODE)):e},e}(),t_=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=e8}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return(0,I.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return((0,I.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_)?this.indexStartName_:G},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return(0,I.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return((0,I.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_)?this.indexEndName_:Q},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return(0,I.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===e8},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function tb(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function tw(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function tI(e,t){var n=e.copy();return n.index_=t,n}function tT(e){var t,n={};return e.isDefault()||(e.index_===e8?t="$priority":e.index_===ts?t="$value":e.index_===e$?t="$key":((0,I.assert)(e.index_ instanceof ta,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=(0,I.stringify)(t),e.startSet_&&(n.startAt=(0,I.stringify)(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+(0,I.stringify)(e.indexStartName_))),e.endSet_&&(n.endAt=(0,I.stringify)(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+(0,I.stringify)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function tE(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==e8&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tS=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=q("p:rest:"),o.listens_={},o}return(0,T.__extends)(t,e),t.prototype.reportStats=function(e){throw Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:((0,I.assert)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);var s=t.getListenId_(e,r),u={};this.listens_[s]=u;var c=tT(e._queryParams);this.restRequest_(a+".json",c,function(e,t){var n=t;404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(a,n,!1,r),(0,I.safeGet)(o.listens_,s)===u&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=tT(e._queryParams),r=e._path.toString(),i=new I.Deferred;return this.restRequest_(r+".json",n,function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(Error(o))}),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;return void 0===t&&(t={}),t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(i){var o=(0,T.__read)(i,2),a=o[0],s=o[1];a&&a.accessToken&&(t.auth=a.accessToken),s&&s.token&&(t.ac=s.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+(0,I.querystring)(t);r.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=(0,I.jsonEval)(c.responseText)}catch(e){K("Failed to parse JSON response for "+u+": "+c.responseText)}n(null,e)}else 401!==c.status&&404!==c.status&&K("Got unsuccessful REST response for "+u+" Status: "+c.status),n(c.status);n=null}},c.open("GET",u,!0),c.send()})},t}(eC),tC=function(){function e(){this.rootNode_=tr.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(){return{value:null,children:new Map}}function tN(e,t,n){if(ej(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=eP(t);e.children.has(r)||e.children.set(r,tk()),tN(e.children.get(r),t=eD(t),n)}}function tA(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(function(e,n){t(n,e)})}(e,function(e,r){tA(r,new eA(t.toString()+"/"+e),n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tx=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=(0,T.__assign)({},e);return this.last_&&ee(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t},e}(),tP=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new tx(e),eo(this.reportStats_.bind(this),Math.floor(1e4+2e4*Math.random()))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;ee(t,function(t,i){i>0&&(0,I.contains)(e.statsToReport_,t)&&(n[t]=i,r=!0)}),r&&this.server_.reportStats(n),eo(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();function tR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function tD(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tO(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}(u=g||(g={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tL=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=g.ACK_USER_WRITE,this.source=tR()}return e.prototype.operationForChild=function(t){if(!ej(this.path))return(0,I.assert)(eP(this.path)===t,"operationForChild called for unrelated child."),new e(eD(this.path),this.affectedTree,this.revert);if(null!=this.affectedTree.value)return(0,I.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new eA(t));return new e(ex(),n,this.revert)},e}(),tM=function(){function e(e,t){this.source=e,this.path=t,this.type=g.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return ej(this.path)?new e(this.source,ex()):new e(this.source,eD(this.path))},e}(),tF=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=g.OVERWRITE}return e.prototype.operationForChild=function(t){return ej(this.path)?new e(this.source,ex(),this.snap.getImmediateChild(t)):new e(this.source,eD(this.path),this.snap)},e}(),tj=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=g.MERGE}return e.prototype.operationForChild=function(t){if(!ej(this.path))return(0,I.assert)(eP(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,eD(this.path),this.children);var n=this.children.subtree(new eA(t));return n.isEmpty()?null:n.value?new tF(this.source,ex(),n.value):new e(this.source,ex(),n)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),tU=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(ej(e))return this.isFullyInitialized()&&!this.filtered_;var t=eP(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),tq=function(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()};function tV(e,t,n,r,i,o){var a=r.filter(function(e){return e.type===n});a.sort(function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw(0,I.assertionError)("Should only compare child_ events.");var r=new eQ(t.childName,t.snapshotNode),i=new eQ(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)}),a.forEach(function(n){var r=("value"===n.type||"child_removed"===n.type||(n.prevName=o.getPredecessorChildName(n.childName,n.snapshotNode,e.index_)),n);i.forEach(function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(e,t){return{eventCache:e,serverCache:t}}function tK(e,t,n,r){return tB(new tU(t,n,r),e.serverCache)}function tW(e,t,n,r){return tB(e.eventCache,new tU(t,n,r))}function tH(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function tz(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var tG=function(){function e(e,t){void 0===t&&(y||(y=new e1(X)),t=y),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return ee(t,function(e,t){n=n.set(new eA(e),t)}),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:ex(),value:this.value};if(ej(e))return null;var n=eP(e),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(eD(e),t);return null!=i?{path:eF(new eA(n),i.path),value:i.value}:null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},e.prototype.subtree=function(t){if(ej(t))return this;var n=eP(t),r=this.children.get(n);return null!==r?r.subtree(eD(t)):new e(null)},e.prototype.set=function(t,n){if(ej(t))return new e(n,this.children);var r=eP(t),i=(this.children.get(r)||new e(null)).set(eD(t),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(ej(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=eP(t),r=this.children.get(n);if(!r)return this;var i=r.remove(eD(t)),o=void 0;return(o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty())?new e(null):new e(this.value,o)},e.prototype.get=function(e){if(ej(e))return this.value;var t=eP(e),n=this.children.get(t);return n?n.get(eD(e)):null},e.prototype.setTree=function(t,n){if(ej(t))return n;var r=eP(t),i=(this.children.get(r)||new e(null)).setTree(eD(t),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(ex(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(eF(e,r),t)}),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,ex(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(ej(e))return null;var i=eP(e),o=this.children.get(i);return o?o.findOnPath_(eD(e),eF(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,ex(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(ej(t))return this;this.value&&r(n,this.value);var i=eP(t),o=this.children.get(i);return o?o.foreachOnPath_(eD(t),eF(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(ex(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(eF(e,n),t)}),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})},e}(),tQ=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new tG(null))},e}();function tY(e,t,n){if(ej(t))return new tQ(new tG(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=eU(i,t);return o=o.updateChild(a,n),new tQ(e.writeTree_.set(i,o))}var s=new tG(n);return new tQ(e.writeTree_.setTree(t,s))}function tX(e,t,n){var r=e;return ee(n,function(e,n){r=tY(r,eF(t,e),n)}),r}function t$(e,t){return ej(t)?tQ.empty():new tQ(e.writeTree_.setTree(t,new tG(null)))}function tJ(e,t){return null!=tZ(e,t)}function tZ(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(eU(n.path,t)):null}function t0(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(e8,function(e,n){t.push(new eQ(e,n))}):e.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new eQ(e,n.value))}),t}function t1(e,t){if(ej(t))return e;var n=tZ(e,t);return new tQ(null!=n?new tG(n):e.writeTree_.subtree(t))}function t2(e){return e.writeTree_.isEmpty()}function t4(e,t){return function e(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?((0,I.assert)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e(eF(t,n),o,r)}),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(eF(t,".priority"),i)),r}(ex(),e.writeTree_,t)}function t3(e){return e.visible}function t6(e,t,n){for(var r=tQ.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)eB(n,a)?r=tY(r,s=eU(n,a),o.snap):eB(a,n)&&(s=eU(a,n),r=tY(r,ex(),o.snap.getChild(s)));else if(o.children){if(eB(n,a))r=tX(r,s=eU(n,a),o.children);else if(eB(a,n)){if(ej(s=eU(a,n)))r=tX(r,ex(),o.children);else{var u=(0,I.safeGet)(o.children,eP(s));if(u){var c=u.getChild(eD(s));r=tY(r,ex(),c)}}}}else throw(0,I.assertionError)("WriteRecord should have .snap or .children")}}return r}function t5(e,t,n,r,i){if(r||i){var o=t1(e.visibleWrites,t);if(!i&&t2(o))return n;if(!i&&null==n&&!tJ(o,ex()))return null;var a=t6(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(eB(e.path,t)||eB(t,e.path))},t),s=n||tr.EMPTY_NODE;return t4(a,s)}var u=tZ(e.visibleWrites,t);if(null!=u)return u;var c=t1(e.visibleWrites,t);if(t2(c))return n;if(null==n&&!tJ(c,ex()))return null;var s=n||tr.EMPTY_NODE;return t4(c,s)}function t8(e,t,n,r){return t5(e.writeTree,e.treePath,t,n,r)}function t9(e,t){return function(e,t,n){var r=tr.EMPTY_NODE,i=tZ(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(e8,function(e,t){r=r.updateImmediateChild(e,t)}),r;if(!n)return t0(t1(e.visibleWrites,t)).forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r;var o=t1(e.visibleWrites,t);return n.forEachChild(e8,function(e,t){var n=t4(t1(o,new eA(e)),t);r=r.updateImmediateChild(e,n)}),t0(o).forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function t7(e,t,n,r){return function(e,t,n,r,i){(0,I.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=eF(t,n);if(tJ(e.visibleWrites,o))return null;var a=t1(e.visibleWrites,o);return t2(a)?i.getChild(n):t4(a,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function ne(e,t){var n,r;return n=e.writeTree,r=eF(e.treePath,t),tZ(n.visibleWrites,r)}function nt(e,t,n){var r,i,o;return r=e.writeTree,i=eF(e.treePath,t),null!=(o=tZ(r.visibleWrites,i))?o:n.isCompleteForChild(t)?t4(t1(r.visibleWrites,i),n.getNode().getImmediateChild(t)):null}function nn(e,t){return nr(eF(e.treePath,t),e.writeTree)}function nr(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;(0,I.assert)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,I.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,tv(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,tp(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,td(n,e.snapshotNode));else if("child_changed"===t&&"child_changed"===i)this.changeMap.set(n,tv(n,e.snapshotNode,r.oldSnap));else throw(0,I.assertionError)("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),no=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),na=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new tU(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nt(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r,i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tz(this.viewCache_),o=function(e,t,n,r,i,o,a){var s,u=t1(e.visibleWrites,t),c=tZ(u,ex());if(null!=c)s=c;else{if(null==n)return[];s=t4(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}((r=this.writes_).writeTree,r.treePath,i,t,0,n,e);return 0===o.length?null:o[0]},e}();function ns(e,t,n,r,i,o){var a=t.eventCache;if(null!=ne(r,n))return t;var s=void 0,u=void 0;if(ej(n)){if((0,I.assert)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=tz(t),l=t9(r,c instanceof tr?c:tr.EMPTY_NODE);s=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{var h=t8(r,tz(t));s=e.filter.updateFullNode(t.eventCache.getNode(),h,o)}}else{var f=eP(n);if(".priority"===f){(0,I.assert)(1===eR(n),"Can't have a priority with additional path components");var d=a.getNode(),p=t7(r,n,d,u=t.serverCache.getNode());s=null!=p?e.filter.updatePriority(d,p):a.getNode()}else{var v=eD(n),g=void 0;if(a.isCompleteForChild(f)){u=t.serverCache.getNode();var y=t7(r,n,a.getNode(),u);g=null!=y?a.getNode().getImmediateChild(f).updateChild(v,y):a.getNode().getImmediateChild(f)}else g=nt(r,f,t.serverCache);s=null!=g?e.filter.updateChild(a.getNode(),f,g,v,i,o):a.getNode()}}return tK(t,s,a.isFullyInitialized()||ej(n),e.filter.filtersNodes())}function nu(e,t,n,r,i,o,a,s){var u,c=t.serverCache,l=a?e.filter:e.filter.getIndexedFilter();if(ej(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=eP(n);if(!c.isCompleteForPath(n)&&eR(n)>1)return t;var d=eD(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,no,null)}var v=tW(t,u,c.isFullyInitialized()||ej(n),l.filtersNodes()),g=new na(i,v,o);return ns(e,v,n,i,g,s)}function nc(e,t,n,r,i,o,a){var s,u,c=t.eventCache,l=new na(i,t,o);if(ej(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=tK(t,u,!0,e.filter.filtersNodes());else{var h=eP(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=tK(t,u,c.isFullyInitialized(),c.isFiltered());else{var f=eD(n),d=c.getNode().getImmediateChild(h),p=void 0;if(ej(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===eO(f)&&v.getChild(eM(f)).isEmpty()?v:v.updateChild(f,r):tr.EMPTY_NODE}s=d.equals(p)?t:tK(t,e.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function nl(e,t){return e.eventCache.isCompleteForChild(t)}function nh(e,t,n){return n.foreach(function(e,n){t=t.updateChild(e,n)}),t}function nf(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=ej(n)?r:new tG(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=nh(e,t.serverCache.getNode().getImmediateChild(n),r);c=nu(e,c,new eA(n),u,i,o,a,s)}}),u.children.inorderTraversal(function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=nh(e,t.serverCache.getNode().getImmediateChild(n),r);c=nu(e,c,new eA(n),h,i,o,a,s)}}),c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nd=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new tg(n.getIndex()),i=n.loadsAllData()?new tg(n.getIndex()):n.hasLimit()?new tm(n):new ty(n);this.processor_={filter:i};var o=t.serverCache,a=t.eventCache,s=r.updateFullNode(tr.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(tr.EMPTY_NODE,a.getNode(),null),c=new tU(s,o.isFullyInitialized(),r.filtersNodes()),l=new tU(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=tB(l,c),this.eventGenerator_=new tq(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function np(e){return 0===e.eventRegistrations_.length}function nv(e,t,n){var r=[];if(n){(0,I.assert)(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach(function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){for(var o=[],a=0;a<e.eventRegistrations_.length;++a){var s=e.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}else o.push(s)}e.eventRegistrations_=o}else e.eventRegistrations_=[];return r}function ng(e,t,n,r){t.type===g.MERGE&&null!==t.source.queryId&&((0,I.assert)(tz(e.viewCache_),"We should always have a full cache before handling merges"),(0,I.assert)(tH(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=e.viewCache_,s=function(e,t,n,r,i){var o,a,s,u,c,l,h,f=new ni;if(n.type===g.OVERWRITE)n.source.fromUser?l=nc(e,t,n.path,n.snap,r,i,f):((0,I.assert)(n.source.fromServer,"Unknown source."),h=n.source.tagged||t.serverCache.isFiltered()&&!ej(n.path),l=nu(e,t,n.path,n.snap,r,i,h,f));else if(n.type===g.MERGE)n.source.fromUser?(o=n.path,a=n.children,s=t,a.foreach(function(n,a){var u=eF(o,n);nl(t,eP(u))&&(s=nc(e,s,u,a,r,i,f))}),a.foreach(function(n,a){var u=eF(o,n);nl(t,eP(u))||(s=nc(e,s,u,a,r,i,f))}),l=s):((0,I.assert)(n.source.fromServer,"Unknown source."),h=n.source.tagged||t.serverCache.isFiltered(),l=nf(e,t,n.path,n.children,r,i,h,f));else if(n.type===g.ACK_USER_WRITE)l=n.revert?function(e,t,n,r,i,o){if(null!=ne(r,n))return t;var a,s=new na(r,t,i),u=t.eventCache.getNode(),c=void 0;if(ej(n)||".priority"===eP(n)){var l=void 0;if(t.serverCache.isFullyInitialized())l=t8(r,tz(t));else{var h=t.serverCache.getNode();(0,I.assert)(h instanceof tr,"serverChildren would be complete if leaf node"),l=t9(r,h)}c=e.filter.updateFullNode(u,l,o)}else{var f=eP(n),d=nt(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?e.filter.updateChild(u,f,d,eD(n),s,o):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(u,f,tr.EMPTY_NODE,eD(n),s,o):u).isEmpty()&&t.serverCache.isFullyInitialized()&&(a=t8(r,tz(t))).isLeafNode()&&(c=e.filter.updateFullNode(c,a,o))}return a=t.serverCache.isFullyInitialized()||null!=ne(r,ex()),tK(t,c,a,e.filter.filtersNodes())}(e,t,n.path,r,i,f):function(e,t,n,r,i,o,a){if(null!=ne(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(ej(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return nu(e,t,n,u.getNode().getChild(n),i,o,s,a);if(!ej(n))return t;var c=new tG(null);return u.getNode().forEachChild(e$,function(e,t){c=c.set(new eA(e),t)}),nf(e,t,n,c,i,o,s,a)}var l=new tG(null);return r.foreach(function(e,t){var r=eF(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))}),nf(e,t,n,l,i,o,s,a)}(e,t,n.path,n.affectedTree,r,i,f);else if(n.type===g.LISTEN_COMPLETE)u=n.path,c=t.serverCache,l=ns(e,tW(t,c.getNode(),c.isFullyInitialized()||ej(u),c.isFiltered()),u,r,no,f);else throw(0,I.assertionError)("Unknown operation type: "+n.type);var d=f.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=tH(e);!(n.length>0)&&e.eventCache.isFullyInitialized()&&(!i||r.getNode().equals(o))&&r.getNode().getPriority().equals(o.getPriority())||n.push(tf(tH(t)))}}(t,l,d),{viewCache:l,changes:d}}(e.processor_,a,t,n,r);return i=e.processor_,o=s.viewCache,(0,I.assert)(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,I.assert)(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,I.assert)(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,ny(e,s.changes,s.viewCache.eventCache.getNode(),null)}function ny(e,t,n,r){var i,o,a,s=r?[r]:e.eventRegistrations_;return i=e.eventGenerator_,o=[],a=[],t.forEach(function(e){if("child_changed"===e.type&&i.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)){var t;a.push((t=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:t}))}}),tV(i,o,"child_removed",t,s,n),tV(i,o,"child_added",t,s,n),tV(i,o,"child_moved",a,s,n),tV(i,o,"child_changed",t,s,n),tV(i,o,"value",t,s,n),o}var nm=function(){this.views=new Map};function n_(e,t,n,r){var i,o,a=t.source.queryId;if(null!==a){var s=e.views.get(a);return(0,I.assert)(null!=s,"SyncTree gave us an op for an invalid query."),ng(s,t,n,r)}var u=[];try{for(var c=(0,T.__values)(e.views.values()),l=c.next();!l.done;l=c.next()){var s=l.value;u=u.concat(ng(s,t,n,r))}}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function nb(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=t8(n,i?r:null),u=!1;return s?u=!0:(s=r instanceof tr?t9(n,r):tr.EMPTY_NODE,u=!1),new nd(t,tB(new tU(s,u,!1),new tU(r,i,!1)))}return a}function nw(e){var t,n,r=[];try{for(var i=(0,T.__values)(e.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function nI(e,t){var n,r,i=null;try{for(var o=(0,T.__values)(e.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||function(e,t){var n=tz(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ej(t)&&!n.getImmediateChild(eP(t)).isEmpty())?n.getChild(t):null}(s,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function nT(e,t){if(t._queryParams.loadsAllData())return nS(e);var n=t._queryIdentifier;return e.views.get(n)}function nE(e){return null!=nS(e)}function nS(e){var t,n;try{for(var r=(0,T.__values)(e.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}var nC=1,nk=function(e){this.listenProvider_=e,this.syncPointTree_=new tG(null),this.pendingWriteTree_={visibleWrites:tQ.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function nN(e,t,n,r,i){var o,a;return(o=e.pendingWriteTree_,a=i,(0,I.assert)(r>o.lastWriteId,"Stacking an older write on top of newer ones"),void 0===a&&(a=!0),o.allWrites.push({path:t,snap:n,writeId:r,visible:a}),a&&(o.visibleWrites=tY(o.visibleWrites,t,n)),o.lastWriteId=r,i)?nO(e,new tF(tR(),t,n)):[]}function nA(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(!function(e,t){var n=e.allWrites.findIndex(function(e){return e.writeId===t});(0,I.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=e.allWrites.length-1;i&&a>=0;){var s=e.allWrites[a];s.visible&&(a>=n&&function(e,t){if(e.snap)return eB(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&eB(eF(e.path,n),t))return!0;return!1}(s,r.path)?i=!1:eB(r.path,s.path)&&(o=!0)),a--}return!!i&&(o?(e.visibleWrites=t6(e.allWrites,t3,ex()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1):r.snap?e.visibleWrites=t$(e.visibleWrites,r.path):ee(r.children,function(t){e.visibleWrites=t$(e.visibleWrites,eF(r.path,t))}),!0)}(e.pendingWriteTree_,t))return[];var i=new tG(null);return null!=r.snap?i=i.set(ex(),!0):ee(r.children,function(e){i=i.set(new eA(e),!0)}),nO(e,new tL(r.path,i,n))}function nx(e,t,n){return nO(e,new tF(tD(),t,n))}function nP(e,t,n,r){var i=t._path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||null!=nT(o,t))){var s=function(e,t,n,r){var i,o,a=t._queryIdentifier,s=[],u=[],c=nE(e);if("default"===a)try{for(var l=(0,T.__values)(e.views.entries()),h=l.next();!h.done;h=l.next()){var f=(0,T.__read)(h.value,2),d=f[0],p=f[1];u=u.concat(nv(p,n,r)),np(p)&&(e.views.delete(d),p.query._queryParams.loadsAllData()||s.push(p.query))}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else{var p=e.views.get(a);p&&(u=u.concat(nv(p,n,r)),np(p)&&(e.views.delete(a),p.query._queryParams.loadsAllData()||s.push(p.query)))}return c&&!nE(e)&&s.push(new((0,I.assert)(m,"Reference.ts has not been loaded"),m)(t._repo,t._path)),{removed:s,events:u}}(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex(function(e){return e._queryParams.loadsAllData()}),l=e.syncPointTree_.findOnPath(i,function(e,t){return nE(t)});if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=h.fold(function(e,t,n){if(t&&nE(t))return[nS(t)];var r=[];return t&&(r=nw(t)),ee(n,function(e,t){r=r.concat(t)}),r}),d=0;d<f.length;++d){var p=f[d],v=p.query,g=nL(e,p);e.listenProvider_.startListening(nV(v),nM(e,v),g.hashFn,g.onComplete)}}l||!(u.length>0)||r||(c?e.listenProvider_.stopListening(nV(t),null):u.forEach(function(t){var n=e.queryToTagMap.get(nF(t));e.listenProvider_.stopListening(nV(t),n)})),function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=nF(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,u)}return a}function nR(e,t,n){var r,i,o,a,s,u=t._path,c=null,l=!1;e.syncPointTree_.foreachOnPath(u,function(e,t){var n=eU(e,u);c=c||nI(t,n),l=l||nE(t)});var h=e.syncPointTree_.get(u);h?(l=l||nE(h),c=c||nI(h,ex())):(h=new nm,e.syncPointTree_=e.syncPointTree_.set(u,h)),null!=c?s=!0:(s=!1,c=tr.EMPTY_NODE,e.syncPointTree_.subtree(u).foreachChild(function(e,t){var n=nI(t,ex());n&&(c=c.updateImmediateChild(e,n))}));var f=null!=nT(h,t);if(!f&&!t._queryParams.loadsAllData()){var d=nF(t);(0,I.assert)(!e.queryToTagMap.has(d),"View does not exist, but we have a tag");var p=nC++;e.queryToTagMap.set(d,p),e.tagToQueryMap.set(p,d)}var v=nr(u,e.pendingWriteTree_),g=(i=nb(r=h,t,v,c,s),r.views.has(t._queryIdentifier)||r.views.set(t._queryIdentifier,i),!function(e,t){e.eventRegistrations_.push(t)}(i,n),o=i.viewCache_.eventCache,a=[],o.getNode().isLeafNode()||o.getNode().forEachChild(e8,function(e,t){a.push(td(e,t))}),o.isFullyInitialized()&&a.push(tf(o.getNode())),ny(i,a,o.getNode(),n));if(!f&&!l){var y=nT(h,t);g=g.concat(function(e,t,n){var r=t._path,i=nM(e,t),o=nL(e,n),a=e.listenProvider_.startListening(nV(t),i,o.hashFn,o.onComplete),s=e.syncPointTree_.subtree(r);if(i)(0,I.assert)(!nE(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold(function(e,t,n){if(!ej(e)&&t&&nE(t))return[nS(t).query];var r=[];return t&&(r=r.concat(nw(t).map(function(e){return e.query}))),ee(n,function(e,t){r=r.concat(t)}),r}),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(nV(l),nM(e,l))}return a}(e,t,y))}return g}function nD(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,function(e,n){var r=nI(n,eU(e,t));if(r)return r});return t5(r,t,i,n,!0)}function nO(e,t){var n;return function e(t,n,r,i){if(ej(t.path))return function e(t,n,r,i){var o=n.get(ex());null==r&&null!=o&&(r=nI(o,ex()));var a=[];return n.children.inorderTraversal(function(n,o){var s=r?r.getImmediateChild(n):null,u=nn(i,n),c=t.operationForChild(n);c&&(a=a.concat(e(c,o,s,u)))}),o&&(a=a.concat(n_(o,t,i,r))),a}(t,n,r,i);var o=n.get(ex());null==r&&null!=o&&(r=nI(o,ex()));var a=[],s=eP(t.path),u=t.operationForChild(s),c=n.children.get(s);if(c&&u){var l=r?r.getImmediateChild(s):null,h=nn(i,s);a=a.concat(e(u,c,l,h))}return o&&(a=a.concat(n_(o,t,i,r))),a}(t,e.syncPointTree_,null,(n=e.pendingWriteTree_,nr(ex(),n)))}function nL(e,t){var n=t.query,r=nM(e,n);return{hashFn:function(){return(t.viewCache_.serverCache.getNode()||tr.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=nj(e,n);if(!r)return[];var i=nU(r),o=i.path,a=i.queryId,s=eU(o,t);return nq(e,o,new tM(tO(a),s))}(e,n._path,r):(i=n._path,nO(e,new tM(tD(),i)));var i,o,a,s=(o="Unknown Error","too_big"===t?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?o="Client doesn't have permission to access the desired data.":"unavailable"===t&&(o="The service is unavailable"),(a=Error(t+" at "+n._path.toString()+": "+o)).code=t.toUpperCase(),a);return nP(e,n,null,s)}}}function nM(e,t){var n=nF(t);return e.queryToTagMap.get(n)}function nF(e){return e._path.toString()+"$"+e._queryIdentifier}function nj(e,t){return e.tagToQueryMap.get(t)}function nU(e){var t=e.indexOf("$");return(0,I.assert)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new eA(e.substr(0,t))}}function nq(e,t,n){var r=e.syncPointTree_.get(t);return(0,I.assert)(r,"Missing sync point for query tag that we're tracking"),n_(r,n,nr(t,e.pendingWriteTree_),null)}function nV(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,I.assert)(_,"Reference.ts has not been loaded"),_)(e._repo,e._path):e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nB=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),nK=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=eF(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return nD(this.syncTree_,this.path_)},e}(),nW=function(e,t,n){return e&&"object"==typeof e?((0,I.assert)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"])?nH(e[".sv"],t,n):"object"==typeof e[".sv"]?nz(e[".sv"],t):void(0,I.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2)):e},nH=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,I.assert)(!1,"Unexpected server value: "+e)},nz=function(e,t,n){e.hasOwnProperty("increment")||(0,I.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!=typeof r&&(0,I.assert)(!1,"Unexpected increment value: "+r);var i=t.node();if((0,I.assert)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},nG=function(e,t,n,r){return nY(t,new nK(n,e),r)},nQ=function(e,t,n){return nY(e,new nB(t),n)};function nY(e,t,n){var r,i=nW(e.getPriority().val(),t.getImmediateChild(".priority"),n);if(!e.isLeafNode())return r=e,i!==e.getPriority().val()&&(r=r.updatePriority(new e5(i))),e.forEachChild(e8,function(e,i){var o=nY(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))}),r;var o=nW(e.getValue(),t,n);return o!==e.getValue()||i!==e.getPriority().val()?new e5(o,to(i)):e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nX=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n};function n$(e,t){for(var n=t instanceof eA?t:new eA(t),r=e,i=eP(n);null!==i;){var o=(0,I.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new nX(i,r,o),i=eP(n=eD(n))}return r}function nJ(e){return e.node.value}function nZ(e,t){e.node.value=t,function e(t){var n,r,i,o,a;null!==t.parent&&(n=t.parent,r=t.name,o=void 0===nJ(i=t)&&!n0(i),a=(0,I.contains)(n.node.children,r),o&&a?(delete n.node.children[r],n.node.childCount--,e(n)):o||a||(n.node.children[r]=i.node,n.node.childCount++,e(n)))}(e)}function n0(e){return e.node.childCount>0}function n1(e,t){ee(e.node.children,function(n,r){t(new nX(n,e,r))})}function n2(e){return new eA(null===e.parent?e.name:n2(e.parent)+"/"+e.name)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n4=/[\[\].#$\/\u0000-\u001F\u007F]/,n3=/[\[\].#$\u0000-\u001F\u007F]/,n6=function(e){return"string"==typeof e&&0!==e.length&&!n4.test(e)},n5=function(e){return"string"==typeof e&&0!==e.length&&!n3.test(e)},n8=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!H(e)||e&&"object"==typeof e&&(0,I.contains)(e,".sv")},n9=function(e,t,n,r){r&&void 0===t||n7((0,I.errorPrefix)(e,"value"),t,n)},n7=function(e,t,n){var r=n instanceof eA?new eK(n,e):n;if(void 0===t)throw Error(e+"contains undefined "+eH(r));if("function"==typeof t)throw Error(e+"contains a function "+eH(r)+" with contents = "+t.toString());if(H(t))throw Error(e+"contains "+t.toString()+" "+eH(r));if("string"==typeof t&&t.length>3495253.3333333335&&(0,I.stringLength)(t)>10485760)throw Error(e+"contains a string greater than 10485760 utf8 bytes "+eH(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(ee(t,function(t,n){var a;if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!n6(t)))throw Error(e+" contains an invalid key ("+t+") "+eH(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(t),r.byteLength_+=(0,I.stringLength)(t),eW(r),n7(e,n,r),a=r.parts_.pop(),r.byteLength_-=(0,I.stringLength)(a),r.parts_.length>0&&(r.byteLength_-=1)}),i&&o)throw Error(e+' contains ".value" child '+eH(r)+" in addition to actual children.")}},re=function(e,t){for(n=0;n<t.length;n++)for(var n,r,i=eL(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!n6(i[o]))throw Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(eq);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&eB(a,r))throw Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},rt=function(e,t,n,r){if(!r||void 0!==t){var i=(0,I.errorPrefix)(e,"values");if(!(t&&"object"==typeof t)||Array.isArray(t))throw Error(i+" must be an object containing the children to replace.");var o=[];ee(t,function(e,t){var r=new eA(e);if(n7(i,t,eF(n,r)),".priority"===eO(r)&&!n8(t))throw Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)}),re(i,o)}},rn=function(e,t,n){if(!n||void 0!==t){if(H(t))throw Error((0,I.errorPrefix)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!n8(t))throw Error((0,I.errorPrefix)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rr=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error((0,I.errorPrefix)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ri=function(e,t,n,r){if((!r||void 0!==n)&&!n6(n))throw Error((0,I.errorPrefix)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ro=function(e,t,n,r){if((!r||void 0!==n)&&!n5(n))throw Error((0,I.errorPrefix)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ra=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ro(e,t,n,r)},rs=function(e,t){if(".info"===eP(t))throw Error(e+" failed = Can't modify data under /.info/")},ru=function(e,t){var n,r=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!n6(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==r.length&&((n=r)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),!n5(n)))throw Error((0,I.errorPrefix)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},rc=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw Error((0,I.errorPrefix)(e,t)+"must be a boolean.")},rl=function(){this.eventLists_=[],this.recursionDepth_=0};function rh(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||eV(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function rf(e,t,n){rh(e,n),rp(e,function(e){return eV(e,t)})}function rd(e,t,n){rh(e,n),rp(e,function(e){return eB(e,t)||eB(t,e)})}function rp(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];i&&(t(i.path)?(function(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();M&&U("event: "+n.toString()),ei(r)}}}(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rv="repo_interrupt",rg=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tk(),this.transactionQueueTree_=new nX,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function ry(e){var t=e.infoData_.getNode(new eA(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function rm(e){var t;return(t=t={timestamp:ry(e)}).timestamp=t.timestamp||new Date().getTime(),t}function r_(e,t,n,r,i){e.dataUpdateCount++;var o=new eA(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i){if(r){var s=(0,I.map)(n,function(e){return to(e)});a=function(e,t,n,r){var i=nj(e,r);if(!i)return[];var o=nU(i),a=o.path,s=o.queryId,u=eU(a,t),c=tG.fromObject(n);return nq(e,a,new tj(tO(s),u,c))}(e.serverSyncTree_,o,s,i)}else{var u=to(n);a=function(e,t,n,r){var i=nj(e,r);if(null==i)return[];var o=nU(i),a=o.path,s=o.queryId,u=eU(a,t);return nq(e,a,new tF(tO(s),u,n))}(e.serverSyncTree_,o,u,i)}}else if(r){var c,l,h=(0,I.map)(n,function(e){return to(e)});c=e.serverSyncTree_,l=tG.fromObject(h),a=nO(c,new tj(tD(),o,l))}else{var f=to(n);a=nx(e.serverSyncTree_,o,f)}var d=o;a.length>0&&(d=rP(e,o)),rd(e.eventQueue_,d,a)}function rb(e,t){var n,r,i;rw(e,"connected",t),!1===t&&(rk(e,"onDisconnectEvents"),n=rm(e),r=tk(),tA(e.onDisconnect_,ex(),function(t,i){var o=nG(t,i,e.serverSyncTree_,n);tN(r,t,o)}),i=[],tA(r,ex(),function(t,n){i=i.concat(nx(e.serverSyncTree_,t,n));var r=rL(e,t);rP(e,r)}),e.onDisconnect_=tk(),rd(e.eventQueue_,ex(),i))}function rw(e,t,n){var r=new eA("/.info/"+t),i=to(n);e.infoData_.updateSnapshot(r,i);var o=nx(e.infoSyncTree_,r,i);rd(e.eventQueue_,r,o)}function rI(e){return e.nextWriteId_++}function rT(e,t,n,r,i){rk(e,"set",{path:t.toString(),value:n,priority:r});var o=rm(e),a=to(n,r),s=nQ(a,nD(e.serverSyncTree_,t),o),u=rI(e),c=nN(e.serverSyncTree_,t,s,u,!0);rh(e.eventQueue_,c),e.server_.put(t.toString(),a.val(!0),function(n,r){var o="ok"===n;o||K("set at "+t+" failed: "+n);var a=nA(e.serverSyncTree_,u,!o);rd(e.eventQueue_,t,a),rN(e,i,n,r)});var l=rL(e,t);rP(e,l),rd(e.eventQueue_,l,[])}function rE(e,t,n,r){var i=to(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),function(n,o){"ok"===n&&tN(e.onDisconnect_,t,i),rN(e,r,n,o)})}function rS(e,t,n){var r;r=".info"===eP(t._path)?nP(e.infoSyncTree_,t,n):nP(e.serverSyncTree_,t,n),rf(e.eventQueue_,t._path,r)}function rC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(rv)}function rk(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),U.apply(void 0,(0,T.__spreadArray)([r],(0,T.__read)(t)))}function rN(e,t,n,r){t&&ei(function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=Error(i);o.code=e,t(o)}})}function rA(e,t,n){return nD(e.serverSyncTree_,t,n)||tr.EMPTY_NODE}function rx(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||rO(e,t),nJ(t)){var n=rD(e,t);(0,I.assert)(n.length>0,"Sending zero length transaction queue"),n.every(function(e){return 0===e.status})&&function(e,t,n){for(var r=rA(e,t,n.map(function(e){return e.currentWriteId})),i=r,o=r.hash(),a=0;a<n.length;a++){var s=n[a];(0,I.assert)(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var u=eU(t,s.path);i=i.updateChild(u,s.currentOutputSnapshotRaw)}var c=i.val(!0);e.server_.put(t.toString(),c,function(r){rk(e,"transaction put response",{path:t.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(nA(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push(function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)}),n[t].unwatcher()},s=0;s<n.length;s++)a(s);rO(e,n$(e.transactionQueueTree_,t)),rx(e,e.transactionQueueTree_),rd(e.eventQueue_,t,i);for(var s=0;s<o.length;s++)ei(o[s])}else{if("datastale"===r)for(var s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{K("transaction at "+t.toString()+" failed: "+r);for(var s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}rP(e,t)}},o)}(e,n2(t),n)}else n0(t)&&n1(t,function(t){rx(e,t)})}function rP(e,t){var n=rR(e,t),r=n2(n),i=rD(e,n);return function(e,t,n){if(0!==t.length){for(var r=[],i=[],o=t.filter(function(e){return 0===e.status}).map(function(e){return e.currentWriteId}),a=function(a){var s,u=t[a],c=eU(n,u.path),l=!1;if((0,I.assert)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,s=u.abortReason,i=i.concat(nA(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status){if(u.retryCount>=25)l=!0,s="maxretry",i=i.concat(nA(e.serverSyncTree_,u.currentWriteId,!0));else{var h=rA(e,u.path,o);u.currentInputSnapshot=h;var f=t[a].update(h.val());if(void 0!==f){n7("transaction failed: Data returned ",f,u.path);var d=to(f);"object"==typeof f&&null!=f&&(0,I.contains)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=u.currentWriteId,v=nQ(d,h,rm(e));u.currentOutputSnapshotRaw=d,u.currentOutputSnapshotResolved=v,u.currentWriteId=rI(e),o.splice(o.indexOf(p),1),i=(i=i.concat(nN(e.serverSyncTree_,u.path,v,u.currentWriteId,u.applyLocally))).concat(nA(e.serverSyncTree_,p,!0))}else l=!0,s="nodata",i=i.concat(nA(e.serverSyncTree_,u.currentWriteId,!0))}}rd(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push(function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)}):r.push(function(){return t[a].onComplete(Error(s),!1,null)})))},s=0;s<t.length;s++)a(s);rO(e,e.transactionQueueTree_);for(var s=0;s<r.length;s++)ei(r[s]);rx(e,e.transactionQueueTree_)}}(e,i,r),r}function rR(e,t){var n,r=e.transactionQueueTree_;for(n=eP(t);null!==n&&void 0===nJ(r);)r=n$(r,n),n=eP(t=eD(t));return r}function rD(e,t){var n=[];return function e(t,n,r){var i=nJ(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);n1(n,function(n){e(t,n,r)})}(e,t,n),n.sort(function(e,t){return e.order-t.order}),n}function rO(e,t){var n=nJ(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,nZ(t,n.length>0?n:void 0)}n1(t,function(t){rO(e,t)})}function rL(e,t){var n=n2(rR(e,t)),r=n$(e.transactionQueueTree_,t);return!function(e,t,n){for(var r=e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,function(t){rM(e,t)}),rM(e,r),!function e(t,n,r,i){r&&!i&&n(t),n1(t,function(t){e(t,n,!0,i)}),r&&i&&n(t)}(r,function(t){rM(e,t)}),n}function rM(e,t){var n=nJ(t);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,I.assert)(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):((0,I.assert)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(nA(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,Error("set"),!1,null))));-1===o?nZ(t,void 0):n.length=o+1,rd(e.eventQueue_,n2(t),i);for(var a=0;a<r.length;a++)ei(r[a])}}var rF=function(e,t){var n=rj(e),r=n.namespace;"firebase.com"===n.domain&&B(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||B("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||W();var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ef(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new eA(n.pathString)}},rj=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=(0,T.__values)(e.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):K("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},rU=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,I.stringify)(this.snapshot.exportVal())},e}(),rq=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),rV=function(){function e(e,t){this.snapshotCallback=e,this.cancelCallback=t}return e.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},e.prototype.onCancel=function(e){return(0,I.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},e}(),rB=function(){function e(e,t){this._repo=e,this._path=t}return e.prototype.cancel=function(){var e=new I.Deferred;return function(e,t,n){e.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&function e(t,n){if(ej(n))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var r=t.value;return t.value=null,r.forEachChild(e8,function(e,n){tN(t,new eA(e),n)}),e(t,n)}if(!(t.children.size>0))return!0;var i=eP(n);return n=eD(n),t.children.has(i)&&e(t.children.get(i),n)&&t.children.delete(i),0===t.children.size}(e.onDisconnect_,t),rN(e,n,r,i)})}(this._repo,this._path,e.wrapCallback(function(){})),e.promise},e.prototype.remove=function(){rs("OnDisconnect.remove",this._path);var e=new I.Deferred;return rE(this._repo,this._path,null,e.wrapCallback(function(){})),e.promise},e.prototype.set=function(e){rs("OnDisconnect.set",this._path),n9("OnDisconnect.set",e,this._path,!1);var t=new I.Deferred;return rE(this._repo,this._path,e,t.wrapCallback(function(){})),t.promise},e.prototype.setWithPriority=function(e,t){rs("OnDisconnect.setWithPriority",this._path),n9("OnDisconnect.setWithPriority",e,this._path,!1),rn("OnDisconnect.setWithPriority",t,!1);var n=new I.Deferred;return function(e,t,n,r,i){var o=to(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),function(n,r){"ok"===n&&tN(e.onDisconnect_,t,o),rN(e,i,n,r)})}(this._repo,this._path,e,t,n.wrapCallback(function(){})),n.promise},e.prototype.update=function(e){rs("OnDisconnect.update",this._path),rt("OnDisconnect.update",e,this._path,!1);var t=new I.Deferred;return function(e,t,n,r){if((0,I.isEmpty)(n)){U("onDisconnect().update() called with empty data.  Don't do anything."),rN(e,r,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,function(i,o){"ok"===i&&ee(n,function(n,r){var i=to(r);tN(e.onDisconnect_,eF(t,n),i)}),rN(e,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(function(){})),t.promise},e}(),rK=function(){function e(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(e.prototype,"key",{get:function(){return ej(this._path)?null:eO(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new rG(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var e=J(tE(this._queryParams));return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return tE(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!((t=(0,I.getModularInstance)(t))instanceof e))return!1;var n=this._repo===t._repo,r=eV(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)},e}();function rW(e,t){if(!0===e._orderByCalled)throw Error(t+": You can't combine multiple orderBy calls.")}function rH(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===e$){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==G)throw Error(r);if("string"!=typeof t)throw Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Q)throw Error(r);if("string"!=typeof n)throw Error(i)}}else if(e.getIndex()===e8){if(null!=t&&!n8(t)||null!=n&&!n8(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,I.assert)(e.getIndex() instanceof ta||e.getIndex()===ts,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function rz(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var rG=function(e){function t(t,n){return e.call(this,t,n,new t_,!1)||this}return(0,T.__extends)(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){var e=eM(this._path);return null===e?null:new t(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t}(rK),rQ=function(){function e(e,t,n){this._node=e,this.ref=t,this._index=n}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new eA(t),r=r$(this.ref,t);return new e(this._node.getChild(n),r,e8)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return t(new e(i,r$(n.ref,r),e8))})},e.prototype.hasChild=function(e){var t=new eA(e);return!this._node.getChild(t).isEmpty()},e.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function rY(e,t){return(e=(0,I.getModularInstance)(e))._checkNotDeleted("ref"),void 0!==t?r$(e._root,t):e._root}function rX(e,t){(e=(0,I.getModularInstance)(e))._checkNotDeleted("refFromURL");var n=rF(t,e._repo.repoInfo_.nodeAdmin);ru("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||B("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),rY(e,n.path.toString())}function r$(e,t){return null===eP((e=(0,I.getModularInstance)(e))._path)?ra("child","path",t,!1):ro("child","path",t,!1),new rG(e._repo,eF(e._path,t))}function rJ(e,t){rs("set",(e=(0,I.getModularInstance)(e))._path),n9("set",t,e._path,!1);var n=new I.Deferred;return rT(e._repo,e._path,t,null,n.wrapCallback(function(){})),n.promise}var rZ=function(){function e(e){this.callbackContext=e}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t._queryParams.getIndex();return new rU("value",this,new rQ(e.snapshotNode,new rG(t._repo,t._path),n))},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new rq(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},e.prototype.hasAnyCallback=function(){return null!==this.callbackContext},e}(),r0=function(){function e(e,t){this.eventType=e,this.callbackContext=t}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new rq(this,e,t):null},e.prototype.createEvent=function(e,t){(0,I.assert)(null!=e.childName,"Child events should have a childName.");var n=r$(new rG(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new rU(e.type,this,new rQ(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},e.prototype.matches=function(t){return t instanceof e&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function r1(e,t,n,r,i){if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){var o,a,s,u=n,c=function(t,n){rS(e._repo,e,h),u(t,n)};c.userCallback=n.userCallback,c.context=n.context,n=c}var l=new rV(n,s||void 0),h="value"===t?new rZ(l):new r0(t,l);return o=e._repo,a=".info"===eP(e._path)?nR(o.infoSyncTree_,e,h):nR(o.serverSyncTree_,e,h),rf(o.eventQueue_,e._path,a),function(){return rS(e._repo,e,h)}}function r2(e,t,n,r){return r1(e,"value",t,n,r)}function r4(e,t,n,r){return r1(e,"child_added",t,n,r)}function r3(e,t,n,r){return r1(e,"child_changed",t,n,r)}function r6(e,t,n,r){return r1(e,"child_moved",t,n,r)}function r5(e,t,n,r){return r1(e,"child_removed",t,n,r)}function r8(e,t,n){var r=null,i=n?new rV(n):null;"value"===t?r=new rZ(i):t&&(r=new r0(t,i)),rS(e._repo,e,r)}var r9=function(){},r7=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,T.__extends)(t,e),t.prototype._apply=function(e){n9("endAt",this._value,e._path,!0);var t=tw(e._queryParams,this._value,this._key);if(rz(t),rH(t),e._queryParams.hasEnd())throw Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new rK(e._repo,e._path,t,e._orderByCalled)},t}(r9),ie=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,T.__extends)(t,e),t.prototype._apply=function(e){n9("endBefore",this._value,e._path,!1);var t,n,r,i,o=(t=e._queryParams,n=this._value,r=this._key,t.index_===e$?("string"==typeof n&&(n=th(n)),i=tw(t,n,r)):i=tw(t,n,null==r?G:th(r)),i.endBeforeSet_=!0,i);if(rz(o),rH(o),e._queryParams.hasEnd())throw Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new rK(e._repo,e._path,o,e._orderByCalled)},t}(r9),it=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,T.__extends)(t,e),t.prototype._apply=function(e){n9("startAt",this._value,e._path,!0);var t=tb(e._queryParams,this._value,this._key);if(rz(t),rH(t),e._queryParams.hasStart())throw Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new rK(e._repo,e._path,t,e._orderByCalled)},t}(r9),ir=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,T.__extends)(t,e),t.prototype._apply=function(e){n9("startAfter",this._value,e._path,!1);var t,n,r,i,o=(t=e._queryParams,n=this._value,r=this._key,t.index_===e$?("string"==typeof n&&(n=tl(n)),i=tb(t,n,r)):i=tb(t,n,null==r?Q:tl(r)),i.startAfterSet_=!0,i);if(rz(o),rH(o),e._queryParams.hasStart())throw Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new rK(e._repo,e._path,o,e._orderByCalled)},t}(r9),ii=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return(0,T.__extends)(t,e),t.prototype._apply=function(e){var t,n,r;if(e._queryParams.hasLimit())throw Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new rK(e._repo,e._path,(t=e._queryParams,n=this._limit,(r=t.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),e._orderByCalled)},t}(r9),io=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return(0,T.__extends)(t,e),t.prototype._apply=function(e){var t,n,r;if(e._queryParams.hasLimit())throw Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new rK(e._repo,e._path,(t=e._queryParams,n=this._limit,(r=t.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),e._orderByCalled)},t}(r9),ia=function(e){function t(t){var n=e.call(this)||this;return n._path=t,n}return(0,T.__extends)(t,e),t.prototype._apply=function(e){rW(e,"orderByChild");var t=new eA(this._path);if(ej(t))throw Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ta(t),r=tI(e._queryParams,n);return rH(r),new rK(e._repo,e._path,r,!0)},t}(r9),is=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,T.__extends)(t,e),t.prototype._apply=function(e){rW(e,"orderByKey");var t=tI(e._queryParams,e$);return rH(t),new rK(e._repo,e._path,t,!0)},t}(r9),iu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,T.__extends)(t,e),t.prototype._apply=function(e){rW(e,"orderByPriority");var t=tI(e._queryParams,e8);return rH(t),new rK(e._repo,e._path,t,!0)},t}(r9),ic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,T.__extends)(t,e),t.prototype._apply=function(e){rW(e,"orderByValue");var t=tI(e._queryParams,ts);return rH(t),new rK(e._repo,e._path,t,!0)},t}(r9),il=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,T.__extends)(t,e),t.prototype._apply=function(e){if(n9("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new r7(this._value,this._key)._apply(new it(this._value,this._key)._apply(e))},t}(r9);function ih(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=(0,I.getModularInstance)(e);try{for(var a=(0,T.__values)(r),s=a.next();!s.done;s=a.next())o=s.value._apply(o)}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}(0,I.assert)(!m,"__referenceConstructor has already been defined"),m=rG,(0,I.assert)(!_,"__referenceConstructor has already been defined"),_=rG;var id={},ip=!1;function iv(e,t,n,r,i){var o,a,s,u,c,l=r||e.options.databaseURL;void 0===l&&(e.options.projectId||B("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),U("Using default host for project ",e.options.projectId),l=e.options.projectId+"-default-rtdb.firebaseio.com");var h=rF(l,i),f=h.repoInfo,d=void 0;void 0!==S&&(d=S.env.FIREBASE_DATABASE_EMULATOR_HOST),d?(c=!0,f=(h=rF(l="http://"+d+"?ns="+f.namespace,i)).repoInfo):c=!h.repoInfo.secure;var p=i&&c?new eu(eu.OWNER):new es(e.name,e.options,t);return ru("Invalid Firebase Database URL",h),ej(h.path)||B("Database URL must point to the root of a Firebase Database (not including a child path)."),new ig((o=f,a=new ea(e.name,n),(s=id[e.name])||(s={},id[e.name]=s),(u=s[o.toURLString()])&&B("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new rg(o,ip,p,a),s[o.toURLString()]=u,u),e)}var ig=function(){function e(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(function(e,t,n){var r,i,o;if(e.stats_=ey(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new tS(e.repoInfo_,function(t,n,r,i){r_(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(function(){return rb(e,!0)},0);else{if(null!=n){if("object"!=typeof n)throw Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,I.stringify)(n)}catch(e){throw Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new eG(e.repoInfo_,t,function(t,n,r,i){r_(e,t,n,r,i)},function(t){rb(e,t)},function(t){ee(t,function(t,n){rw(e,t,n)})},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(function(t){e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(function(t){e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=(r=e.repoInfo_,i=function(){return new tP(e.stats_,e.server_)},eg[o=r.toString()]||(eg[o]=i()),eg[o]),e.infoData_=new tC,e.infoSyncTree_=new nk({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=nx(e.infoSyncTree_,t._path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),rw(e,"connected",!1),e.serverSyncTree_=new nk({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,function(n,r){var o=i(n,r);rd(e.eventQueue_,t._path,o)}),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new rG(this._repo,ex())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){var e,t,n;return this._checkNotDeleted("delete"),e=this._repo,(n=id[t=this.app.name])&&n[e.key]===e||B("Database "+t+"("+e.repoInfo_+") has already been deleted."),rC(e),delete n[e.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},e.prototype._checkNotDeleted=function(e){null===this._rootInternal&&B("Cannot call "+e+" on a deleted database.")},e}(),iy={".sv":"timestamp"},im=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),i_=function(){function e(e){this._delegate=e}return e.prototype.cancel=function(e){(0,I.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,I.validateCallback)("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},e.prototype.remove=function(e){(0,I.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,I.validateCallback)("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},e.prototype.set=function(e,t){(0,I.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,I.validateCallback)("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then(function(){return t(null)},function(e){return t(e)}),n},e.prototype.setWithPriority=function(e,t,n){(0,I.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,I.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then(function(){return n(null)},function(e){return n(e)}),r},e.prototype.update=function(e,t){if((0,I.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,K("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,I.validateCallback)("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then(function(){return t(null)},function(e){return t(e)}),i},e}(),ib=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return(0,I.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),iw=function(){function e(e,t){this._database=e,this._delegate=t}return e.prototype.val=function(){return(0,I.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return(0,I.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return(0,I.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return(0,I.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return(0,I.validateArgCount)("DataSnapshot.child",0,1,arguments.length),ro("DataSnapshot.child","path",t=String(t),!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(e){return(0,I.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),ro("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},e.prototype.getPriority=function(){return(0,I.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return(0,I.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,I.validateCallback)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(function(r){return t(new e(n._database,r))})},e.prototype.hasChildren=function(){return(0,I.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return(0,I.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return(0,I.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new iT(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),iI=function(){function e(e,t){this.database=e,this._delegate=t}return e.prototype.on=function(t,n,r,i){var o,a=this;(0,I.validateArgCount)("Query.on",2,4,arguments.length),(0,I.validateCallback)("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new iw(a.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(t){case"value":return r2(this._delegate,u,c),n;case"child_added":return r4(this._delegate,u,c),n;case"child_removed":return r5(this._delegate,u,c),n;case"child_changed":return r3(this._delegate,u,c),n;case"child_moved":return r6(this._delegate,u,c),n;default:throw Error((0,I.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(e,t,n){if((0,I.validateArgCount)("Query.off",0,3,arguments.length),rr("Query.off",e,!0),(0,I.validateCallback)("Query.off","callback",t,!0),(0,I.validateContextObject)("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,r8(this._delegate,e,r)}else r8(this._delegate,e)},e.prototype.get=function(){var e,t,n,r,i=this;return(e=this._delegate,(t=(e=(0,I.getModularInstance)(e))._repo,n=e,null!=(r=function(e,t){var n,r=t._path,i=null;e.syncPointTree_.foreachOnPath(r,function(e,t){var n=eU(e,r);i=i||nI(t,n)});var o=e.syncPointTree_.get(r);o?i=i||nI(o,ex()):(o=new nm,e.syncPointTree_=e.syncPointTree_.set(r,o));var a=null!=i,s=a?new tU(i,!0,!1):null,u=(n=e.pendingWriteTree_,nr(t._path,n));return tH(nb(o,t,u,a?s.getNode():tr.EMPTY_NODE,a).viewCache_)}(t.serverSyncTree_,n))?Promise.resolve(r):t.server_.get(n).then(function(e){var r=to(e).withIndex(n._queryParams.getIndex()),i=nx(t.serverSyncTree_,n._path,r);return rf(t.eventQueue_,n._path,i),Promise.resolve(r)},function(e){return rk(t,"get for query "+(0,I.stringify)(n)+" failed: "+e),Promise.reject(Error(e))})).then(function(t){return new rQ(t,new rG(e._repo,e._path),e._queryParams.getIndex())})).then(function(e){return new iw(i.database,e)})},e.prototype.once=function(t,n,r,i){var o=this;(0,I.validateArgCount)("Query.once",1,4,arguments.length),(0,I.validateCallback)("Query.once","callback",n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),s=new I.Deferred,u=function(e,t){var r=new iw(o.database,e);n&&n.call(a.context,r,t),s.resolve(r)};u.userCallback=n,u.context=a.context;var c=function(e){a.cancel&&a.cancel.call(a.context,e),s.reject(e)};switch(t){case"value":r2(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":r4(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":r5(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":r3(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":r6(this._delegate,u,c,{onlyOnce:!0});break;default:throw Error((0,I.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},e.prototype.limitToFirst=function(t){return(0,I.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new e(this.database,ih(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("limitToFirst: First argument must be a positive integer.");return new ii(e)}(t)))},e.prototype.limitToLast=function(t){return(0,I.validateArgCount)("Query.limitToLast",1,1,arguments.length),new e(this.database,ih(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("limitToLast: First argument must be a positive integer.");return new io(e)}(t)))},e.prototype.orderByChild=function(t){return(0,I.validateArgCount)("Query.orderByChild",1,1,arguments.length),new e(this.database,ih(this._delegate,function(e){if("$key"===e)throw Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ro("orderByChild","path",e,!1),new ia(e)}(t)))},e.prototype.orderByKey=function(){return(0,I.validateArgCount)("Query.orderByKey",0,0,arguments.length),new e(this.database,ih(this._delegate,new is))},e.prototype.orderByPriority=function(){return(0,I.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new e(this.database,ih(this._delegate,new iu))},e.prototype.orderByValue=function(){return(0,I.validateArgCount)("Query.orderByValue",0,0,arguments.length),new e(this.database,ih(this._delegate,new ic))},e.prototype.startAt=function(t,n){var r;return void 0===t&&(t=null),(0,I.validateArgCount)("Query.startAt",0,2,arguments.length),new e(this.database,ih(this._delegate,(void 0===(r=t)&&(r=null),ri("startAt","key",n,!0),new it(r,n))))},e.prototype.startAfter=function(t,n){var r;return void 0===t&&(t=null),(0,I.validateArgCount)("Query.startAfter",0,2,arguments.length),new e(this.database,ih(this._delegate,(r=t,ri("startAfter","key",n,!0),new ir(r,n))))},e.prototype.endAt=function(t,n){var r;return void 0===t&&(t=null),(0,I.validateArgCount)("Query.endAt",0,2,arguments.length),new e(this.database,ih(this._delegate,(r=t,ri("endAt","key",n,!0),new r7(r,n))))},e.prototype.endBefore=function(t,n){var r;return void 0===t&&(t=null),(0,I.validateArgCount)("Query.endBefore",0,2,arguments.length),new e(this.database,ih(this._delegate,(r=t,ri("endBefore","key",n,!0),new ie(r,n))))},e.prototype.equalTo=function(t,n){return(0,I.validateArgCount)("Query.equalTo",1,2,arguments.length),new e(this.database,ih(this._delegate,(ri("equalTo","key",n,!0),new il(t,n))))},e.prototype.toString=function(){return(0,I.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return(0,I.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if((0,I.validateArgCount)("Query.isEqual",1,1,arguments.length),!(t instanceof e))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,I.validateCallback)(e,"cancel",r.cancel,!0),r.context=n,(0,I.validateContextObject)(e,"context",r.context,!0);else if(t){if("object"==typeof t&&null!==t)r.context=t;else if("function"==typeof t)r.cancel=t;else throw Error((0,I.errorPrefix)(e,"cancelOrContext")+" must either be a cancel callback or a context object.")}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return new iT(this.database,new rG(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),iT=function(e){function t(t,n){var r=e.call(this,t,new rK(n._repo,n._path,new t_,!1))||this;return r.database=t,r._delegate=n,r}return(0,T.__extends)(t,e),t.prototype.getKey=function(){return(0,I.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(e){return(0,I.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new t(this.database,r$(this._delegate,e))},t.prototype.getParent=function(){(0,I.validateArgCount)("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new t(this.database,e):null},t.prototype.getRoot=function(){return(0,I.validateArgCount)("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(e,t){(0,I.validateArgCount)("Reference.set",1,2,arguments.length),(0,I.validateCallback)("Reference.set","onComplete",t,!0);var n=rJ(this._delegate,e);return t&&n.then(function(){return t(null)},function(e){return t(e)}),n},t.prototype.update=function(e,t){if((0,I.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n,r,i,o={},a=0;a<e.length;++a)o[""+a]=e[a];e=o,K("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rs("Reference.update",this._delegate._path),(0,I.validateCallback)("Reference.update","onComplete",t,!0);var s=(n=this._delegate,rt("update",r=e,n._path,!1),i=new I.Deferred,function(e,t,n,r){rk(e,"update",{path:t.toString(),value:n});var i=!0,o=rm(e),a={};if(ee(n,function(n,r){i=!1,a[n]=nG(eF(t,n),to(r),e.serverSyncTree_,o)}),i)U("update() called with empty data.  Don't do anything."),rN(e,r,"ok",void 0);else{var s,u,c,l=rI(e),h=(u=(s=e.serverSyncTree_).pendingWriteTree_,(0,I.assert)(l>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:t,children:a,writeId:l,visible:!0}),u.visibleWrites=tX(u.visibleWrites,t,a),u.lastWriteId=l,c=tG.fromObject(a),nO(s,new tj(tR(),t,c)));rh(e.eventQueue_,h),e.server_.merge(t.toString(),n,function(n,i){var o="ok"===n;o||K("update at "+t+" failed: "+n);var a=nA(e.serverSyncTree_,l,!o),s=a.length>0?rP(e,t):t;rd(e.eventQueue_,s,a),rN(e,r,n,i)}),ee(n,function(n){var r=rL(e,eF(t,n));rP(e,r)}),rd(e.eventQueue_,t,[])}}(n._repo,n._path,r,i.wrapCallback(function(){})),i.promise);return t&&s.then(function(){return t(null)},function(e){return t(e)}),s},t.prototype.setWithPriority=function(e,t,n){(0,I.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,I.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(rs("setWithPriority",e._path),n9("setWithPriority",t,e._path,!1),rn("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new I.Deferred;return rT(e._repo,e._path,t,n,r.wrapCallback(function(){})),r.promise}(this._delegate,e,t);return n&&r.then(function(){return n(null)},function(e){return n(e)}),r},t.prototype.remove=function(e){(0,I.validateArgCount)("Reference.remove",0,1,arguments.length),(0,I.validateCallback)("Reference.remove","onComplete",e,!0);var t,n=(rs("remove",(t=this._delegate)._path),rJ(t,null));return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.transaction=function(e,t,n){var r=this;(0,I.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,I.validateCallback)("Reference.transaction","transactionUpdate",e,!1),(0,I.validateCallback)("Reference.transaction","onComplete",t,!0),rc("Reference.transaction","applyLocally",n,!0);var i=(function(e,t,n){if(rs("Reference.transaction",(e=(0,I.getModularInstance)(e))._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var r,i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new I.Deferred,a=r2(e,function(){});return function(e,t,n,r,i,o){rk(e,"transaction on "+t);var a={path:t,update:n,onComplete:r,status:null,order:D(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=rA(e,t,void 0);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{n7("transaction failed: Data returned ",u,a.path),a.status=0;var c=n$(e.transactionQueueTree_,t),l=nJ(c)||[];l.push(a),nZ(c,l);var h=void 0;"object"==typeof u&&null!==u&&(0,I.contains)(u,".priority")?(h=(0,I.safeGet)(u,".priority"),(0,I.assert)(n8(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(nD(e.serverSyncTree_,t)||tr.EMPTY_NODE).getPriority().val();var f=rm(e),d=to(u,h),p=nQ(d,s,f);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=p,a.currentWriteId=rI(e);var v=nN(e.serverSyncTree_,t,p,a.currentWriteId,a.applyLocally);rd(e.eventQueue_,t,v),rx(e,e.transactionQueueTree_)}}(e._repo,e._path,t,function(t,n,r){var i=null;t?o.reject(t):(i=new rQ(r,new rG(e._repo,e._path),e8),o.resolve(new im(n,i)))},a,i),o.promise})(this._delegate,e,{applyLocally:n}).then(function(e){return new ib(e.committed,new iw(r.database,e.snapshot))});return t&&i.then(function(e){return t(null,e.committed,e.snapshot)},function(e){return t(e,!1,null)}),i},t.prototype.setPriority=function(e,t){(0,I.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,I.validateCallback)("Reference.setPriority","onComplete",t,!0);var n,r,i=(n=this._delegate,rs("setPriority",(n=(0,I.getModularInstance)(n))._path),rn("setPriority",e,!1),r=new I.Deferred,rT(n._repo,eF(n._path,".priority"),e,null,r.wrapCallback(function(){})),r.promise);return t&&i.then(function(){return t(null)},function(e){return t(e)}),i},t.prototype.push=function(e,n){var r,i,o,a,s,u=this;(0,I.validateArgCount)("Reference.push",0,2,arguments.length),(0,I.validateCallback)("Reference.push","onComplete",n,!0);var c=(r=this._delegate,rs("push",(r=(0,I.getModularInstance)(r))._path),n9("push",e,r._path,!0),o=tc(ry(r._repo)),a=r$(r,o),s=r$(r,o),i=null!=e?rJ(s,e).then(function(){return s}):Promise.resolve(s),a.then=i.then.bind(i),a.catch=i.then.bind(i,void 0),a),l=c.then(function(e){return new t(u.database,e)});n&&l.then(function(){return n(null)},function(e){return n(e)});var h=new t(this.database,c);return h.then=l.then.bind(l),h.catch=l.catch.bind(l,void 0),h},t.prototype.onDisconnect=function(){return rs("Reference.onDisconnect",this._delegate._path),new i_(new rB(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(iI),iE=function(){function e(e,t){var n=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return e.prototype.useEmulator=function(e,t,n){var r,i,o,a,s;void 0===n&&(n={}),r=this._delegate,void 0===(i=n)&&(i={}),(r=(0,I.getModularInstance)(r))._checkNotDeleted("useEmulator"),r._instanceStarted&&B("Cannot call useEmulator() after instance has already been initialized."),o=r._repoInternal,a=void 0,o.repoInfo_.nodeAdmin?(i.mockUserToken&&B('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new eu(eu.OWNER)):i.mockUserToken&&(a=new eu((0,I.createMockUserToken)(i.mockUserToken,r.app.options.projectId))),s=a,o.repoInfo_=new ef(e+":"+t,!1,o.repoInfo_.namespace,o.repoInfo_.webSocketOnly,o.repoInfo_.nodeAdmin,o.repoInfo_.persistenceKey,o.repoInfo_.includeNamespaceInQueryParams),s&&(o.authTokenProvider_=s)},e.prototype.ref=function(e){if((0,I.validateArgCount)("database.ref",0,1,arguments.length),e instanceof iT){var t=rX(this._delegate,e.toString());return new iT(this,t)}var t=rY(this._delegate,e);return new iT(this,t)},e.prototype.refFromURL=function(e){return(0,I.validateArgCount)("database.refFromURL",1,1,arguments.length),new iT(this,rX(this._delegate,e))},e.prototype.goOffline=function(){var e;return(0,I.validateArgCount)("database.goOffline",0,0,arguments.length),e=this._delegate,void((e=(0,I.getModularInstance)(e))._checkNotDeleted("goOffline"),rC(e._repo))},e.prototype.goOnline=function(){var e,t;return(0,I.validateArgCount)("database.goOnline",0,0,arguments.length),e=this._delegate,void((e=(0,I.getModularInstance)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(rv))},e.ServerValue={TIMESTAMP:iy,increment:function(e){return{".sv":{increment:e}}}},e}(),iS=Object.freeze({__proto__:null,forceLongPolling:function(){eT.forceDisallow(),eb.forceAllow()},forceWebSockets:function(){eb.forceDisallow()},isWebSocketsAvailable:function(){return eT.isAvailable()},setSecurityDebugCallback:function(e,t){e._delegate._repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){!function(e,t){if(void 0===t&&(t=!1),"undefined"!=typeof console){t?(e.statsListener_||(e.statsListener_=new tx(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var n,r=Object.keys(n).reduce(function(e,t){return Math.max(t.length,e)},0);ee(n,function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)})}}(e._delegate._repo,t)},statsIncrementCounter:function(e,t){var n;(n=e._delegate._repo).stats_.incrementCounter(t),n.statsReporter_.statsToReport_[t]=!0},dataUpdateCount:function(e){return e._delegate._repo.dataUpdateCount},interceptServerData:function(e,t){e._delegate._repo.interceptServerDataCallback_=t},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,o=e.namespace,a=e.nodeAdmin;C=r;var s=new w.Provider("auth-internal",new w.ComponentContainer("database-standalone"));return s.setComponent(new w.Component("auth-internal",function(){return i},"PRIVATE")),{instance:new iE(iv(t,s,void 0,n,void 0!==a&&a),t),namespace:o}}});eG.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},eG.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var iC=Object.freeze({__proto__:null,DataConnection:eG,RealTimeConnection:eS,hijackHash:function(e){var t=eG.prototype.put;return eG.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){eG.prototype.put=t}},ConnectionTarget:ef,queryIdentifier:function(e){return e._delegate._queryIdentifier},forceRestClient:function(e){ip=e}}),ik=iE.ServerValue;C=(r=b.default).SDK_VERSION,i=r.INTERNAL.registerComponent(new w.Component("database",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate();return new iE(iv(r,e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),r)},"PUBLIC").setServiceProps({Reference:iT,Query:iI,Database:iE,DataSnapshot:iw,enableLogging:j,INTERNAL:iS,ServerValue:ik,TEST_ACCESS:iC}).setMultipleInstances(!0)),r.registerVersion("@firebase/database","0.10.2"),(0,I.isNodeSdk)()&&(e.exports=i)},8483:function(e,t,n){"use strict";var r,i=n(6099);n(4589),n(4594),n(3705);var o=n(3297),a=n(909),s={Firestore:o.B,GeoPoint:o.S,Timestamp:o.$,Blob:o.a,Transaction:o.Q,WriteBatch:o.K,DocumentReference:o.W,DocumentSnapshot:o.J,Query:o.X,QueryDocumentSnapshot:o.Y,QuerySnapshot:o.t,CollectionReference:o.e,FieldPath:o.s,FieldValue:o.i,setLogLevel:o.U,CACHE_SIZE_UNLIMITED:o.g};!function(e,t){e.INTERNAL.registerComponent(new a.Component("firestore",function(e){return t(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},s)))}(r=i.default,function(e,t){return new o.B(e,new o.p(e,t),new o.L)}),r.registerVersion("@firebase/firestore","2.3.2")},3297:function(e,t,n){"use strict";n.d(t,{$:function(){return w},B:function(){return sa},J:function(){return sg},K:function(){return sl},L:function(){return so},Q:function(){return sc},S:function(){return au},U:function(){return su},W:function(){return sf},X:function(){return sm},Y:function(){return sy},a:function(){return si},e:function(){return sw},g:function(){return o7},i:function(){return sT},o:function(){return sS},p:function(){return ae},r:function(){return sE},s:function(){return sI},t:function(){return sb}});var r=n(4589),i=n(4594),o=n(3705),a=n(7582),s=n(3454),u=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();u.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},l=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,a.__extends)(t,e),t}(Error),h=new i.Logger("@firebase/firestore");function f(){return h.logLevel}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(h.logLevel<=i.LogLevel.DEBUG){var r=t.map(g);h.debug.apply(h,(0,a.__spreadArray)(["Firestore (8.6.3): "+e],r))}}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(h.logLevel<=i.LogLevel.ERROR){var r=t.map(g);h.error.apply(h,(0,a.__spreadArray)(["Firestore (8.6.3): "+e],r))}}function v(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(h.logLevel<=i.LogLevel.WARN){var r=t.map(g);h.warn.apply(h,(0,a.__spreadArray)(["Firestore (8.6.3): "+e],r))}}function g(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.6.3) INTERNAL ASSERTION FAILED: "+e;throw p(t),Error(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<40;r++)n[r]=Math.floor(256*Math.random());return n}(0),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function _(e,t){return e<t?-1:e>t?1:0}function b(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new l(c.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800||e>=253402300800)throw new l(c.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?_(this.nanoseconds,e.nanoseconds):_(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),I=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new w(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function E(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function S(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&y(),void 0===n?n=e.length-t:n>e.length-t&&y(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return -1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0;i<e.length;i++){var o=e[i];if(o.indexOf("//")>=0)throw new l(c.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(e){return e.length>0}))}return new t(r)},t.emptyPath=function(){return new t([])},t}(C),N=/^[_a-zA-Z][_a-zA-Z0-9]*$/,A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return N.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new l(c.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new l(c.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new l(c.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?a=!a:"."!==s||a?r+=s:o(),i++}if(o(),a)throw new l(c.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(C),x=function(){function e(e){this.fields=e,e.sort(A.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return b(this.fields,e.fields,function(e,t){return e.isEqual(t)})},e}(),P=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return btoa(this.binaryString)},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return _(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();P.EMPTY_BYTE_STRING=new P("");var R=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function D(e){if(e||y(),"string"==typeof e){var t=0,n=R.exec(e);if(n||y(),n[1]){var r=n[1];t=Number(r=(r+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:O(e.seconds),nanos:O(e.nanos)}}function O(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function L(e){return"string"==typeof e?P.fromBase64String(e):P.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function F(e){var t=D(e.mapValue.fields.__local_write_time__.timestampValue);return new w(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(e){return null==e}function U(e){return 0===e&&1/e==-1/0}function q(e){return"number"==typeof e&&Number.isInteger(e)&&!U(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(k.fromString(t))},e.fromName=function(t){return new e(k.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===k.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return k.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new k(t.slice()))},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?M(e)?4:10:y()}function K(e,t){var n=B(e);if(n!==B(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return F(e).isEqual(F(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=D(e.timestampValue),r=D(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return L(e.bytesValue).isEqual(L(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return O(e.geoPointValue.latitude)===O(t.geoPointValue.latitude)&&O(e.geoPointValue.longitude)===O(t.geoPointValue.longitude);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return O(e.integerValue)===O(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=O(e.doubleValue),r=O(t.doubleValue);return n===r?U(n)===U(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return b(e.arrayValue.values||[],t.arrayValue.values||[],K);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(T(n)!==T(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!K(n[i],r[i])))return!1;return!0}(e,t);default:return y()}}function W(e,t){return void 0!==(e.values||[]).find(function(e){return K(e,t)})}function H(e,t){var n,r,i,o,a,s,u,c,l,h=B(e),f=B(t);if(h!==f)return _(h,f);switch(h){case 0:return 0;case 1:return _(e.booleanValue,t.booleanValue);case 2:return(n=O(e.integerValue||e.doubleValue))<(r=O(t.integerValue||t.doubleValue))?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1;case 3:return z(e.timestampValue,t.timestampValue);case 4:return z(F(e),F(t));case 5:return _(e.stringValue,t.stringValue);case 6:return i=e.bytesValue,o=t.bytesValue,a=L(i),s=L(o),a.compareTo(s);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=_(n[i],r[i]);if(0!==o)return o}return _(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return u=e.geoPointValue,c=t.geoPointValue,0!==(l=_(O(u.latitude),O(c.latitude)))?l:_(O(u.longitude),O(c.longitude));case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=H(n[i],r[i]);if(o)return o}return _(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=_(r[a],o[a]);if(0!==s)return s;var u=H(n[r[a]],i[o[a]]);if(0!==u)return u}return _(r.length,o.length)}(e.mapValue,t.mapValue);default:throw y()}}function z(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return _(e,t);var n=D(e),r=D(t),i=_(n.seconds,r.seconds);return 0!==i?i:_(n.nanos,r.nanos)}function G(e){var t,n,r;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?"time("+(r=D(e.timestampValue)).seconds+","+r.nanos+")":"stringValue"in e?e.stringValue:"bytesValue"in e?L(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,V.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=G(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+G(e.fields[o])}return t+"}"}(e.mapValue):y()}function Q(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function Y(e){return!!e&&"integerValue"in e}function X(e){return!!e&&"arrayValue"in e}function $(e){return!!e&&"nullValue"in e}function J(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Z(e){return!!e&&"mapValue"in e}function ee(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue)return{timestampValue:Object.assign({},D(e.timestampValue))};if(e.mapValue){var t={mapValue:{fields:{}}};return E(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=ee(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ee(e.arrayValue.values[r]);return n}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Z(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ee(t)},e.prototype.setAll=function(e){var t=this,n=A.emptyPath(),r={},i=[];e.forEach(function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=ee(e):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());Z(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return K(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Z(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){E(t,function(t,n){return e[t]=n});for(var r=0;r<n.length;r++){var i=n[r];delete e[i]}},e.prototype.clone=function(){return new e(ee(this.value))},e}(),en=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,I.min(),et.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,et.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,et.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=et.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=et.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),er=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new er(e,t,n,r,i,o,a)}function eo(e){if(null===e.h){var t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:"+e.filters.map(function(e){return e.field.canonicalString()+e.op.toString()+G(e.value)}).join(",")+"|ob:"+e.orderBy.map(function(e){return e.field.canonicalString()+e.dir}).join(","),j(e.limit)||(t+="|l:"+e.limit),e.startAt&&(t+="|lb:"+em(e.startAt)),e.endAt&&(t+="|ub:"+em(e.endAt)),e.h=t}return e.h}function ea(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n,r,i,o,a=0;a<e.orderBy.length;a++)if(n=e.orderBy[a],r=t.orderBy[a],!(n.dir===r.dir&&n.field.isEqual(r.field)))return!1;if(e.filters.length!==t.filters.length)return!1;for(var s=0;s<e.filters.length;s++)if(i=e.filters[s],o=t.filters[s],i.op!==o.op||!i.field.isEqual(o.field)||!K(i.value,o.value))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ew(e.startAt,t.startAt)&&ew(e.endAt,t.endAt)}function es(e){return V.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var eu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return(0,a.__extends)(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new ec(e,n,r):"array-contains"===n?new ed(e,r):"in"===n?new ep(e,r):"not-in"===n?new ev(e,r):"array-contains-any"===n?new eg(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new el(e,n):new eh(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(H(t,this.value)):null!==t&&B(this.value)===B(t)&&this.m(H(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return y()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),ec=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=V.fromName(r.referenceValue),i}return(0,a.__extends)(t,e),t.prototype.matches=function(e){var t=V.comparator(e.key,this.key);return this.m(t)},t}(eu),el=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=ef("in",n),r}return(0,a.__extends)(t,e),t.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},t}(eu),eh=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=ef("not-in",n),r}return(0,a.__extends)(t,e),t.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},t}(eu);function ef(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return V.fromName(e.referenceValue)})}var ed=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return(0,a.__extends)(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return X(t)&&W(t.arrayValue,this.value)},t}(eu),ep=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return(0,a.__extends)(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&W(this.value.arrayValue,t)},t}(eu),ev=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return(0,a.__extends)(t,e),t.prototype.matches=function(e){if(W(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!W(this.value.arrayValue,t)},t}(eu),eg=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return(0,a.__extends)(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!X(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return W(t.value.arrayValue,e)})},t}(eu),ey=function(e,t){this.position=e,this.before=t};function em(e){return(e.before?"b":"a")+":"+e.position.map(function(e){return G(e)}).join(",")}var e_=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function eb(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?V.comparator(V.fromName(a.referenceValue),n.key):H(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function ew(e,t){if(null===e)return null===t;if(null===t||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!K(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eI=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function eT(e){return new eI(e)}function eE(e){return!j(e.limit)&&"F"===e.limitType}function eS(e){return!j(e.limit)&&"L"===e.limitType}function eC(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ek(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function eN(e){return null!==e.collectionGroup}function eA(e){if(null===e.p){e.p=[];var t=ek(e),n=eC(e);if(null!==t&&null===n)t.isKeyField()||e.p.push(new e_(t)),e.p.push(new e_(A.keyField(),"asc"));else{for(var r=!1,i=0,o=e.explicitOrderBy;i<o.length;i++){var a=o[i];e.p.push(a),a.field.isKeyField()&&(r=!0)}if(!r){var s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new e_(A.keyField(),s))}}}return e.p}function ex(e){if(!e.T){if("F"===e.limitType)e.T=ei(e.path,e.collectionGroup,eA(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var t=[],n=0,r=eA(e);n<r.length;n++){var i=r[n],o="desc"===i.dir?"asc":"desc";t.push(new e_(i.field,o))}var a=e.endAt?new ey(e.endAt.position,!e.endAt.before):null,s=e.startAt?new ey(e.startAt.position,!e.startAt.before):null;e.T=ei(e.path,e.collectionGroup,t,e.filters,e.limit,a,s)}}return e.T}function eP(e,t,n){return new eI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function eR(e,t){return ea(ex(e),ex(t))&&e.limitType===t.limitType}function eD(e){return eo(ex(e))+"|lt:"+e.limitType}function eO(e){var t,n;return"Query(target="+(n=(t=ex(e)).path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(e){return e.field.canonicalString()+" "+e.op+" "+G(e.value)}).join(", ")+"]"),j(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(e){return e.field.canonicalString()+" ("+e.dir+")"}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+em(t.startAt)),t.endAt&&(n+=", endAt: "+em(t.endAt)),"Target("+n+")")+"; limitType="+e.limitType+")"}function eL(e,t){var n;return t.isFoundDocument()&&(n=t.key.path,null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):V.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n))&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&!(e.startAt&&!eb(e.startAt,eA(e),t))&&(!e.endAt||!eb(e.endAt,eA(e),t))}function eM(e){return function(t,n){for(var r=!1,i=0,o=eA(e);i<o.length;i++){var a=o[i],s=function(e,t,n){var r,i,o,a=e.field.isKeyField()?V.comparator(t.key,n.key):(r=e.field,i=t.data.field(r),o=n.data.field(r),null!==i&&null!==o?H(i,o):y());switch(e.dir){case"asc":return a;case"desc":return -1*a;default:return y()}}(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:U(t)?"-0":t}}function ej(e){return{integerValue:""+e}}function eU(e,t){return q(t)?ej(t):eF(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eq=function(){this._=void 0};function eV(e,t){return e instanceof eG?Y(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}var eB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t}(eq),eK=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return(0,a.__extends)(t,e),t}(eq);function eW(e,t){for(var n=eY(t),r=function(e){n.some(function(t){return K(t,e)})||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var eH=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return(0,a.__extends)(t,e),t}(eq);function ez(e,t){for(var n=eY(t),r=function(e){n=n.filter(function(t){return!K(t,e)})},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var eG=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return(0,a.__extends)(t,e),t}(eq);function eQ(e){return O(e.integerValue||e.doubleValue)}function eY(e){return X(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eX=function(e,t){this.field=e,this.transform=t},e$=function(e,t){this.version=e,this.transformResults=t},eJ=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function eZ(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var e0=function(){};function e1(e,t,n){e instanceof e3?function(e,t,n){if(eZ(e.precondition,t)){var r=e.value.clone(),i=e9(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(e4(t),r).setHasLocalMutations()}}(e,t,n):e instanceof e6?function(e,t,n){if(eZ(e.precondition,t)){var r=e9(e.fieldTransforms,n,t),i=t.data;i.setAll(e5(e)),i.setAll(r),t.convertToFoundDocument(e4(t),i).setHasLocalMutations()}}(e,t,n):eZ(e.precondition,t)&&t.convertToNoDocument(I.min())}function e2(e,t){var n,r;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||!(!n||!r)&&b(n,r,function(e,t){var n,r;return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof eK&&r instanceof eK||n instanceof eH&&r instanceof eH?b(n.elements,r.elements,K):n instanceof eG&&r instanceof eG?K(n.A,r.A):n instanceof eB&&r instanceof eB)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function e4(e){return e.isFoundDocument()?e.version:I.min()}var e3=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,a.__extends)(t,e),t}(e0),e6=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,a.__extends)(t,e),t}(e0);function e5(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function e8(e,t,n){var r=new Map;e.length===n.length||y();for(var i=0;i<n.length;i++){var o,a=e[i],s=a.transform,u=t.data.field(a.field);r.set(a.field,(o=n[i],s instanceof eK?eW(s,u):s instanceof eH?ez(s,u):o))}return r}function e9(e,t,n){for(var r=new Map,i=0;i<e.length;i++){var o=e[i],a=o.transform,s=n.data.field(o.field);r.set(o.field,function(e,t,n){var r,i,o;return e instanceof eB?(r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}},t&&(r.fields.__previous_value__=t),{mapValue:r}):e instanceof eK?eW(e,t):e instanceof eH?ez(e,t):(o=eQ(i=eV(e,t))+eQ(e.A),Y(i)&&Y(e.A)?ej(o):eF(e.R,o))}(a,s,t))}return r}var e7,te,tt=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,a.__extends)(t,e),t}(e0),tn=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,a.__extends)(t,e),t}(e0),tr=function(e){this.count=e};function ti(e){switch(e){case c.OK:return y();case c.CANCELLED:case c.UNKNOWN:case c.DEADLINE_EXCEEDED:case c.RESOURCE_EXHAUSTED:case c.INTERNAL:case c.UNAVAILABLE:case c.UNAUTHENTICATED:return!1;case c.INVALID_ARGUMENT:case c.NOT_FOUND:case c.ALREADY_EXISTS:case c.PERMISSION_DENIED:case c.FAILED_PRECONDITION:case c.ABORTED:case c.OUT_OF_RANGE:case c.UNIMPLEMENTED:case c.DATA_LOSS:return!0;default:return y()}}function to(e){if(void 0===e)return p("GRPC error has no .code"),c.UNKNOWN;switch(e){case e7.OK:return c.OK;case e7.CANCELLED:return c.CANCELLED;case e7.UNKNOWN:return c.UNKNOWN;case e7.DEADLINE_EXCEEDED:return c.DEADLINE_EXCEEDED;case e7.RESOURCE_EXHAUSTED:return c.RESOURCE_EXHAUSTED;case e7.INTERNAL:return c.INTERNAL;case e7.UNAVAILABLE:return c.UNAVAILABLE;case e7.UNAUTHENTICATED:return c.UNAUTHENTICATED;case e7.INVALID_ARGUMENT:return c.INVALID_ARGUMENT;case e7.NOT_FOUND:return c.NOT_FOUND;case e7.ALREADY_EXISTS:return c.ALREADY_EXISTS;case e7.PERMISSION_DENIED:return c.PERMISSION_DENIED;case e7.FAILED_PRECONDITION:return c.FAILED_PRECONDITION;case e7.ABORTED:return c.ABORTED;case e7.OUT_OF_RANGE:return c.OUT_OF_RANGE;case e7.UNIMPLEMENTED:return c.UNIMPLEMENTED;case e7.DATA_LOSS:return c.DATA_LOSS;default:return y()}}(te=e7||(e7={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ta=function(){function e(e,t){this.comparator=e,this.root=t||tu.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,tu.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tu.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return -1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new ts(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new ts(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new ts(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new ts(this.root,e,this.comparator,!0)},e}(),ts=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),tu=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(0>n(t,i.key))i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){return Math.pow(2,this.check())<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw y();var e=this.left.check();if(e!==this.right.check())throw y();return e+(this.isRed()?0:1)},e}();tu.EMPTY=null,tu.RED=!0,tu.BLACK=!1,tu.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw y()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new tu(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tc=function(){function e(e){this.comparator=e,this.data=new ta(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new tl(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new tl(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),tl=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),th=new ta(V.comparator),tf=new ta(V.comparator),td=new ta(V.comparator),tp=new tc(V.comparator);function tv(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=tp,r=0;r<e.length;r++){var i=e[r];n=n.add(i)}return n}var tg=new tc(_),ty=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,tm.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(I.min(),r,tg,th,tv())},e}(),tm=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(P.EMPTY_BYTE_STRING,n,tv(),tv(),tv())},e}(),t_=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},tb=function(e,t){this.targetId=e,this.V=t},tw=function(e,t,n,r){void 0===n&&(n=P.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},tI=function(){function e(){this.S=0,this.D=tS(),this.C=P.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.F=!0,this.C=e)},e.prototype.M=function(){var e=tv(),t=tv(),n=tv();return this.D.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:y()}}),new tm(this.C,this.N,e,t,n)},e.prototype.L=function(){this.F=!1,this.D=tS()},e.prototype.B=function(e,t){this.F=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.F=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.F=!0,this.N=!0},e}(),tT=function(){function e(e){this.W=e,this.G=new Map,this.H=th,this.J=tE(),this.Y=new tc(_)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.k||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:y()}})},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach(function(e,r){n.st(r)&&t(r)})},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(es(i)){if(0===n){var o=new V(i.path);this.tt(t,o,en.newNoDocument(o,I.min()))}else 1===n||y()}else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach(function(r,i){var o=t.ot(i);if(o){if(r.current&&es(o.target)){var a=new V(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,en.newNoDocument(a,e))}r.$&&(n.set(i,r.M()),r.L())}});var r=tv();this.J.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))});var i=new ty(e,n,this.Y,this.H,r);return this.H=th,this.J=tE(),this.Y=new tc(_),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new tI,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new tc(_),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||d("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.k?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new tI),this.W.getRemoteKeysForTarget(e).forEach(function(n){t.tt(e,n,null)})},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function tE(){return new ta(V.comparator)}function tS(){return new ta(V.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tC={asc:"ASCENDING",desc:"DESCENDING"},tk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tN=function(e,t){this.databaseId=e,this.I=t};function tA(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function tx(e,t){return e.I?t.toBase64():t.toUint8Array()}function tP(e){var t;return e||y(),I.fromTimestamp(new w((t=D(e)).seconds,t.nanos))}function tR(e,t){return new k(["projects",e.projectId,"databases",e.database]).child("documents").child(t).canonicalString()}function tD(e){var t=k.fromString(e);return t$(t)||y(),t}function tO(e,t){return tR(e.databaseId,t.path)}function tL(e,t){var n=tD(t);if(n.get(1)!==e.databaseId.projectId)throw new l(c.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new l(c.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new V(tU(n))}function tM(e,t){return tR(e.databaseId,t)}function tF(e){var t=tD(e);return 4===t.length?k.emptyPath():tU(t)}function tj(e){return new k(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tU(e){return e.length>4&&"documents"===e.get(4)||y(),e.popFirst(5)}function tq(e,t,n){return{name:tO(e,t),fields:n.value.mapValue.fields}}function tV(e,t,n){var r=tL(e,t.name),i=tP(t.updateTime),o=new et({mapValue:{fields:t.fields}}),a=en.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function tB(e,t){var n,r,i,o;if(t instanceof e3)n={update:tq(e,t.key,t.value)};else if(t instanceof tt)n={delete:tO(e,t.key)};else if(t instanceof e6)n={update:tq(e,t.key,t.data),updateMask:(i=t.fieldMask,o=[],i.fields.forEach(function(e){return o.push(e.canonicalString())}),{fieldPaths:o})};else{if(!(t instanceof tn))return y();n={verify:tO(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof eB)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof eK)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof eH)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof eG)return{fieldPath:t.field.canonicalString(),increment:n.A};throw y()}(0,e)})),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:tA(e,r.updateTime.toTimestamp())}:void 0!==r.exists?{exists:r.exists}:y()),n}function tK(e,t){var n,r=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?eJ.updateTime(tP(n.updateTime)):void 0!==n.exists?eJ.exists(n.exists):eJ.none():eJ.none(),i=t.updateTransforms?t.updateTransforms.map(function(t){var n;return n=null,"setToServerValue"in t?("REQUEST_TIME"===t.setToServerValue||y(),n=new eB):"appendMissingElements"in t?n=new eK(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new eH(t.removeAllFromArray.values||[]):"increment"in t?n=new eG(e,t.increment):y(),new eX(A.fromServerFormat(t.fieldPath),n)}):[];if(t.update){t.update.name;var o=tL(e,t.update.name),a=new et({mapValue:{fields:t.update.fields}});return t.updateMask?new e6(o,a,new x((t.updateMask.fieldPaths||[]).map(function(e){return A.fromServerFormat(e)})),r,i):new e3(o,a,r,i)}return t.delete?new tt(tL(e,t.delete),r):t.verify?new tn(tL(e,t.verify),r):y()}function tW(e,t){return{documents:[tM(e,t.path)]}}function tH(e,t){var n,r={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(r.parent=tM(e,i),r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r.parent=tM(e,i.popLast()),r.structuredQuery.from=[{collectionId:i.lastSegment()}]);var o=function(e){if(0!==e.length){var t=e.map(function(e){return function(e){if("=="===e.op){if(J(e.value))return{unaryFilter:{field:tY(e.field),op:"IS_NAN"}};if($(e.value))return{unaryFilter:{field:tY(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(J(e.value))return{unaryFilter:{field:tY(e.field),op:"IS_NOT_NAN"}};if($(e.value))return{unaryFilter:{field:tY(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tY(e.field),op:tk[e.op],value:e.value}}}(e)});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);o&&(r.structuredQuery.where=o);var a=function(e){if(0!==e.length)return e.map(function(e){return{field:tY(e.field),direction:tC[e.dir]}})}(t.orderBy);a&&(r.structuredQuery.orderBy=a);var s=(n=t.limit,e.I||j(n)?n:{value:n});return null!==s&&(r.structuredQuery.limit=s),t.startAt&&(r.structuredQuery.startAt=tG(t.startAt)),t.endAt&&(r.structuredQuery.endAt=tG(t.endAt)),r}function tz(e){var t,n,r=tF(e.parent),i=e.structuredQuery,o=i.from?i.from.length:0,a=null;if(o>0){1===o||y();var s=i.from[0];s.allDescendants?a=s.collectionId:r=r.child(s.collectionId)}var u=[];i.where&&(u=function e(t){return t?void 0!==t.unaryFilter?[function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=tX(e.unaryFilter.field);return eu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=tX(e.unaryFilter.field);return eu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=tX(e.unaryFilter.field);return eu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=tX(e.unaryFilter.field);return eu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return y()}}(t)]:void 0!==t.fieldFilter?[eu.create(tX(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return y()}}(t.fieldFilter.op),t.fieldFilter.value)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(e,t){return e.concat(t)}):y():[]}(i.where));var c=[];i.orderBy&&(c=i.orderBy.map(function(e){return new e_(tX(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}));var l=null;i.limit&&(l=j(n="object"==typeof(t=i.limit)?t.value:t)?null:n);var h=null;i.startAt&&(h=tQ(i.startAt));var f=null;return i.endAt&&(f=tQ(i.endAt)),new eI(r,a,c,u,l,"F",h,f)}function tG(e){return{before:e.before,values:e.position}}function tQ(e){var t=!!e.before;return new ey(e.values||[],t)}function tY(e){return{fieldPath:e.canonicalString()}}function tX(e){return A.fromServerFormat(e.fieldPath)}function t$(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tJ(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t+="\x01\x01"),t=function(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}(e.get(n),t);return t+"\x01\x01"}function tZ(e){var t=e.length;if(t>=2||y(),2===t)return"\x01"===e.charAt(0)&&"\x01"===e.charAt(1)||y(),k.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&y(),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a)+"\0";break;case"\x11":i+=e.substring(o,a+1);break;default:y()}o=a+2}return new k(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t0=function(e,t){this.seconds=e,this.nanoseconds=t},t1=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};t1.store="owner",t1.key="owner";var t2=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};t2.store="mutationQueues",t2.keyPath="userId";var t4=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};t4.store="mutations",t4.keyPath="batchId",t4.userMutationsIndex="userMutationsIndex",t4.userMutationsKeyPath=["userId","batchId"];var t3=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,tJ(t)]},e.key=function(e,t,n){return[e,tJ(t),n]},e}();t3.store="documentMutations",t3.PLACEHOLDER=new t3;var t6=function(e,t){this.path=e,this.readTime=t},t5=function(e,t){this.path=e,this.version=t},t8=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};t8.store="remoteDocuments",t8.readTimeIndex="readTimeIndex",t8.readTimeIndexPath="readTime",t8.collectionReadTimeIndex="collectionReadTimeIndex",t8.collectionReadTimeIndexPath=["parentPath","readTime"];var t9=function(e){this.byteSize=e};t9.store="remoteDocumentGlobal",t9.key="remoteDocumentGlobalKey";var t7=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};t7.store="targets",t7.keyPath="targetId",t7.queryTargetsIndexName="queryTargetsIndex",t7.queryTargetsKeyPath=["canonicalId","targetId"];var ne=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};ne.store="targetDocuments",ne.keyPath=["targetId","path"],ne.documentTargetsIndex="documentTargetsIndex",ne.documentTargetsKeyPath=["path","targetId"];var nt=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};nt.key="targetGlobalKey",nt.store="targetGlobal";var nn=function(e,t){this.collectionId=e,this.parent=t};nn.store="collectionParents",nn.keyPath=["collectionId","parent"];var nr=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};nr.store="clientMetadata",nr.keyPath="clientId";var ni=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};ni.store="bundles",ni.keyPath="bundleId";var no=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};no.store="namedQueries",no.keyPath="name";var na=(0,a.__spreadArray)((0,a.__spreadArray)([],(0,a.__spreadArray)((0,a.__spreadArray)([],(0,a.__spreadArray)((0,a.__spreadArray)([],(0,a.__spreadArray)((0,a.__spreadArray)([],[t2.store,t4.store,t3.store,t8.store,t7.store,t1.store,nt.store,ne.store]),[nr.store])),[t9.store])),[nn.store])),[ni.store,no.store]),ns="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nu=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},e}(),nc=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},nl=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(e){return n(e)})}),o=!0,i===r&&e()})},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next(function(n){return n?e.resolve(n):t()})},i=0;i<t.length;i++)r(t[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},e}(),nh=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new nc,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new np(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=n_(t.target.error);n.ft.reject(new np(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(e){throw new np(n,e)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(d("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){return new ng(this.transaction.objectStore(e))},e}(),nf=function(){function e(t,n,i){this.name=t,this.version=n,this.wt=i,12.2===e._t((0,r.getUA)())&&p("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return d("SimpleDb","Removing database:",e),ny(window.indexedDB.deleteDatabase(e)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=(0,r.getUA)(),n=e._t(t),i=e.Et(t);return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||0<n&&n<10||0<i&&i<4.5)},e.gt=function(){var e;return void 0!==s&&"YES"===(null===(e=s.env)||void 0===e?void 0:e.Tt)},e.It=function(e,t){return e.store(t)},e._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(t?t[1].split("_").slice(0,2).join("."):"-1")},e.Et=function(e){var t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")},e.prototype.At=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(d("SimpleDb","Opening database:",this.name),t=this,[4,new Promise(function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){t(e.target.result)},i.onblocked=function(){r(new np(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new l(c.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new np(e,n))},i.onupgradeneeded=function(e){d("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next(function(){d("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}})})},e.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,r){return(0,a.__awaiter)(this,void 0,void 0,function(){var i,o,s,u,c;return(0,a.__generator)(this,function(l){switch(l.label){case 0:i="readonly"===t,o=0,s=function(){var t,s,c,l,h;return(0,a.__generator)(this,function(a){switch(a.label){case 0:++o,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,u.At(e)];case 2:return u.db=a.sent(),s=r(t=nh.open(u.db,e,i?"readonly":"readwrite",n)).catch(function(e){return t.abort(e),nl.reject(e)}).toPromise(),c={},s.catch(function(){}),[4,t.dt];case 3:return[2,(c.value=(a.sent(),s),c)];case 4:return h="FirebaseError"!==(l=a.sent()).name&&o<3,d("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}})},u=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),nd=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return ny(this.Pt.delete())},e}(),np=function(e){function t(t,n){var r=this;return(r=e.call(this,c.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,a.__extends)(t,e),t}(l);function nv(e){return"IndexedDbTransactionError"===e.name}var ng=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(d("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ny(n)},e.prototype.add=function(e){return d("SimpleDb","ADD",this.store.name,e,e),ny(this.store.add(e))},e.prototype.get=function(e){var t=this;return ny(this.store.get(e)).next(function(n){return void 0===n&&(n=null),d("SimpleDb","GET",t.store.name,e,n),n})},e.prototype.delete=function(e){return d("SimpleDb","DELETE",this.store.name,e),ny(this.store.delete(e))},e.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),ny(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,function(e,t){r.push(t)}).next(function(){return r})},e.prototype.Ft=function(e,t){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(e,t,n){return n.delete()})},e.prototype.$t=function(e,t){t?n=e:(n={},t=e);var n,r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new nl(function(n,r){t.onerror=function(e){r(n_(e.target.error))},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})},e.prototype.xt=function(e,t){var n=[];return new nl(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new nd(i),a=t(i.primaryKey,i.value,o);if(a instanceof nl){var s=a.catch(function(e){return o.done(),nl.reject(e)});n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return nl.waitFor(n)})},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function ny(e){return new nl(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){n(n_(e.target.error))}})}var nm=!1;function n_(e){var t=nf._t((0,r.getUA)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var i=new l("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return nm||(nm=!0,setTimeout(function(){throw i},0)),i}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nb=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return(0,a.__extends)(t,e),t}(nu);function nw(e,t){return nf.It(e.Mt,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nI=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&function(e,t,n){var r,i;e instanceof e3?(r=e.value.clone(),i=e8(e.fieldTransforms,t,n.transformResults),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()):e instanceof e6?function(e,t,n){if(eZ(e.precondition,t)){var r=e8(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(e5(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t,n=0,r=this.baseMutations;n<r.length;n++)(t=r[n]).key.isEqual(e.key)&&e1(t,e,this.localWriteTime);for(var i=0,o=this.mutations;i<o.length;i++)(t=o[i]).key.isEqual(e.key)&&e1(t,e,this.localWriteTime)},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach(function(n){var r=e.get(n.key);t.applyToLocalView(r),r.isValidDocument()||r.convertToNoDocument(I.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},tv())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&b(this.mutations,e.mutations,function(e,t){return e2(e,t)})&&b(this.baseMutations,e.baseMutations,function(e,t){return e2(e,t)})},e}(),nT=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){t.mutations.length===r.length||y();for(var i=td,o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),nE=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=I.min()),void 0===o&&(o=I.min()),void 0===a&&(a=P.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),nS=function(e){this.Lt=e};function nC(e,t){if(t.document)return tV(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=V.fromSegments(t.noDocument.path),r=nP(t.noDocument.readTime),i=en.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=V.fromSegments(t.unknownDocument.path);return r=nP(t.unknownDocument.version),en.newUnknownDocument(o,r)}return y()}function nk(e,t,n){var r=nN(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o,a={name:tO(o=e.Lt,t.key),fields:t.data.value.mapValue.fields,updateTime:tA(o,t.version.toTimestamp())},s=t.hasCommittedMutations;return new t8(null,null,a,s,r,i)}if(t.isNoDocument()){var u=t.key.path.toArray(),c=nx(t.version);return s=t.hasCommittedMutations,new t8(null,new t6(u,c),null,s,r,i)}return t.isUnknownDocument()?new t8(new t5(t.key.path.toArray(),nx(t.version)),null,null,!0,r,i):y()}function nN(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function nA(e){var t=new w(e[0],e[1]);return I.fromTimestamp(t)}function nx(e){var t=e.toTimestamp();return new t0(t.seconds,t.nanoseconds)}function nP(e){var t=new w(e.seconds,e.nanoseconds);return I.fromTimestamp(t)}function nR(e,t){for(var n=(t.baseMutations||[]).map(function(t){return tK(e.Lt,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map(function(t){return tK(e.Lt,t)}),s=w.fromMillis(t.localWriteTimeMs);return new nI(t.batchId,s,n,a)}function nD(e){var t,n,r=nP(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?nP(e.lastLimboFreeSnapshotVersion):I.min();return void 0!==e.query.documents?(1===(n=e.query).documents.length||y(),t=ex(eT(tF(n.documents[0])))):t=ex(tz(e.query)),new nE(t,e.targetId,0,e.lastListenSequenceNumber,r,i,P.fromBase64String(e.resumeToken))}function nO(e,t){var n,r=nx(t.snapshotVersion),i=nx(t.lastLimboFreeSnapshotVersion);n=es(t.target)?tW(e.Lt,t.target):tH(e.Lt,t.target);var o=t.resumeToken.toBase64();return new t7(t.targetId,eo(t.target),r,o,t.sequenceNumber,i,n)}function nL(e){var t=tz({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?eP(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nM=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return nF(e).get(t).next(function(e){if(e)return{id:e.bundleId,createTime:nP(e.createTime),version:e.version}})},e.prototype.saveBundleMetadata=function(e,t){return nF(e).put({bundleId:t.id,createTime:nx(tP(t.createTime)),version:t.version})},e.prototype.getNamedQuery=function(e,t){return nj(e).get(t).next(function(e){if(e)return{name:e.name,query:nL(e.bundledQuery),readTime:nP(e.readTime)}})},e.prototype.saveNamedQuery=function(e,t){return nj(e).put({name:t.name,readTime:nx(tP(t.readTime)),bundledQuery:t.bundledQuery})},e}();function nF(e){return nw(e,ni.store)}function nj(e){return nw(e,no.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nU=function(){function e(){this.Bt=new nq}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),nl.resolve()},e.prototype.getCollectionParents=function(e,t){return nl.resolve(this.Bt.getEntries(t))},e}(),nq=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new tc(k.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new tc(k.comparator)).toArray()},e}(),nV=function(){function e(){this.qt=new nq}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.qt.add(t)});var o={collectionId:r,parent:tJ(i)};return nB(e).put(o)}return nl.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[t+"\0",""],!1,!0);return nB(e).Nt(r).next(function(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.collectionId!==t)break;n.push(tZ(i.parent))}return n})},e}();function nB(e){return nw(e,nn.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nK={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nW=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(e,t,n){var r=e.store(t4.store),i=e.store(t3.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},function(e,t,n){return s++,n.delete()});o.push(u.next(function(){1===s||y()}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=t3.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return nl.waitFor(o).next(function(){return c})}function nz(e){var t;if(!e)return 0;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw y();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nW.DEFAULT_COLLECTION_PERCENTILE=10,nW.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nW.DEFAULT=new nW(41943040,nW.DEFAULT_COLLECTION_PERCENTILE,nW.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nW.DISABLED=new nW(-1,0,0);var nG=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return e.Kt=function(t,n,r,i){return""!==t.uid||y(),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nY(e).$t({index:t4.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=nX(e),a=nY(e);return a.add({}).next(function(s){"number"==typeof s||y();for(var u,c,l,h,f=new nI(s,t,n,r),d=(u=i.R,c=i.userId,l=f.baseMutations.map(function(e){return tB(u.Lt,e)}),h=f.mutations.map(function(e){return tB(u.Lt,e)}),new t4(c,f.batchId,f.localWriteTime.toMillis(),l,h)),p=[],v=new tc(function(e,t){return _(e.canonicalString(),t.canonicalString())}),g=0;g<r.length;g++){var m=r[g],b=t3.key(i.userId,m.key.path,s);v=v.add(m.key.path.popLast()),p.push(a.put(d)),p.push(o.put(b,t3.PLACEHOLDER))}return v.forEach(function(t){p.push(i.Ut.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.Qt[s]=f.keys()}),nl.waitFor(p).next(function(){return f})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return nY(e).get(t).next(function(e){return e?(e.userId===n.userId||y(),nR(n.R,e)):null})},e.prototype.jt=function(e,t){var n=this;return this.Qt[t]?nl.resolve(this.Qt[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.Qt[t]=r,r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return nY(e).$t({index:t4.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(t.batchId>=r||y(),o=nR(n.R,t)),i.done()}).next(function(){return o})},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return nY(e).$t({index:t4.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nY(e).Nt(t4.userMutationsIndex,n).next(function(e){return e.map(function(e){return nR(t.R,e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=t3.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return nX(e).$t({range:i},function(r,i,a){var s=r[0],u=r[1],c=r[2],l=tZ(u);if(s===n.userId&&t.path.isEqual(l))return nY(e).get(c).next(function(e){if(!e)throw y();e.userId===n.userId||y(),o.push(nR(n.R,e))});a.done()}).next(function(){return o})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new tc(_),i=[];return t.forEach(function(t){var o=t3.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=nX(e).$t({range:a},function(e,i,o){var a=e[0],s=e[1],u=e[2],c=tZ(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()});i.push(s)}),nl.waitFor(i).next(function(){return n.Wt(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=t3.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new tc(_);return nX(e).$t({range:a},function(e,t,o){var a=e[0],u=e[1],c=e[2],l=tZ(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()}).next(function(){return n.Wt(e,s)})},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(nY(e).get(t).next(function(e){if(null===e)throw y();e.userId===n.userId||y(),r.push(nR(n.R,e))}))}),nl.waitFor(i).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return nH(e.Mt,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n.Gt(t.batchId)}),nl.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})},e.prototype.Gt=function(e){delete this.Qt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return nl.resolve();var r=IDBKeyRange.lowerBound(t3.prefixForUser(t.userId)),i=[];return nX(e).$t({range:r},function(e,n,r){if(e[0]===t.userId){var o=tZ(e[1]);i.push(o)}else r.done()}).next(function(){0===i.length||y()})})},e.prototype.containsKey=function(e,t){return nQ(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return n$(e).get(this.userId).next(function(e){return e||new t2(t.userId,-1,"")})},e}();function nQ(e,t,n){var r=t3.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return nX(e).$t({range:o,kt:!0},function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()}).next(function(){return a})}function nY(e){return nw(e,t4.store)}function nX(e){return nw(e,t3.store)}function n$(e){return nw(e,t2.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nJ=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),nZ=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next(function(n){var r=new nJ(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(e){return I.fromTimestamp(new w(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(e){return e.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)})},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next(function(){return n.Xt(e).next(function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)})})},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return n0(e).delete(t.targetId)}).next(function(){return n.Xt(e)}).next(function(t){return t.targetCount>0||y(),t.targetCount-=1,n.Zt(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return n0(e).$t(function(a,s){var u=nD(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))}).next(function(){return nl.waitFor(o)}).next(function(){return i})},e.prototype.forEachTarget=function(e,t){return n0(e).$t(function(e,n){t(nD(n))})},e.prototype.Xt=function(e){return n1(e).get(nt.key).next(function(e){return null!==e||y(),e})},e.prototype.Zt=function(e,t){return n1(e).put(nt.key,t)},e.prototype.te=function(e,t){return n0(e).put(nO(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next(function(e){return e.targetCount})},e.prototype.getTargetData=function(e,t){var n=eo(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return n0(e).$t({range:r,index:t7.queryTargetsIndexName},function(e,n,r){var o=nD(n);ea(t,o.target)&&(i=o,r.done())}).next(function(){return i})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=n2(e);return t.forEach(function(t){var a=tJ(t.path);i.push(o.put(new ne(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))}),nl.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=n2(e);return nl.forEach(t,function(t){var o=tJ(t.path);return nl.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=n2(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=n2(e),i=tv();return r.$t({range:n,kt:!0},function(e,t,n){var r=new V(tZ(e[1]));i=i.add(r)}).next(function(){return i})},e.prototype.containsKey=function(e,t){var n=tJ(t.path),r=IDBKeyRange.bound([n],[n+"\0"],!1,!0),i=0;return n2(e).$t({index:ne.documentTargetsIndex,kt:!0,range:r},function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())}).next(function(){return i>0})},e.prototype.lt=function(e,t){return n0(e).get(t).next(function(e){return e?nD(e):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(e){return nw(e,t7.store)}function n1(e){return nw(e,nt.store)}function n2(e){return nw(e,ne.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(e){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(t){if(e.code!==c.FAILED_PRECONDITION||e.message!==ns)throw e;return d("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=_(n,i);return 0===a?_(r,o):a}var n6=function(){function e(e){this.ne=e,this.buffer=new tc(n3),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();0>n3(t,n)&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),n5=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,a.__awaiter)(t,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return nv(t=n.sent())?(d("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,n4(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}})})})},e}(),n8=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return nl.resolve(u.o);var r=new n6(t);return this.ae.forEachTarget(e,function(e){return r.re(e.sequenceNumber)}).next(function(){return n.ae.le(e,function(e){return r.re(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return -1===this.params.cacheSizeCollectionThreshold?(d("LruGarbageCollector","Garbage collection skipped; disabled"),nl.resolve(nK)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),nK):n.fe(e,t)})},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,o,a,s,u,c,l=this,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>l.params.maximumSequenceNumbersToCollect?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)}).next(function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)}).next(function(t){return o=t,u=Date.now(),l.removeOrphanedDocuments(e,n)}).next(function(e){return c=Date.now(),f()<=i.LogLevel.DEBUG&&d("LruGarbageCollector","LRU Garbage Collection\n	Counted targets in "+(a-h)+"ms\n	Determined least recently used "+r+" in "+(s-a)+"ms\n	Removed "+o+" targets in "+(u-s)+"ms\n	Removed "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),nl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e})})},e}(),n9=function(){function e(e,t){this.db=e,this.garbageCollector=new n8(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.de=function(e){var t=0;return this.le(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,function(e,n){return t(n)})},e.prototype.addReference=function(e,t,n){return n7(e,n)},e.prototype.removeReference=function(e,t,n){return n7(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return n7(e,t)},e.prototype._e=function(e,t){var n;return n=!1,n$(e).Ot(function(r){return nQ(e,r,t).next(function(e){return e&&(n=!0),nl.resolve(!e)})}).next(function(){return n})},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,function(a,s){if(s<=t){var u=n._e(e,a).next(function(t){if(!t)return o++,r.getEntry(e,a).next(function(){return r.removeEntry(a),n2(e).delete([0,tJ(a.path)])})});i.push(u)}}).next(function(){return nl.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return o})},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return n7(e,t)},e.prototype.we=function(e,t){var n,r=n2(e),i=u.o;return r.$t({index:ne.documentTargetsIndex},function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==u.o&&t(new V(tZ(n)),i),i=s,n=a):i=u.o}).next(function(){i!==u.o&&t(new V(tZ(n)),i)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function n7(e,t){var n;return n2(e).put((n=e.currentSequenceNumber,new ne(0,tJ(t.path),n)))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0;r<n.length;r++){var i=n[r],o=i[0],a=i[1];if(this.equalsFn(o,e))return a}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){E(this.inner,function(t,n){for(var r=0;r<n.length;r++){var i=n[r];e(i[0],i[1])}})},e.prototype.isEmpty=function(){return S(this.inner)},e}(),rt=function(){function e(){this.changes=new re(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:I.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:en.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?nl.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),rn=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return ro(e).put(ra(t),n)},e.prototype.removeEntry=function(e,t){var n=ro(e),r=ra(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.me(e,r)})},e.prototype.getEntry=function(e,t){var n=this;return ro(e).get(ra(t)).next(function(e){return n.ye(t,e)})},e.prototype.ge=function(e,t){var n=this;return ro(e).get(ra(t)).next(function(e){return{document:n.ye(t,e),size:nz(e)}})},e.prototype.getEntries=function(e,t){var n=this,r=th;return this.pe(e,t,function(e,t){var i=n.ye(e,t);r=r.insert(e,i)}).next(function(){return r})},e.prototype.Ee=function(e,t){var n=this,r=th,i=new ta(V.comparator);return this.pe(e,t,function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,nz(t))}).next(function(){return{documents:r,Te:i}})},e.prototype.pe=function(e,t,n){if(t.isEmpty())return nl.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return ro(e).$t({range:r},function(e,t,r){for(var a=V.fromSegments(e);o&&0>V.comparator(o,a);)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=th,o=t.path.length+1,a={};if(n.isEqual(I.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=nN(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=t8.collectionReadTimeIndex}return ro(e).$t(a,function(e,n,a){if(e.length===o){var s=nC(r.R,n);t.path.isPrefixOf(s.key.path)?eL(t,s)&&(i=i.insert(s.key,s)):a.done()}}).next(function(){return i})},e.prototype.newChangeBuffer=function(e){return new rr(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return ri(e).get(t9.key).next(function(e){return e||y(),e})},e.prototype.me=function(e,t){return ri(e).put(t9.key,t)},e.prototype.ye=function(e,t){if(t){var n=nC(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(I.min()))return n}return en.newInvalidDocument(e)},e}(),rr=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new re(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),r}return(0,a.__extends)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new tc(function(e,t){return _(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var u=nk(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var c=nz(u);r+=c-s,n.push(t.Ie.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=nk(t.Ie.R,en.newNoDocument(o,I.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,l))}else n.push(t.Ie.removeEntry(e,o))}),i.forEach(function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))}),n.push(this.Ie.updateMetadata(e,r)),nl.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next(function(e){return n.Ae.set(t,e.size),e.document})},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next(function(e){var t=e.documents;return e.Te.forEach(function(e,t){n.Ae.set(e,t)}),t})},t}(rt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(e){return nw(e,t9.store)}function ro(e){return nw(e,t8.store)}function ra(e){return e.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rs=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;n<r&&n>=0&&r<=11||y();var o=new nh("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(t1.store)}(e),e.createObjectStore(t2.store,{keyPath:t2.keyPath}),e.createObjectStore(t4.store,{keyPath:t4.keyPath,autoIncrement:!0}).createIndex(t4.userMutationsIndex,t4.userMutationsKeyPath,{unique:!0}),e.createObjectStore(t3.store),ru(e),function(e){e.createObjectStore(t8.store)}(e));var a=nl.resolve();return n<3&&r>=3&&(0!==n&&(e.deleteObjectStore(ne.store),e.deleteObjectStore(t7.store),e.deleteObjectStore(nt.store),ru(e)),a=a.next(function(){var e,t;return e=o.store(nt.store),t=new nt(0,0,I.min().toTimestamp(),0),e.put(nt.key,t)})),n<4&&r>=4&&(0!==n&&(a=a.next(function(){return o.store(t4.store).Nt().next(function(t){e.deleteObjectStore(t4.store),e.createObjectStore(t4.store,{keyPath:t4.keyPath,autoIncrement:!0}).createIndex(t4.userMutationsIndex,t4.userMutationsKeyPath,{unique:!0});var n=o.store(t4.store),r=t.map(function(e){return n.put(e)});return nl.waitFor(r)})})),a=a.next(function(){!function(e){e.createObjectStore(nr.store,{keyPath:nr.keyPath})}(e)})),n<5&&r>=5&&(a=a.next(function(){return i.Re(o)})),n<6&&r>=6&&(a=a.next(function(){return function(e){e.createObjectStore(t9.store)}(e),i.be(o)})),n<7&&r>=7&&(a=a.next(function(){return i.ve(o)})),n<8&&r>=8&&(a=a.next(function(){return i.Pe(e,o)})),n<9&&r>=9&&(a=a.next(function(){var n;e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges"),(n=t.objectStore(t8.store)).createIndex(t8.readTimeIndex,t8.readTimeIndexPath,{unique:!1}),n.createIndex(t8.collectionReadTimeIndex,t8.collectionReadTimeIndexPath,{unique:!1})})),n<10&&r>=10&&(a=a.next(function(){return i.Ve(o)})),n<11&&r>=11&&(a=a.next(function(){(function(e){e.createObjectStore(ni.store,{keyPath:ni.keyPath})})(e),function(e){e.createObjectStore(no.store,{keyPath:no.keyPath})}(e)})),a},e.prototype.be=function(e){var t=0;return e.store(t8.store).$t(function(e,n){t+=nz(n)}).next(function(){var n=new t9(t);return e.store(t9.store).put(t9.key,n)})},e.prototype.Re=function(e){var t=this,n=e.store(t2.store),r=e.store(t4.store);return n.Nt().next(function(n){return nl.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(t4.userMutationsIndex,i).next(function(r){return nl.forEach(r,function(r){r.userId===n.userId||y();var i=nR(t.R,r);return nH(e,n.userId,i).next(function(){})})})})})},e.prototype.ve=function(e){var t=e.store(ne.store),n=e.store(t8.store);return e.store(nt.store).get(nt.key).next(function(e){var r=[];return n.$t(function(n,i){var o=new k(n),a=[0,tJ(o)];r.push(t.get(a).next(function(n){return n?nl.resolve():t.put(new ne(0,tJ(o),e.highestListenSequenceNumber))}))}).next(function(){return nl.waitFor(r)})})},e.prototype.Pe=function(e,t){e.createObjectStore(nn.store,{keyPath:nn.keyPath});var n=t.store(nn.store),r=new nq,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:tJ(i)})}};return t.store(t8.store).$t({kt:!0},function(e,t){return i(new k(e).popLast())}).next(function(){return t.store(t3.store).$t({kt:!0},function(e,t){e[0];var n=e[1];return i((e[2],tZ(n)).popLast())})})},e.prototype.Ve=function(e){var t=this,n=e.store(t7.store);return n.$t(function(e,r){var i=nD(r),o=nO(t.R,i);return n.put(o)})},e}();function ru(e){e.createObjectStore(ne.store,{keyPath:ne.keyPath}).createIndex(ne.documentTargetsIndex,ne.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(t7.store,{keyPath:t7.keyPath}).createIndex(t7.queryTargetsIndexName,t7.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(nt.store)}var rc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rl=function(){function e(t,n,r,i,o,a,s,u,h,f){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=h,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new l(c.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new n9(this,i),this.Le=n+"main",this.R=new nS(u),this.Be=new nf(this.Le,11,new rs(this.R)),this.qe=new nZ(this.referenceDelegate,this.R),this.Ut=new nV,this.Ue=new rn(this.R,this.Ut),this.Qe=new nM,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===f&&p("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new l(c.FAILED_PRECONDITION,rc);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.qe.getHighestSequenceNumber(t)})}).then(function(t){e.Ne=new u(t,e.De)}).then(function(){e.xe=!0}).catch(function(t){return e.Be&&e.Be.close(),Promise.reject(t)})},e.prototype.He=function(e){var t=this;return this.Me=function(n){return(0,a.__awaiter)(t,void 0,void 0,function(){return(0,a.__generator)(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt(function(n){return(0,a.__awaiter)(t,void 0,void 0,function(){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return(0,a.__awaiter)(t,void 0,void 0,function(){return(0,a.__generator)(this,function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return rf(t).put(new nr(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(t).next(function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(t)}).next(function(n){return e.isPrimary&&!n?e.Xe(t).next(function(){return!1}):!!n&&e.Ze(t).next(function(){return!0})})}).catch(function(t){if(nv(t))return d("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return d("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Se.enqueueRetryable(function(){return e.Me(t)}),e.isPrimary=t})},e.prototype.Je=function(e){var t=this;return rh(e).get(t1.key).next(function(e){return nl.resolve(t.tn(e))})},e.prototype.en=function(e){return rf(e).delete(this.clientId)},e.prototype.nn=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i=this;return(0,a.__generator)(this,function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var t=nw(e,nr.store);return t.Nt().next(function(e){var n=i.rn(e,18e5),r=e.filter(function(e){return -1===n.indexOf(e)});return nl.forEach(r,function(e){return t.delete(e.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(e=o.sent(),this.Ke)for(t=0,n=e;t<n.length;t++)r=n[t],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?nl.resolve(!0):rh(e).get(t1.key).next(function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new l(c.FAILED_PRECONDITION,rc);return!1}}return!(!t.networkEnabled||!t.inForeground)||rf(e).Nt().next(function(e){return void 0===t.rn(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&d("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e=this;return(0,a.__generator)(this,function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[t1.store,nr.store],function(t){var n=new nb(t,u.o);return e.Xe(n).next(function(){return e.en(n)})})];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(e,t){var n=this;return e.filter(function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)})},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return rf(t).Nt().next(function(t){return e.rn(t,18e5).map(function(e){return e.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return nG.Kt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Qe},e.prototype.runTransaction=function(e,t,n){var r,i=this;return d("IndexedDbPersistence","Starting transaction:",e),this.Be.runTransaction(e,"readonly"===t?"readonly":"readwrite",na,function(o){return r=new nb(o,i.Ne?i.Ne.next():u.o),"readwrite-primary"===t?i.Je(r).next(function(e){return!!e||i.Ye(r)}).next(function(t){if(!t)throw p("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new l(c.FAILED_PRECONDITION,ns);return n(r)}).next(function(e){return i.Ze(r).next(function(){return e})}):i.dn(r).next(function(){return n(r)})}).then(function(e){return r.raiseOnCommittedEvent(),e})},e.prototype.dn=function(e){var t=this;return rh(e).get(t1.key).next(function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new l(c.FAILED_PRECONDITION,rc)})},e.prototype.Ze=function(e){var t=new t1(this.clientId,this.allowTabSynchronization,Date.now());return rh(e).put(t1.key,t)},e.yt=function(){return nf.yt()},e.prototype.Xe=function(e){var t=this,n=rh(e);return n.get(t1.key).next(function(e){return t.tn(e)?(d("IndexedDbPersistence","Releasing primary lease."),n.delete(t1.key)):nl.resolve()})},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(p("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){e.Se.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Fe=function(){t.un(),t.Se.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},e.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Ke)||void 0===t?void 0:t.getItem(this.on(e)));return d("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return p("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(e){p("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function rh(e){return nw(e,t1.store)}function rf(e){return nw(e,nr.store)}function rd(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var rp=function(e,t){this.progress=e,this.wn=t},rv=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.yn(e,t,r)})},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next(function(e){for(var t=0;t<n.length;t++)n[t].applyToLocalView(e);return e})},e.prototype.gn=function(e,t){e.forEach(function(e,n){for(var r=0;r<t.length;r++)t[r].applyToLocalView(n)})},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next(function(t){return n.En(e,t).next(function(){return t})})},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){return n.gn(t,e)})},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return V.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.Tn(e,t.path):eN(t)?this.In(e,t,n):this.An(e,t,n)},e.prototype.Tn=function(e,t){return this.mn(e,new V(t)).next(function(e){var t=tf;return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=tf;return this.Ut.getCollectionParents(e,i).next(function(a){return nl.forEach(a,function(a){var s=new eI(a.child(i),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return r.An(e,s,n).next(function(e){e.forEach(function(e,t){o=o.insert(e,t)})})}).next(function(){return o})})},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return i=t,o.Rn(e,i,r).next(function(e){r=e;for(var t=0;t<i.length;t++)for(var n=i[t],o=0,a=n.mutations;o<a.length;o++){var s=a[o],u=s.key,c=r.get(u);null==c&&(c=en.newInvalidDocument(u),r=r.insert(u,c)),e1(s,c,n.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}})}).next(function(){return r.forEach(function(e,n){eL(t,n)||(r=r.remove(e))}),r})},e.prototype.Rn=function(e,t,n){for(var r=tv(),i=0;i<t.length;i++)for(var o=0,a=t[i].mutations;o<a.length;o++){var s=a[o];s instanceof e6&&null===n.get(s.key)&&(r=r.add(s.key))}var u=n;return this.Ue.getEntries(e,r).next(function(e){return e.forEach(function(e,t){t.isFoundDocument()&&(u=u.insert(e,t))}),u})},e}(),rg=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=tv(),i=tv(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),ry=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var o=this;return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())||n.isEqual(I.min())?this.Dn(e,t):this.Sn.pn(e,r).next(function(a){var s=o.Cn(t,a);return(eE(t)||eS(t))&&o.Nn(t.limitType,s,r,n)?o.Dn(e,t):(f()<=i.LogLevel.DEBUG&&d("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),eO(t)),o.Sn.getDocumentsMatchingQuery(e,t,n).next(function(e){return s.forEach(function(t){e=e.insert(t.key,t)}),e}))})},e.prototype.Cn=function(e,t){var n=new tc(eM(e));return t.forEach(function(t,r){eL(e,r)&&(n=n.add(r))}),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return f()<=i.LogLevel.DEBUG&&d("QueryEngine","Using full collection scan to execute query:",eO(t)),this.Sn.getDocumentsMatchingQuery(e,t,I.min())},e}(),rm=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.Fn=new ta(_),this.kn=new re(function(e){return eo(e)},ea),this.$n=I.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new rv(this.On,this._n,this.persistence.getIndexManager()),this.Qe=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.Fn)})},e}();function r_(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return r=(n=e)._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(e){var o;return n._n.getAllMutationBatches(e).next(function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new rv(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)}).next(function(t){for(var n=[],r=[],a=tv(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0;d<t.length;d++){var p=t[d];r.push(p.batchId);for(var v=0,g=p.mutations;v<g.length;v++){var y=g[v];a=a.add(y.key)}}return i.pn(e,a).next(function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function rb(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function rw(e,t,n,r,i){var o=tv();return n.forEach(function(e){return o=o.add(e)}),t.getEntries(e,o).next(function(e){var o=th;return n.forEach(function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(I.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):d("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)}),o})}function rI(e,t){return e.persistence.runTransaction("Allocate target","readwrite",function(n){var r;return e.qe.getTargetData(n,t).next(function(i){return i?(r=i,nl.resolve(r)):e.qe.allocateTargetId(n).next(function(i){return r=new nE(t,i,0,n.currentSequenceNumber),e.qe.addTargetData(n,r).next(function(){return r})})})}).then(function(n){var r=e.Fn.get(n.targetId);return(null===r||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Fn=e.Fn.insert(n.targetId,n),e.kn.set(t,n.targetId)),n})}function rT(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,a.__generator)(this,function(a){switch(a.label){case 0:i=(r=e).Fn.get(t),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(e){return r.persistence.referenceDelegate.removeTarget(e,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!nv(s=a.sent()))throw s;return d("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(t),r.kn.delete(i.target),[2]}})})}function rE(e,t,n){var r=I.min(),i=tv();return e.persistence.runTransaction("Execute query","readonly",function(o){var a,s;return(a=ex(t),void 0!==(s=e.kn.get(a))?nl.resolve(e.Fn.get(s)):e.qe.getTargetData(o,a)).next(function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,e.qe.getMatchingKeysForTargetId(o,t.targetId).next(function(e){i=e})}).next(function(){return e.xn.getDocumentsMatchingQuery(o,t,n?r:I.min(),n?i:tv())}).next(function(e){return{documents:e,Bn:i}})})}function rS(e,t){var n=e.qe,r=e.Fn.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",function(e){return n.lt(e,t).next(function(e){return e?e.target:null})})}function rC(e){return e.persistence.runTransaction("Get new document changes","readonly",function(t){var n,r,i,o,a,s;return n=e.On,r=e.$n,i=th,o=nN(r),a=ro(t),s=IDBKeyRange.lowerBound(o,!0),a.$t({index:t8.readTimeIndex,range:s},function(e,t){var r=nC(n.R,t);i=i.insert(r.key,r),o=t.readTime}).next(function(){return{wn:i,readTime:nA(o)}})}).then(function(t){var n=t.wn,r=t.readTime;return e.$n=r,n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rk=function(){function e(e){this.R=e,this.Kn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return nl.resolve(this.Kn.get(t))},e.prototype.saveBundleMetadata=function(e,t){return this.Kn.set(t.id,{id:t.id,version:t.version,createTime:tP(t.createTime)}),nl.resolve()},e.prototype.getNamedQuery=function(e,t){return nl.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,{name:t.name,query:nL(t.bundledQuery),readTime:tP(t.readTime)}),nl.resolve()},e}(),rN=function(){function e(){this.Wn=new tc(rA.Gn),this.zn=new tc(rA.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new rA(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.Yn(new rA(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.Zn=function(e){var t=this,n=new V(new k([])),r=new rA(n,e),i=new rA(n,e+1),o=[];return this.zn.forEachInRange([r,i],function(e){t.Yn(e),o.push(e.key)}),o},e.prototype.ts=function(){var e=this;this.Wn.forEach(function(t){return e.Yn(t)})},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new V(new k([])),n=new rA(t,e),r=new rA(t,e+1),i=tv();return this.zn.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},e.prototype.containsKey=function(e){var t=new rA(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),rA=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return V.comparator(e.key,t.key)||_(e.ns,t.ns)},e.Hn=function(e,t){return _(e.ns,t.ns)||V.comparator(e.key,t.key)},e}(),rx=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new tc(rA.Gn)}return e.prototype.checkEmpty=function(e){return nl.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new nI(i,t,n,r);this._n.push(o);for(var a=0;a<r.length;a++){var s=r[a];this.rs=this.rs.add(new rA(s.key,i)),this.Ut.addToCollectionParentIndex(e,s.key.path.popLast())}return nl.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return nl.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this.cs(t+1),r=n<0?0:n;return nl.resolve(this._n.length>r?this._n[r]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return nl.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return nl.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new rA(t,0),i=new rA(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(e){var t=n.os(e.ns);o.push(t)}),nl.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new tc(_);return t.forEach(function(e){var t=new rA(e,0),i=new rA(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],function(e){r=r.add(e.ns)})}),nl.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;V.isDocumentKey(i)||(i=i.child(""));var o=new rA(new V(i),0),a=new tc(_);return this.rs.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)},o),nl.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.os(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this;0===this.hs(t.batchId,"removed")||y(),this._n.shift();var r=this.rs;return nl.forEach(t.mutations,function(i){var o=new rA(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.rs=r})},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new rA(t,0),r=this.rs.firstAfterOrEqual(n);return nl.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,nl.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),rP=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new ta(V.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return nl.resolve(n?n.document.clone():en.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=th;return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():en.newInvalidDocument(e))}),nl.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=th,i=new V(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;0>=l.compareTo(n)||eL(t,c)&&(r=r.insert(c.key,c.clone()))}return nl.resolve(r)},e.prototype.fs=function(e,t){return nl.forEach(this.docs,function(e){return t(e)})},e.prototype.newChangeBuffer=function(e){return new rR(this)},e.prototype.getSize=function(e){return nl.resolve(this.size)},e}(),rR=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return(0,a.__extends)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)}),nl.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(rt),rD=function(){function e(e){this.persistence=e,this.ds=new re(function(e){return eo(e)},ea),this.lastRemoteSnapshotVersion=I.min(),this.highestTargetId=0,this.ws=0,this._s=new rN,this.targetCount=0,this.ys=nJ.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach(function(e,n){return t(n)}),nl.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return nl.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return nl.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),nl.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),nl.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new nJ(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,nl.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),nl.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,nl.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach(function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),nl.waitFor(o).next(function(){return i})},e.prototype.getTargetCount=function(e){return nl.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return nl.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),nl.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),nl.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),nl.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return nl.resolve(n)},e.prototype.containsKey=function(e,t){return nl.resolve(this._s.containsKey(t))},e}(),rO=function(){function e(e,t){var n=this;this.gs={},this.Ne=new u(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new rD(this),this.Ut=new nU,this.Ue=new rP(this.Ut,function(e){return n.referenceDelegate.ps(e)}),this.R=new nS(t),this.Qe=new rk(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new rx(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Qe},e.prototype.runTransaction=function(e,t,n){var r=this;d("MemoryPersistence","Starting transaction:",e);var i=new rL(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(e){return r.referenceDelegate.Ts(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})},e.prototype.Is=function(e,t){return nl.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(e,t)}}))},e}(),rL=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return(0,a.__extends)(t,e),t}(nu),rM=function(){function e(e){this.persistence=e,this.As=new rN,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw y()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),nl.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),nl.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),nl.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach(function(e){return n.vs.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.vs.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nl.forEach(this.vs,function(r){var i=V.fromPath(r);return t.Ps(e,i).next(function(e){e||n.removeEntry(i)})}).next(function(){return t.Rs=null,n.apply(e)})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next(function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())})},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return nl.or([function(){return nl.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),rF=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(e,t){return"firestore_clients_"+e+"_"+t}function rU(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function rq(e,t){return"firestore_targets_"+e+"_"+t}rF.UNAUTHENTICATED=new rF(null),rF.GOOGLE_CREDENTIALS=new rF("google-credentials-uid"),rF.FIRST_PARTY=new rF("first-party-uid");var rV=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new l(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(p("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),rB=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new l(i.error.code,i.error.message)),o?new e(t,i.state,r):(p("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),rK=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=tg,a=0;i&&a<r.activeTargetIds.length;++a)i=q(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(p("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),rW=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(p("SharedClientState","Failed to parse online state: "+t),null)},e}(),rH=function(){function e(){this.activeTargetIds=tg}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})},e}(),rz=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ta(_),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=rj(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new rH),this.Ls=RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Qs="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i,o,s,u,c,l,h,f=this;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ns&&(i=this.getItem(rj(this.persistenceKey,r)))&&(o=rK.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,l=this.$s;c<l.length;c++)h=l[c],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",function(){return f.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(rq(this.persistenceKey,e));if(n){var r=rB.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Ks(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Ks()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(rq(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.Hs(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return d("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){d("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){d("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.Fs=function(e){var t=this;if(e.storageArea===this.storage){if(d("SharedClientState","EVENT",e.key,e.newValue),e.key===this.Os)return void p("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,a.__awaiter)(t,void 0,void 0,function(){var t,n,r,i,o,s;return(0,a.__generator)(this,function(a){if(this.started){if(null!==e.key){if(this.Ls.test(e.key)){if(null==e.newValue)return t=this.ti(e.key),[2,this.ei(t,null)];if(n=this.ni(e.key,e.newValue))return[2,this.ei(n.clientId,n)]}else if(this.Bs.test(e.key)){if(null!==e.newValue&&(r=this.si(e.key,e.newValue)))return[2,this.ii(r)]}else if(this.qs.test(e.key)){if(null!==e.newValue&&(i=this.ri(e.key,e.newValue)))return[2,this.oi(i)]}else if(e.key===this.Us){if(null!==e.newValue&&(o=this.js(e.newValue)))return[2,this.Ws(o)]}else if(e.key===this.Ms)(s=function(e){var t=u.o;if(null!=e)try{var n=JSON.parse(e);"number"==typeof n||y(),t=n}catch(e){p("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==u.o&&this.sequenceNumberHandler(s);else if(e.key===this.Qs)return[2,this.syncEngine.ci()]}}else this.$s.push(e);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new rV(this.currentUser,e,t,n),i=rU(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=rU(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=rq(this.persistenceKey,e),i=new rB(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return rK.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return rV.Vs(new rF(i),r,t)},e.prototype.ri=function(e,t){var n=Number(this.qs.exec(e)[1]);return rB.Vs(n,t)},e.prototype.js=function(e){return rW.Vs(e)},e.prototype.ii=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(d("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.ks.insert(e,t):this.ks.remove(e),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach(function(e){i.has(e)||a.push(e)}),i.forEach(function(e){o.has(e)||s.push(e)}),this.syncEngine.hi(a,s).then(function(){n.ks=r})},e.prototype.Ws=function(e){this.ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=tg;return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t},e}(),rG=function(){function e(){this.li=new rH,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new rH,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),rQ=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),rY=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),rX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},r$=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),rJ=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n}return(0,a.__extends)(t,e),t.prototype.ki=function(e,t,n,r){return new Promise(function(i,a){var s=new o.JJ;s.listenOnce(o.tw.COMPLETE,function(){try{switch(s.getLastErrorCode()){case o.jK.NO_ERROR:var t=s.getResponseJson();d("Connection","XHR received:",JSON.stringify(t)),i(t);break;case o.jK.TIMEOUT:d("Connection",'RPC "'+e+'" timed out'),a(new l(c.DEADLINE_EXCEEDED,"Request time out"));break;case o.jK.HTTP_ERROR:var n=s.getStatus();if(d("Connection",'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u,h=(u=r.status.toLowerCase().replace(/_/g,"-"),Object.values(c).indexOf(u)>=0?u:c.UNKNOWN);a(new l(h,r.message))}else a(new l(c.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new l(c.UNAVAILABLE,"Connection failed."));break;default:y()}}finally{d("Connection",'RPC "'+e+'" completed.')}});var u=JSON.stringify(r);s.send(t,"POST",u,n,15)})},t.prototype.Oi=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=(0,o.UE)(),a=(0,o.FJ)(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(s.initMessageHeaders,t),(0,r.isMobileCordova)()||(0,r.isReactNative)()||(0,r.isElectron)()||(0,r.isIE)()||(0,r.isUWP)()||(0,r.isBrowserExtension)()||(s.httpHeadersOverwriteParam="$httpHeaders");var u=n.join("");d("Connection","Creating WebChannel: "+u,s);var h=i.createWebChannel(u,s),f=!1,p=!1,g=new r$({Ei:function(e){p?d("Connection","Not sending because WebChannel is closed:",e):(f||(d("Connection","Opening WebChannel transport."),h.open(),f=!0),d("Connection","WebChannel sending:",e),h.send(e))},Ti:function(){return h.close()}}),m=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(e){setTimeout(function(){throw e},0)}})};return m(h,o.ii.EventType.OPEN,function(){p||d("Connection","WebChannel transport opened.")}),m(h,o.ii.EventType.CLOSE,function(){p||(p=!0,d("Connection","WebChannel transport closed"),g.Vi())}),m(h,o.ii.EventType.ERROR,function(e){p||(p=!0,v("Connection","WebChannel transport errored:",e),g.Vi(new l(c.UNAVAILABLE,"The operation could not be completed")))}),m(h,o.ii.EventType.MESSAGE,function(e){var t;if(!p){var n=e.data[0];n||y();var r=n.error||(null===(t=n[0])||void 0===t?void 0:t.error);if(r){d("Connection","WebChannel received error:",r);var i=r.status,o=function(e){var t=e7[e];if(void 0!==t)return to(t)}(i),a=r.message;void 0===o&&(o=c.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),p=!0,g.Vi(new l(o,a)),h.close()}else d("Connection","WebChannel received:",n),g.Si(n)}}),m(a,o.ju.STAT_EVENT,function(e){e.stat===o.kN.PROXY?d("Connection","Detected buffering proxy"):e.stat===o.kN.NOPROXY&&d("Connection","Detected no buffering proxy")}),setTimeout(function(){g.Pi()},0),g},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);d("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(e,i,o,n).then(function(e){return d("RestConnection","Received: ",e),e},function(t){throw v("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.Fi=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.6.3",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=rX[e];return this.Di+"/v1/"+t+":"+n},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rZ(){return"undefined"!=typeof window?window:null}function r0(){return"undefined"!=typeof document?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(e){return new tN(e,!0)}var r2=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Ki=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return t.Qi=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),r4=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new r2(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===c.RESOURCE_EXHAUSTED?(p(t.toString()),p("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):t&&t.code===c.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(t){e.Yi===n&&e.lr(t)},function(n){t(function(){var t=new l(c.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)})})},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){n(function(){return t.state=2,t.listener.Ii()})}),this.stream.Ri(function(e){n(function(){return t.dr(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return(0,a.__awaiter)(e,void 0,void 0,function(){return(0,a.__generator)(this,function(e){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(e){return d("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget(function(){return t.Yi===e?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),r3=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,a.__extends)(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r,i,o,a="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:y(),s=t.targetChange.targetIds||[],u=(i=t.targetChange.resumeToken,e.I?(void 0===i||"string"==typeof i||y(),P.fromBase64String(i||"")):(void 0===i||i instanceof Uint8Array||y(),P.fromUint8Array(i||new Uint8Array))),h=(f=t.targetChange.cause)&&new l(void 0===(o=f).code?c.UNKNOWN:to(o.code),o.message||"");n=new tw(a,s,u,h||null)}else if("documentChange"in t){t.documentChange,(a=t.documentChange).document,a.document.name,a.document.updateTime,s=tL(e,a.document.name),u=tP(a.document.updateTime);var f=new et({mapValue:{fields:a.document.fields}});n=new t_((h=en.newFoundDocument(s,u,f),a.targetIds||[]),a.removedTargetIds||[],h.key,h)}else if("documentDelete"in t)t.documentDelete,(a=t.documentDelete).document,s=tL(e,a.document),u=a.readTime?tP(a.readTime):I.min(),f=en.newNoDocument(s,u),n=new t_([],h=a.removedTargetIds||[],f.key,f);else if("documentRemove"in t)t.documentRemove,(a=t.documentRemove).document,s=tL(e,a.document),n=new t_([],u=a.removedTargetIds||[],s,null);else{if(!("filter"in t))return y();t.filter;var d=t.filter;d.targetId,s=new tr(a=d.count||0),n=new tb(u=d.targetId,s)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return I.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?I.min():t.readTime?tP(t.readTime):I.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t,n,r,i,o={};o.database=tj(this.R),o.addTarget=(t=this.R,(n=es(r=e.target)?{documents:tW(t,r)}:{query:tH(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=tx(t,e.resumeToken):e.snapshotVersion.compareTo(I.min())>0&&(n.readTime=tA(t,e.snapshotVersion.toTimestamp())),n);var a=(this.R,null==(i=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return y()}}(0,e.purpose))?null:{"goog-listen-tags":i});a&&(o.labels=a),this.cr(o)},t.prototype.yr=function(e){var t={};t.database=tj(this.R),t.removeTarget=e,this.cr(t)},t}(r4),r6=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,a.__extends)(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(e.streamToken||y(),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t,n,r=(t=e.writeResults,n=e.commitTime,t&&t.length>0?(void 0!==n||y(),t.map(function(e){var t;return(t=e.updateTime?tP(e.updateTime):tP(n)).isEqual(I.min())&&(t=tP(n)),new e$(t,e.transformResults||[])})):[]),i=tP(e.commitTime);return this.listener.Tr(i,r)}return e.writeResults&&0!==e.writeResults.length&&y(),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=tj(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return tB(t.R,e)})};this.cr(n)},t}(r4),r5=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,a.__extends)(t,e),t.prototype.br=function(){if(this.Rr)throw new l(c.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===c.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new l(c.UNKNOWN,e.toString())})},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===c.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new l(c.UNKNOWN,e.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),r8=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.Fr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(p(t),this.Vr=!1):d("OnlineStateTracker",t)},e.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),r9=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(e){n.enqueueAndForget(function(){return(0,a.__awaiter)(o,void 0,void 0,function(){return(0,a.__generator)(this,function(e){switch(e.label){case 0:return iu(this)?(d("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return(t=e).Or.add(4),[4,ie(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,r7(t)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.Br=new r8(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r7(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,a.__generator)(this,function(r){switch(r.label){case 0:if(!iu(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function ie(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,a.__generator)(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function it(e,t){e.$r.has(t.targetId)||(e.$r.set(t.targetId,t),is(e)?ia(e):iT(e).er()&&ii(e,t))}function ir(e,t){var n=iT(e);e.$r.delete(t),n.er()&&io(e,t),0===e.$r.size&&(n.er()?n.ir():iu(e)&&e.Br.set("Unknown"))}function ii(e,t){e.qr.U(t.targetId),iT(e).mr(t)}function io(e,t){e.qr.U(t),iT(e).yr(t)}function ia(e){e.qr=new tT({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),iT(e).start(),e.Br.Sr()}function is(e){return iu(e)&&!iT(e).tr()&&e.$r.size>0}function iu(e){return 0===e.Or.size}function ic(e){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(t){return e.$r.forEach(function(t,n){ii(e,t)}),[2]})})}function il(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(n){return e.qr=void 0,is(e)?(e.Br.Nr(t),ia(e)):e.Br.set("Unknown"),[2]})})}function ih(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,a.__generator)(this,function(s){switch(s.label){case 0:if(e.Br.set("Online"),!(t instanceof tw&&2===t.state&&t.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,a.__generator)(this,function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.$r.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.$r.delete(o),e.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(e,t)];case 2:case 4:return s.sent(),[3,5];case 3:return r=s.sent(),d("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,id(e,r)];case 5:return[3,13];case 6:if(t instanceof t_?e.qr.X(t):t instanceof tb?e.qr.rt(t):e.qr.et(t),n.isEqual(I.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,rb(e.localStore)];case 8:var u;return i=s.sent(),n.compareTo(i)>=0?[4,((u=e.qr.ut(n)).targetChanges.forEach(function(t,r){if(t.resumeToken.approximateByteSize()>0){var i=e.$r.get(r);i&&e.$r.set(r,i.withResumeToken(t.resumeToken,n))}}),u.targetMismatches.forEach(function(t){var n=e.$r.get(t);n&&(e.$r.set(t,n.withResumeToken(P.EMPTY_BYTE_STRING,n.snapshotVersion)),io(e,t),ii(e,new nE(n.target,t,1,n.sequenceNumber)))}),e.remoteSyncer.applyRemoteEvent(u))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return d("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,id(e,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function id(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r=this;return(0,a.__generator)(this,function(i){switch(i.label){case 0:if(!nv(t))throw t;return e.Or.add(1),[4,ie(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return rb(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return(0,a.__awaiter)(r,void 0,void 0,function(){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return d("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,r7(e)];case 2:return t.sent(),[2]}})})}),[2]}})})}function ip(e,t){return t().catch(function(n){return id(e,n,t)})}function iv(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o;return(0,a.__generator)(this,function(a){var s,u,c;switch(a.label){case 0:n=iE(t=e),r=t.kr.length>0?t.kr[t.kr.length-1].batchId:-1,a.label=1;case 1:if(!(iu(s=t)&&s.kr.length<10))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,(u=t.localStore,c=r,u.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===c&&(c=-1),u._n.getNextMutationBatchAfterBatchId(e,c)}))];case 3:return null===(i=a.sent())?(0===t.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.kr.push(t);var n=iE(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,id(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return ig(t)&&iy(t),[2]}})})}function ig(e){return iu(e)&&!iE(e).tr()&&e.kr.length>0}function iy(e){iE(e).start()}function im(e){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(t){return iE(e).Ar(),[2]})})}function i_(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return(0,a.__generator)(this,function(o){for(t=iE(e),n=0,r=e.kr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]})})}function ib(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,a.__generator)(this,function(o){switch(o.label){case 0:return r=e.kr.shift(),i=nT.from(r,t,n),[4,ip(e,function(){return e.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,iv(e)];case 2:return o.sent(),[2]}})})}function iw(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(n){switch(n.label){case 0:return t&&iE(e).pr?[4,function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,a.__generator)(this,function(i){switch(i.label){case 0:return ti(r=t.code)&&r!==c.ABORTED?(n=e.kr.shift(),iE(e).sr(),[4,ip(e,function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)})]):[3,3];case 1:return i.sent(),[4,iv(e)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ig(e)&&iy(e),[2]}})})}function iI(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return n=e,t?(n.Or.delete(2),[4,r7(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,ie(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function iT(e){var t,n,r,i=this;return e.Ur||(e.Ur=(t=e.datastore,n=e.asyncQueue,r={Ii:ic.bind(null,e),Ri:il.bind(null,e),_r:ih.bind(null,e)},t.br(),new r3(n,t.Hi,t.credentials,t.R,r)),e.Mr.push(function(t){return(0,a.__awaiter)(i,void 0,void 0,function(){return(0,a.__generator)(this,function(n){switch(n.label){case 0:return t?(e.Ur.sr(),is(e)?ia(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:n.sent(),e.qr=void 0,n.label=3;case 3:return[2]}})})})),e.Ur}function iE(e){var t,n,r,i=this;return e.Qr||(e.Qr=(t=e.datastore,n=e.asyncQueue,r={Ii:im.bind(null,e),Ri:iw.bind(null,e),Ir:i_.bind(null,e),Tr:ib.bind(null,e)},t.br(),new r6(n,t.Hi,t.credentials,t.R,r)),e.Mr.push(function(t){return(0,a.__awaiter)(i,void 0,void 0,function(){return(0,a.__generator)(this,function(n){switch(n.label){case 0:return t?(e.Qr.sr(),[4,iv(e)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.Qr.stop()];case 3:n.sent(),e.kr.length>0&&(d("RemoteStore","Stopping write stream with "+e.kr.length+" pending writes"),e.kr=[]),n.label=4;case 4:return[2]}})})})),e.Qr}var iS=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new nc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new l(c.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function iC(e,t){if(p("AsyncQueue",t+": "+e),nv(e))return new l(c.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ik=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||V.comparator(t.key,n.key)}:function(e,t){return V.comparator(e.key,t.key)},this.keyedMap=tf,this.sortedSet=new ta(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),iN=function(){function e(){this.Kr=new ta(V.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Kr.get(t);n?0!==e.type&&3===n.type?this.Kr=this.Kr.insert(t,e):3===e.type&&1!==n.type?this.Kr=this.Kr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Kr=this.Kr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Kr=this.Kr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Kr=this.Kr.remove(t):1===e.type&&2===n.type?this.Kr=this.Kr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Kr=this.Kr.insert(t,{type:2,doc:e.doc}):y():this.Kr=this.Kr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Kr.inorderTraversal(function(t,n){e.push(n)}),e},e}(),iA=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(e){o.push({type:0,doc:e})}),new e(t,n,ik.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eR(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),ix=function(){this.Wr=void 0,this.listeners=[]},iP=function(){this.queries=new re(function(e){return eD(e)},eR),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,u;return(0,a.__generator)(this,function(a){switch(a.label){case 0:if(n=e,r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new ix),!i)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=a.sent(),[3,4];case 3:return u=iC(a.sent(),"Initialization of query '"+eO(t.query)+"' failed"),[2,void t.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&iM(n),[2]}})})}function iD(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,a.__generator)(this,function(a){return n=e,r=t.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(t))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function iO(e,t){for(var n=!1,r=0;r<t.length;r++){var i=t[r],o=i.query,a=e.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].Hr(i)&&(n=!0);a.Wr=i}}n&&iM(e)}function iL(e,t,n){var r=e.queries.get(t);if(r)for(var i=0,o=r.listeners;i<o.length;i++)o[i].onError(n);e.queries.delete(t)}function iM(e){e.Gr.forEach(function(e){e.next()})}var iF=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new iA(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){return!e.fromCache||!(this.options.so&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=iA.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),ij=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),iU=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return tL(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?tV(this.R,e.document,!1):en.newNoDocument(this.qn(e.metadata.name),this.Qn(e.metadata.readTime))},e.prototype.Qn=function(e){return tP(e)},e}(),iq=function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=iV(e)}return e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new iU(this.R),r=0;r<e.length;r++){var i=e[r];if(i.metadata.queries)for(var o=n.qn(i.metadata.name),a=0,s=i.metadata.queries;a<s.length;a++){var u=s[a],c=(t.get(u)||tv()).add(o);t.set(u,c)}}return t},e.prototype.complete=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i;return(0,a.__generator)(this,function(o){switch(o.label){case 0:return[4,function(e,t,n,r){return(0,a.__awaiter)(this,void 0,void 0,function(){var i,o,s,u,c,l,h,f,d,p;return(0,a.__generator)(this,function(a){switch(a.label){case 0:for(i=e,o=tv(),s=th,u=td,c=0,l=n;c<l.length;c++)h=l[c],f=t.qn(h.metadata.name),h.document&&(o=o.add(f)),s=s.insert(f,t.Un(h)),u=u.insert(f,t.Qn(h.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,rI(i,ex(eT(k.fromString("__bundle__/docs/"+r))))];case 1:return p=a.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return rw(e,d,s,I.min(),u).next(function(t){return d.apply(e),t}).next(function(t){return i.qe.removeMatchingKeysForTargetId(e,p.targetId).next(function(){return i.qe.addMatchingKeys(e,o,p.targetId)}).next(function(){return i.Mn.En(e,t)}).next(function(){return t})})})]}})})}(this.localStore,new iU(this.R),this.documents,this.ro.id)];case 1:e=o.sent(),t=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,function(e,t,n){return void 0===n&&(n=tv()),(0,a.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,a.__generator)(this,function(o){switch(o.label){case 0:return[4,rI(e,ex(nL(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=e).persistence.runTransaction("Save named query","readwrite",function(e){var o=tP(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(e,t);var a=r.withResumeToken(P.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(e,a).next(function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)}).next(function(){return i.qe.addMatchingKeys(e,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(e,t)})})]}})})}(this.localStore,i,t.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new rp(Object.assign({},this.progress),e))]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iB=function(e){this.key=e},iK=function(e){this.key=e},iW=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=tv(),this.mutatedKeys=tv(),this.lo=eM(e),this.fo=new ik(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new iN,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=eE(this.query)&&i.size===this.query.limit?i.last():null,c=eS(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),h=eL(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&0>n.lo(h,c))&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))}),eE(this.query)||eS(this.query))for(;a.size>this.query.limit;){var l=eE(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort(function(e,t){var n,i,o;return n=e.type,i=t.type,(o=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}})(n)-o(i)||r.lo(e.doc,t.doc)}),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new iA(this.query,e.fo,i,o,e.mutatedKeys,0===s,u,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new iN,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t.uo=t.uo.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t.uo=t.uo.delete(e)}),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=tv(),this.fo.forEach(function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))});var n=[];return t.forEach(function(t){e.ho.has(t)||n.push(new iK(t))}),this.ho.forEach(function(e){t.has(e)||n.push(new iB(e))}),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=tv();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return iA.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),iH=function(e,t,n){this.query=e,this.targetId=t,this.view=n},iz=function(e){this.key=e,this.bo=!1},iG=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new re(function(e){return eD(e)},eR),this.Vo=new Map,this.So=new Set,this.Do=new ta(V.comparator),this.Co=new Map,this.No=new rN,this.xo={},this.Fo=new Map,this.ko=nJ.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function iQ(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,u;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return(o=(n=ol(e)).Po.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,rI(n.localStore,ex(t))];case 2:return s=a.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,iY(n,t,r,"current"===u)];case 3:i=a.sent(),n.isPrimaryClient&&it(n.remoteStore,s),a.label=4;case 4:return[2,i]}})})}function iY(e,t,n,r){return(0,a.__awaiter)(this,void 0,void 0,function(){var i,o,s,u,c,l;return(0,a.__generator)(this,function(h){switch(h.label){case 0:return e.Oo=function(t,n,r){return function(e,t,n,r){return(0,a.__awaiter)(this,void 0,void 0,function(){var i,o,s;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return(i=t.view._o(n)).Nn?[4,rE(e.localStore,t.query,!1).then(function(e){var n=e.documents;return t.view._o(n,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(i9(e,t.targetId,s.To),s.snapshot)]}})})}(e,t,n,r)},[4,rE(e.localStore,t,!0)];case 1:return s=(o=new iW(t,(i=h.sent()).Bn))._o(i.documents),u=tm.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),c=o.applyChanges(s,e.isPrimaryClient,u),i9(e,n,c.To),l=new iH(t,n,o),[2,(e.Po.set(t,l),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),c.snapshot)]}})})}function iX(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,a.__generator)(this,function(o){switch(o.label){case 0:return r=(n=e).Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(e){return!eR(e,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,rT(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),ir(n.remoteStore,r.targetId),i5(n,r.targetId)}).catch(n4)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return i5(n,r.targetId),[4,rT(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function i$(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,a.__generator)(this,function(a){var s,u,c,l,h,f,d;switch(a.label){case 0:r=oh(e),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(s=r.localStore,c=w.now(),l=t.reduce(function(e,t){return e.add(t.key)},tv()),s.persistence.runTransaction("Locally write mutations","readwrite",function(e){return s.Mn.pn(e,l).next(function(n){u=n;for(var r=[],i=0;i<t.length;i++){var o=t[i],a=function(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=eV(o.transform,a||null);null!=s&&(null==n&&(n=et.empty()),n.set(o.field,s))}return n||null}(o,u.get(o.key));null!=a&&r.push(new e6(o.key,a,function e(t){var n=[];return E(t.fields,function(t,r){var i=new A([t]);if(Z(r)){var o=e(r.mapValue).fields;if(0===o.length)n.push(i);else for(var a=0;a<o.length;a++){var s=o[a];n.push(i.child(s))}}else n.push(i)}),new x(n)}(a.value.mapValue),eJ.exists(!0)))}return s._n.addMutationBatch(e,c,r,t)})}).then(function(e){return e.applyToLocalDocumentSet(u),{batchId:e.batchId,changes:u}}))];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),h=r,f=i.batchId,(d=h.xo[h.currentUser.toKey()])||(d=new ta(_)),d=d.insert(f,n),h.xo[h.currentUser.toKey()]=d,[4,oe(r,i.changes)];case 3:return a.sent(),[4,iv(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=iC(a.sent(),"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function iJ(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,a.__generator)(this,function(i){var o,a,s;switch(i.label){case 0:n=e,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,(o=n.localStore,a=t.snapshotVersion,s=o.Fn,o.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var n=o.On.newChangeBuffer({trackRemovals:!0});s=o.Fn;var r=[];t.targetChanges.forEach(function(t,n){var i=s.get(n);if(i){r.push(o.qe.removeMatchingKeys(e,t.removedDocuments,n).next(function(){return o.qe.addMatchingKeys(e,t.addedDocuments,n)}));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=i.withResumeToken(u,a).withSequenceNumber(e.currentSequenceNumber);s=s.insert(n,c),c.resumeToken.approximateByteSize()>0||y(),(0===i.resumeToken.approximateByteSize()||c.snapshotVersion.toMicroseconds()-i.snapshotVersion.toMicroseconds()>=3e8||t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size>0)&&r.push(o.qe.updateTargetData(e,c))}}});var i=th;if(t.documentUpdates.forEach(function(n,i){t.resolvedLimboDocuments.has(n)&&r.push(o.persistence.referenceDelegate.updateLimboDocument(e,n))}),r.push(rw(e,n,t.documentUpdates,a,void 0).next(function(e){i=e})),!a.isEqual(I.min())){var u=o.qe.getLastRemoteSnapshotVersion(e).next(function(t){return o.qe.setTargetsMetadata(e,e.currentSequenceNumber,a)});r.push(u)}return nl.waitFor(r).next(function(){return n.apply(e)}).next(function(){return o.Mn.En(e,i)}).next(function(){return i})}).then(function(e){return o.Fn=s,e}))];case 2:return r=i.sent(),t.targetChanges.forEach(function(e,t){var r=n.Co.get(t);r&&(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1||y(),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?r.bo||y():e.removedDocuments.size>0&&(r.bo||y(),r.bo=!1))}),[4,oe(n,r,t)];case 3:case 5:return i.sent(),[3,6];case 4:return[4,n4(i.sent())];case 6:return[2]}})})}function iZ(e,t,n){if(e.isPrimaryClient&&0===n||!e.isPrimaryClient&&1===n){var r,i,o=[];e.Po.forEach(function(e,n){var r=n.view.zr(t);r.snapshot&&o.push(r.snapshot)}),(r=e.eventManager).onlineState=t,i=!1,r.queries.forEach(function(e,n){for(var r=0,o=n.listeners;r<o.length;r++)o[r].zr(t)&&(i=!0)}),i&&iM(r),o.length&&e.vo._r(o),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}function i0(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,u,c;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return(r=e).sharedClientState.updateQueryState(t,"rejected",n),(o=(i=r.Co.get(t))&&i.key)?(s=(s=new ta(V.comparator)).insert(o,en.newNoDocument(o,I.min())),u=tv().add(o),c=new ty(I.min(),new Map,new tc(_),s,u),[4,iJ(r,c)]):[3,2];case 1:return a.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),i7(r),[3,4];case 2:return[4,rT(r.localStore,t,!1).then(function(){return i5(r,t,n)}).catch(n4)];case 3:a.sent(),a.label=4;case 4:return[2]}})})}function i1(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,a.__generator)(this,function(o){var a;switch(o.label){case 0:n=e,r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=n.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var n,r,i,o=t.batch.keys(),s=a.On.newChangeBuffer({trackRemovals:!0});return(r=(n=t.batch).keys(),i=nl.resolve(),r.forEach(function(r){i=i.next(function(){return s.getEntry(e,r)}).next(function(e){var i=t.docVersions.get(r);null!==i||y(),0>e.version.compareTo(i)&&(n.applyToRemoteDocument(e,t),e.isValidDocument()&&s.addEntry(e,t.commitVersion))})}),i.next(function(){return a._n.removeMutationBatch(e,n)})).next(function(){return s.apply(e)}).next(function(){return a._n.performConsistencyCheck(e)}).next(function(){return a.Mn.pn(e,o)})})];case 2:return i=o.sent(),i6(n,r,null),i3(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,oe(n,i)];case 3:case 5:return o.sent(),[3,6];case 4:return[4,n4(o.sent())];case 6:return[2]}})})}function i2(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,a.__generator)(this,function(o){var a;switch(o.label){case 0:r=e,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return a._n.lookupMutationBatch(e,t).next(function(t){return null!==t||y(),n=t.keys(),a._n.removeMutationBatch(e,t)}).next(function(){return a._n.performConsistencyCheck(e)}).next(function(){return a.Mn.pn(e,n)})})];case 2:return i=o.sent(),i6(r,t,n),i3(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,oe(r,i)];case 3:case 5:return o.sent(),[3,6];case 4:return[4,n4(o.sent())];case 6:return[2]}})})}function i4(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,a.__generator)(this,function(a){var s;switch(a.label){case 0:iu((n=e).remoteStore)||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(s=n.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return s._n.getHighestUnacknowledgedBatchId(e)})];case 2:return -1===(r=a.sent())?[2,void t.resolve()]:((i=n.Fo.get(r)||[]).push(t),n.Fo.set(r,i),[3,4]);case 3:return o=iC(a.sent(),"Initialization of waitForPendingWrites() operation failed"),t.reject(o),[3,4];case 4:return[2]}})})}function i3(e,t){(e.Fo.get(t)||[]).forEach(function(e){e.resolve()}),e.Fo.delete(t)}function i6(e,t,n){var r=e.xo[e.currentUser.toKey()];if(r){var i=r.get(t);i&&(n?i.reject(n):i.resolve(),r=r.remove(t)),e.xo[e.currentUser.toKey()]=r}}function i5(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(t){e.No.containsKey(t)||i8(e,t)})}function i8(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(ir(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),i7(e))}function i9(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];i instanceof iB?(e.No.addReference(i.key,t),function(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(d("SyncEngine","New document in limbo: "+n),e.So.add(r),i7(e))}(e,i)):i instanceof iK?(d("SyncEngine","Document no longer in limbo: "+i.key),e.No.removeReference(i.key,t),e.No.containsKey(i.key)||i8(e,i.key)):y()}}function i7(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new V(k.fromString(t)),r=e.ko.next();e.Co.set(r,new iz(n)),e.Do=e.Do.insert(n,r),it(e.remoteStore,new nE(ex(eT(n.path)),r,2,u.o))}}function oe(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,a.__generator)(this,function(u){switch(u.label){case 0:return i=[],o=[],s=[],(r=e).Po.isEmpty()?[3,3]:(r.Po.forEach(function(e,a){s.push(r.Oo(a,t,n).then(function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=rg.Pn(a.targetId,e);o.push(t)}}))}),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(i),[4,function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,u,c,l,h;return(0,a.__generator)(this,function(a){switch(a.label){case 0:n=e,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return nl.forEach(t,function(t){return nl.forEach(t.bn,function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)}).next(function(){return nl.forEach(t.vn,function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)})})})})];case 2:return a.sent(),[3,4];case 3:if(!nv(r=a.sent()))throw r;return d("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)u=(s=o[i]).targetId,s.fromCache||(l=(c=n.Fn.get(u)).snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.Fn=n.Fn.insert(u,h));return[2]}})})}(r.localStore,o)];case 2:u.sent(),u.label=3;case 3:return[2]}})})}function ot(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,a.__generator)(this,function(i){var o;switch(i.label){case 0:return(n=e).currentUser.isEqual(t)?[3,3]:(d("SyncEngine","User change. New user:",t.toKey()),[4,r_(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,(o=n).Fo.forEach(function(e){e.forEach(function(e){e.reject(new l(c.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Fo.clear(),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,oe(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function on(e,t){var n=e.Co.get(t);if(n&&n.bo)return tv().add(n.key);var r=tv(),i=e.Vo.get(t);if(!i)return r;for(var o=0;o<i.length;o++){var a=i[o],s=e.Po.get(a);r=r.unionWith(s.view.wo)}return r}function or(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){return[2,rC((t=e).localStore).then(function(e){return oe(t,e)})]})})}function oi(e,t,n,r){return(0,a.__awaiter)(this,void 0,void 0,function(){var i,o;return(0,a.__generator)(this,function(a){switch(a.label){case 0:var s,u;return[4,(u=(s=(i=e).localStore)._n,s.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return u.jt(e,t).next(function(t){return t?s.Mn.pn(e,t):nl.resolve(null)})}))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,iv(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(i6(i,t,r||null),i3(i,t),function(e,t){e._n.Gt(t)}(i.localStore,t)):y(),a.label=4;case 4:return[4,oe(i,o)];case 5:return a.sent(),[3,7];case 6:d("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}})})}function oo(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,u,c,l,h,f,d,p,v,g;return(0,a.__generator)(this,function(y){switch(y.label){case 0:n=e,r=[],i=[],o=0,s=t,y.label=1;case 1:return o<s.length?(u=s[o],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,rI(n.localStore,ex(l[0]))]:[3,7]):[3,13];case 2:c=y.sent(),h=0,f=l,y.label=3;case 3:return h<f.length?(d=f[h],p=n.Po.get(d),[4,function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,a.__generator)(this,function(o){switch(o.label){case 0:return[4,rE((n=e).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&i9(n,t.targetId,i.To),i)]}})})}(n,p)]):[3,6];case 4:(v=y.sent()).snapshot&&i.push(v.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,rS(n.localStore,u)];case 8:return g=y.sent(),[4,rI(n.localStore,g)];case 9:return c=y.sent(),[4,iY(n,oa(g),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(c),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function oa(e){var t,n,r,i;return t=e.path,n=e.collectionGroup,r=e.orderBy,i=e.filters,new eI(t,n,r,i,e.limit,"F",e.startAt,e.endAt)}function os(e){return e.localStore.persistence.fn()}function ou(e,t,n,r){return(0,a.__awaiter)(this,void 0,void 0,function(){var i,o,s;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return(i=e).$o?(d("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,rC(i.localStore)];case 3:return o=a.sent(),s=ty.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,oe(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,rT(i.localStore,t,!0)];case 6:return a.sent(),i5(i,t,r),[3,8];case 7:y(),a.label=8;case 8:return[2]}})})}function oc(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,u,c,l,h,f,p;return(0,a.__generator)(this,function(v){switch(v.label){case 0:if(!(r=ol(e)).$o)return[3,10];i=0,o=t,v.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(d("SyncEngine","Adding an already active target "+s),[3,5]):[4,rS(r.localStore,s)]):[3,6];case 2:return u=v.sent(),[4,rI(r.localStore,u)];case 3:return c=v.sent(),[4,iY(r,oa(u),c.targetId,!1)];case 4:v.sent(),it(r.remoteStore,c),v.label=5;case 5:return i++,[3,1];case 6:l=function(e){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,rT(r.localStore,e,!1).then(function(){ir(r.remoteStore,e),i5(r,e)}).catch(n4)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},h=0,f=n,v.label=7;case 7:return h<f.length?(p=f[h],[5,l(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return h++,[3,7];case 10:return[2]}})})}function ol(e){return e.remoteStore.remoteSyncer.applyRemoteEvent=iJ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=on.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i0.bind(null,e),e.vo._r=iO.bind(null,e.eventManager),e.vo.Mo=iL.bind(null,e.eventManager),e}function oh(e){return e.remoteStore.remoteSyncer.applySuccessfulWrite=i1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i2.bind(null,e),e}function of(e,t,n){(function(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,u,c;return(0,a.__generator)(this,function(a){var l,h,f,d,p,g;switch(a.label){case 0:return a.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return r=a.sent(),[4,(l=e.localStore,f=tP((h=r).createTime),l.persistence.runTransaction("hasNewerBundle","readonly",function(e){return l.Qe.getBundleMetadata(e,h.id)}).then(function(e){return!!e&&e.createTime.compareTo(f)>=0}))];case 2:return a.sent()?[4,t.close()]:[3,4];case 3:return[2,(a.sent(),void n._completeWith({taskState:"Success",documentsLoaded:(d=r).totalDocuments,bytesLoaded:d.totalBytes,totalDocuments:d.totalDocuments,totalBytes:d.totalBytes}))];case 4:return n._updateProgress(iV(r)),i=new iq(r,e.localStore,t.R),[4,t.Lo()];case 5:o=a.sent(),a.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=a.sent())&&n._updateProgress(s),[4,t.Lo()];case 8:o=a.sent(),a.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return[4,oe(e,(u=a.sent()).wn,void 0)];case 12:return a.sent(),[4,(p=e.localStore,g=r,p.persistence.runTransaction("Save bundle","readwrite",function(e){return p.Qe.saveBundleMetadata(e,g)}))];case 13:return a.sent(),n._completeWith(u.progress),[3,15];case 14:return v("SyncEngine","Loading bundle failed with "+(c=a.sent())),n._failWith(c),[3,15];case 15:return[2]}})})})(e,t,n).then(function(){e.sharedClientState.notifyBundleLoaded()})}var od=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return this.R=r1(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Qo(e),[2]}})})},e.prototype.Uo=function(e){return null},e.prototype.Qo=function(e){var t;return t=this.persistence,new rm(t,new ry,e.initialUser,this.R)},e.prototype.qo=function(e){return new rO(rM.bs,this.R)},e.prototype.Bo=function(e){return new rG},e.prototype.terminate=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},e}(),op=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Ko=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,a.__extends)(t,e),t.prototype.initialize=function(t){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){return[2,(t=e).persistence.runTransaction("Synchronize last document change read time","readonly",function(e){var t,n;return t=ro(e),n=I.min(),t.$t({index:t8.readTimeIndex,reverse:!0},function(e,t,r){t.readTime&&(n=nA(t.readTime)),r.done()}).next(function(){return n})}).then(function(e){t.$n=e})]})})}(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,t)];case 3:return n.sent(),[4,oh(this.Ko.syncEngine)];case 4:return n.sent(),[4,iv(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},t.prototype.Qo=function(e){var t;return t=this.persistence,new rm(t,new ry,e.initialUser,this.R)},t.prototype.Uo=function(e){return new n5(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)},t.prototype.qo=function(e){var t=rd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?nW.withCacheSize(this.cacheSizeBytes):nW.DEFAULT;return new rl(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,rZ(),r0(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new rG},t}(od),ov=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Ko=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,a.__extends)(t,e),t.prototype.initialize=function(t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,a.__generator)(this,function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof rz?(this.sharedClientState.syncEngine={ui:oi.bind(null,n),ai:ou.bind(null,n),hi:oc.bind(null,n),fn:os.bind(null,n),ci:or.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(e){return(0,a.__awaiter)(r,void 0,void 0,function(){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return[4,function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,u,c,l;return(0,a.__generator)(this,function(a){var h;switch(a.label){case 0:return ol(n=e),oh(n),!0!==t||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,oo(n,r.toArray())]);case 1:return i=a.sent(),n.$o=!0,[4,iI(n.remoteStore,!0)];case 2:for(a.sent(),o=0,s=i;o<s.length;o++)u=s[o],it(n.remoteStore,u);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach(function(e,t){n.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then(function(){return i5(n,t),rT(n.localStore,t,!0)}),ir(n.remoteStore,t)}),[4,l]);case 4:return a.sent(),[4,oo(n,c)];case 5:return a.sent(),(h=n).Co.forEach(function(e,t){ir(h.remoteStore,t)}),h.No.ts(),h.Co=new Map,h.Do=new ta(V.comparator),n.$o=!1,[4,iI(n.remoteStore,!1)];case 6:a.sent(),a.label=7;case 7:return[2]}})})}(this.Ko.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},t.prototype.Bo=function(e){var t=rZ();if(!rz.yt(t))throw new l(c.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=rd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rz(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(op),og=function(){function e(){}return e.prototype.initialize=function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n=this;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return iZ(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ot.bind(null,this.syncEngine),[4,iI(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(e){return new iP},e.prototype.createDatastore=function(e){var t=r1(e.databaseInfo.databaseId),n=new rJ(e.databaseInfo);return new r5(e.credentials,n,t)},e.prototype.createRemoteStore=function(e){var t,n=this;return t=this.localStore,new r9(t,this.datastore,e.asyncQueue,function(e){return iZ(n.syncEngine,e,0)},rY.yt()?new rY:new rQ)},e.prototype.createSyncEngine=function(e,t){var n,r,i,o,a;return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,a=new iG(n,r,i,o,e.initialUser,e.maxConcurrentLimboResolutions),t&&(a.$o=!0),a},e.prototype.terminate=function(){return function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return t=e,d("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,ie(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var r;return(0,a.__generator)(this,function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]})})},cancel:function(){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(e){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var om=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),o_=function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new nc,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))},function(e){return n.metadata.reject(e)})}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(e){return[2,this.metadata.promise]})})},e.prototype.Lo=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}})})},e.prototype.Ho=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e,t,n;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(e=r.sent())?[2,null]:(isNaN(n=Number(t=this.zo.decode(e)))&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return[2,new ij(JSON.parse(r.sent()),e.length+n)]}})})},e.prototype.Zo=function(){return this.buffer.findIndex(function(e){return 123===e})},e.prototype.Jo=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return 0>this.Zo()?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}})})},e.prototype.Xo=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}})})},e.prototype.Yo=function(e){throw this.Go.cancel(),Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}})})},e}(),ob=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,a.__generator)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new l(c.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,u;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return r=tj((n=e).R)+"/documents",i={documents:t.map(function(e){return tO(n.R,e)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach(function(e){var t,r,i,o,a,u,c=(t=n.R,"found"in e?(e.found||y(),e.found.name,e.found.updateTime,r=tL(t,e.found.name),i=tP(e.found.updateTime),o=new et({mapValue:{fields:e.found.fields}}),en.newFoundDocument(r,i,o)):"missing"in e?(e.missing||y(),e.readTime||y(),a=tL(t,e.missing),u=tP(e.readTime),en.newNoDocument(a,u)):y());s.set(c.key.toString(),c)}),u=[],[2,(t.forEach(function(e){var t=s.get(e.toString());t||y(),u.push(t)}),u)]}})})}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach(function(e){return n.recordVersion(e)}),t)]}})})},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new tt(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e,t=this;return(0,a.__generator)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(e,n){var r=V.fromPath(n);t.mutations.push(new tn(r,t.precondition(r)))}),[4,function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,a.__generator)(this,function(o){switch(o.label){case 0:return r=tj((n=e).R)+"/documents",i={writes:t.map(function(e){return tB(n.R,e)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(e){if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw y();t=I.min()}var t,n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new l(c.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?eJ.updateTime(t):eJ.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(I.min()))throw new l(c.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return eJ.updateTime(t)}return eJ.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),ow=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new r2(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji(function(){return(0,a.__awaiter)(e,void 0,void 0,function(){var e,t,n=this;return(0,a.__generator)(this,function(r){return e=new ob(this.datastore),(t=this.sc(e))&&t.then(function(t){n.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){n.deferred.resolve(t)}).catch(function(e){n.ic(e)})})}).catch(function(e){n.ic(e)}),[2]})})})},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!j(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return t.nc(),Promise.resolve()})):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!ti(t)}return!1},e}(),oI=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=rF.UNAUTHENTICATED,this.clientId=m.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,function(e){return(0,a.__awaiter)(r,void 0,void 0,function(){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return d("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}})})})}return e.prototype.getConfiguration=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new l(c.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new nc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,a.__awaiter)(e,void 0,void 0,function(){var e;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:n.sent(),n.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=iC(n.sent(),"Failed to shutdown persistence"),t.reject(e),[3,6];case 6:return[2]}})})}),t.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,i=this;return(0,a.__generator)(this,function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),d("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener(function(e){return(0,a.__awaiter)(i,void 0,void 0,function(){return(0,a.__generator)(this,function(n){switch(n.label){case 0:return r.isEqual(e)?[3,2]:[4,r_(t.localStore,e)];case 1:n.sent(),r=e,n.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function oE(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,a.__generator)(this,function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,oS(e)];case 1:return n=i.sent(),d("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener(function(e){return function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,a.__generator)(this,function(i){switch(i.label){case 0:return(n=e).asyncQueue.verifyOperationInProgress(),d("RemoteStore","RemoteStore received new credentials"),r=iu(n),n.Or.add(3),[4,ie(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Or.delete(3),[4,r7(n)];case 3:return i.sent(),[2]}})})}(t.remoteStore,e)}),e.onlineComponents=t,[2]}})})}function oS(e){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(d("FirestoreClient","Using default OfflineComponentProvider"),[4,oT(e,new od)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function oC(e){return(0,a.__awaiter)(this,void 0,void 0,function(){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(d("FirestoreClient","Using default OnlineComponentProvider"),[4,oE(e,new og)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function ok(e){return oS(e).then(function(e){return e.persistence})}function oN(e){return oS(e).then(function(e){return e.localStore})}function oA(e){return oC(e).then(function(e){return e.remoteStore})}function ox(e){return oC(e).then(function(e){return e.syncEngine})}function oP(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return[4,oC(e)];case 1:return[2,((n=(t=r.sent()).eventManager).onListen=iQ.bind(null,t.syncEngine),n.onUnlisten=iX.bind(null,t.syncEngine),n)]}})})}function oR(e,t,n){var r=this;void 0===n&&(n={});var i=new nc;return e.asyncQueue.enqueueAndForget(function(){return(0,a.__awaiter)(r,void 0,void 0,function(){var r;return(0,a.__generator)(this,function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new om({next:function(o){t.enqueueAndForget(function(){return iD(e,a)});var s=o.docs.has(n);!s&&o.fromCache?i.reject(new l(c.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new l(c.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new iF(eT(n.path),o,{includeMetadataChanges:!0,so:!0});return iR(e,a)},[4,oP(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function oD(e,t,n){var r=this;void 0===n&&(n={});var i=new nc;return e.asyncQueue.enqueueAndForget(function(){return(0,a.__awaiter)(r,void 0,void 0,function(){var r;return(0,a.__generator)(this,function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new iF(n,new om({next:function(n){t.enqueueAndForget(function(){return iD(e,o)}),n.fromCache&&"server"===r.source?i.reject(new l(c.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),{includeMetadataChanges:!0,so:!0});return iR(e,o)},[4,oP(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}var oO=function(e,t,n,r,i,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},oL=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),oM=new Map,oF=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},oj=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable(function(){return t(rF.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),oU=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),oq=function(){function e(e){var t=this;this.currentUser=rF.UNAUTHENTICATED,this.oc=new nc,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.uc=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.ac=function(){t.cc++,t.currentUser=t.hc(),t.oc.resolve(),t.uc&&t.asyncQueue.enqueueRetryable(function(){return t.changeListener(t.currentUser)})};var n=function(e){d("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.lc(),t.auth.addAuthTokenListener(t.ac)};e.onInit(function(e){return n(e)}),setTimeout(function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):t.uc&&(d("FirebaseCredentialsProvider","Auth not yet detected"),t.asyncQueue.enqueueRetryable(function(){return t.changeListener(t.currentUser)}))}},0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.cc!==t?(d("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?("string"==typeof n.accessToken||y(),new oF(n.accessToken,e.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){this.uc=!0,this.asyncQueue=e,this.changeListener=t},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.ac),this.changeListener=function(){return Promise.resolve()}},e.prototype.hc=function(){var e=this.auth&&this.auth.getUid();return null===e||"string"==typeof e||y(),new rF(e)},e.prototype.lc=function(){var e=this;this.uc&&(this.uc=!1,this.asyncQueue.enqueueRetryable(function(){return(0,a.__awaiter)(e,void 0,void 0,function(){return(0,a.__generator)(this,function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,this.changeListener(this.currentUser)];case 2:return e.sent(),this.uc=!0,[2]}})})}))},e}(),oV=function(){function e(e,t,n){this.fc=e,this.dc=t,this.wc=n,this.type="FirstParty",this.user=rF.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.dc},t=this.fc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.wc&&(e["X-Goog-Iam-Authorization-Token"]=this.wc),e},enumerable:!1,configurable:!0}),e}(),oB=function(){function e(e,t,n){this.fc=e,this.dc=t,this.wc=n}return e.prototype.getToken=function(){return Promise.resolve(new oV(this.fc,this.dc,this.wc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable(function(){return t(rF.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oK(e,t,n){if(!n)throw new l(c.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function oW(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new l(c.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function oH(e,t,n,r){if(!0===t&&!0===r)throw new l(c.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function oz(e){if(!V.isDocumentKey(e))throw new l(c.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function oG(e){if(V.isDocumentKey(e))throw new l(c.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function oQ(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":y()}function oY(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new l(c.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=oQ(e);throw new l(c.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function oX(e,t){if(t<=0)throw new l(c.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o$=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new l(c.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new l(c.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,oH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties},e}(),oJ=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o$({}),this._settingsFrozen=!1,e instanceof oL?(this._databaseId=e,this._credentials=new oj):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new l(c.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oL(e.options.projectId)}(e),this._credentials=new oq(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new l(c.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new l(c.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o$(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new oj;switch(e.type){case"gapi":var t=e.client;return"object"==typeof t&&null!==t&&t.auth&&t.auth.getAuthHeaderValueForFirstParty||y(),new oB(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new l(c.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){var e;return(e=oM.get(this))&&(d("ComponentProvider","Removing Datastore"),oM.delete(this),e.terminate()),Promise.resolve()},e}(),oZ=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new o1(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),o0=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),o1=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,eT(r))||this)._path=r,i.type="collection",i}return(0,a.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new oZ(this.firestore,null,new V(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(o0);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(e,t){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(e=(0,r.getModularInstance)(e),oK("collection","path",t),e instanceof oJ)return oG(n=k.fromString.apply(k,(0,a.__spreadArray)([t],i))),new o1(e,null,n);if(!(e instanceof oZ||e instanceof o1))throw new l(c.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return oG(n=k.fromString.apply(k,(0,a.__spreadArray)([e.path],i)).child(k.fromString(t))),new o1(e.firestore,null,n)}function o4(e,t){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(e=(0,r.getModularInstance)(e),1==arguments.length&&(t=m.u()),oK("doc","path",t),e instanceof oJ)return oz(n=k.fromString.apply(k,(0,a.__spreadArray)([t],i))),new oZ(e,null,new V(n));if(!(e instanceof oZ||e instanceof o1))throw new l(c.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return oz(n=e._path.child(k.fromString.apply(k,(0,a.__spreadArray)([t],i)))),new oZ(e.firestore,e instanceof o1?e.converter:null,new V(n))}function o3(e,t){return e=(0,r.getModularInstance)(e),t=(0,r.getModularInstance)(t),(e instanceof oZ||e instanceof o1)&&(t instanceof oZ||t instanceof o1)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function o6(e,t){return e=(0,r.getModularInstance)(e),t=(0,r.getModularInstance)(t),e instanceof o0&&t instanceof o0&&e.firestore===t.firestore&&eR(e._query,t._query)&&e.converter===t.converter/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var o5=function(){function e(){var e=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new r2(this,"async_queue_retry"),this.Ac=function(){var t=r0();t&&d("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=r0();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Rc(),this.bc(e)},e.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var e=r0();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ac)}},e.prototype.enqueue=function(e){return this.Rc(),this.yc?new Promise(function(e){}):this.bc(e)},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget(function(){return t.mc.push(e),t.vc()})},e.prototype.vc=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e,t=this;return(0,a.__generator)(this,function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!nv(e=n.sent()))throw e;return d("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.mc.length>0&&this.Zi.ji(function(){return t.vc()}),n.label=5;case 5:return[2]}})})},e.prototype.bc=function(e){var t=this,n=this._c.then(function(){return t.Tc=!0,e().catch(function(e){var n;throw t.Ec=e,t.Tc=!1,p("INTERNAL UNHANDLED ERROR: ",(n=e.message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),e}).then(function(e){return t.Tc=!1,e})});return this._c=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Rc(),this.Ic.indexOf(e)>-1&&(t=0);var i=iS.createAndSchedule(this,e,t,n,function(e){return r.Pc(e)});return this.gc.push(i),i},e.prototype.Rc=function(){this.Ec&&y()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Vc=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e;return(0,a.__generator)(this,function(t){switch(t.label){case 0:return[4,e=this._c];case 1:t.sent(),t.label=2;case 2:if(e!==this._c)return[3,0];t.label=3;case 3:return[2]}})})},e.prototype.Sc=function(e){for(var t=0,n=this.gc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Dc=function(e){var t=this;return this.Vc().then(function(){t.gc.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Vc()})},e.prototype.Cc=function(e){this.Ic.push(e)},e.prototype.Pc=function(e){var t=this.gc.indexOf(e);this.gc.splice(t,1)},e}();function o8(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)}var o9=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new nc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),o7=-1,ae=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new o5,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return(0,a.__extends)(t,e),t.prototype._terminate=function(){return this._firestoreClient||an(this),this._firestoreClient.terminate()},t}(oJ);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(e){return e._firestoreClient||an(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function an(e){var t,n,r=e._freezeSettings(),i=(t=e._databaseId,new oO(t,(null===(n=e._app)||void 0===n?void 0:n.options.appId)||"",e._persistenceKey,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));e._firestoreClient=new oI(e._credentials,e._queue,i)}function ar(e,t,n){var r=this,i=new nc;return e.asyncQueue.enqueue(function(){return(0,a.__awaiter)(r,void 0,void 0,function(){var r;return(0,a.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,oT(e,n)];case 1:return o.sent(),[4,oE(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:var a;if(!("FirebaseError"===(a=r=o.sent()).name?a.code===c.FAILED_PRECONDITION||a.code===c.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function ai(e){if(e._initialized||e._terminated)throw new l(c.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ao=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new l(c.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new A(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),aa=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(P.fromBase64String(t))}catch(e){throw new l(c.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},e.fromUint8Array=function(t){return new e(P.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),as=function(e){this._methodName=e},au=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new l(c.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new l(c.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return _(this._lat,e._lat)||_(this._long,e._long)},e}(),ac=/^__.*__$/,al=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new e6(e,this.data,this.fieldMask,t,this.fieldTransforms):new e3(e,this.data,t,this.fieldTransforms)},e}(),ah=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new e6(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}var ad=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),e.prototype.Fc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fc({path:n,$c:!1});return r.Oc(e),r},e.prototype.Mc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fc({path:n,$c:!1});return r.Nc(),r},e.prototype.Lc=function(e){return this.Fc({path:void 0,$c:!0})},e.prototype.Bc=function(e){return aD(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.Nc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Oc(this.path.get(e))},e.prototype.Oc=function(e){if(0===e.length)throw this.Bc("Document fields must not be empty");if(af(this.xc)&&ac.test(e))throw this.Bc('Document fields cannot begin and end with "__"')},e}(),ap=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||r1(e)}return e.prototype.Qc=function(e,t,n,r){return void 0===r&&(r=!1),new ad({xc:e,methodName:t,Uc:n,path:A.emptyPath(),$c:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function av(e){var t=e._freezeSettings(),n=r1(e._databaseId);return new ap(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ag(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Qc(o.merge||o.mergeFields?2:0,t,n,i);aA("Data must be an object, but it was:",a,r);var s,u,h=ak(r,a);if(o.merge)s=new x(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var f=[],d=0,p=o.mergeFields;d<p.length;d++){var v=ax(t,p[d],n);if(!a.contains(v))throw new l(c.INVALID_ARGUMENT,"Field '"+v+"' is specified in your field mask but missing from your input data.");aO(f,v)||f.push(v)}s=new x(f),u=a.fieldTransforms.filter(function(e){return s.covers(e.field)})}else s=null,u=a.fieldTransforms;return new al(new et(h),s,u)}var ay=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.xc)throw 1===e.xc?e.Bc(this._methodName+"() can only appear at the top level of your update data"):e.Bc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(as);function am(e,t,n){return new ad({xc:3,Uc:t.settings.Uc,methodName:e._methodName,$c:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var a_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype._toFieldTransform=function(e){return new eX(e.path,new eB)},t.prototype.isEqual=function(e){return e instanceof t},t}(as),ab=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return(0,a.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=am(this,e,!0),n=new eK(this.Kc.map(function(e){return aC(e,t)}));return new eX(e.path,n)},t.prototype.isEqual=function(e){return this===e},t}(as),aw=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return(0,a.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=am(this,e,!0),n=new eH(this.Kc.map(function(e){return aC(e,t)}));return new eX(e.path,n)},t.prototype.isEqual=function(e){return this===e},t}(as),aI=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).jc=n,r}return(0,a.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=new eG(e.R,eU(e.R,this.jc));return new eX(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(as);function aT(e,t,n,i){var o=e.Qc(1,t,n);aA("Data must be an object, but it was:",o,i);var a=[],s=et.empty();return E(i,function(e,i){var u=aR(t,e,n);i=(0,r.getModularInstance)(i);var c=o.Mc(u);if(i instanceof ay)a.push(u);else{var l=aC(i,c);null!=l&&(a.push(u),s.set(u,l))}}),new ah(s,new x(a),o.fieldTransforms)}function aE(e,t,n,i,o,a){var s=e.Qc(1,t,n),u=[ax(t,i,n)],h=[o];if(a.length%2!=0)throw new l(c.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<a.length;f+=2)u.push(ax(t,a[f])),h.push(a[f+1]);for(var d=[],p=et.empty(),v=u.length-1;v>=0;--v)if(!aO(d,u[v])){var g=u[v],y=h[v];y=(0,r.getModularInstance)(y);var m=s.Mc(g);if(y instanceof ay)d.push(g);else{var _=aC(y,m);null!=_&&(d.push(g),p.set(g,_))}}return new ah(p,new x(d),s.fieldTransforms)}function aS(e,t,n,r){return void 0===r&&(r=!1),aC(n,e.Qc(r?4:3,t))}function aC(e,t){if(aN(e=(0,r.getModularInstance)(e)))return aA("Unsupported field value:",t,e),ak(e,t);if(e instanceof as)return function(e,t){if(!af(t.xc))throw t.Bc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Bc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.$c&&4!==t.xc)throw t.Bc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0;i<e.length;i++){var o=aC(e[i],t.Lc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,r.getModularInstance)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return eU(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=w.fromDate(e);return{timestampValue:tA(t.R,n)}}if(e instanceof w)return n=new w(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:tA(t.R,n)};if(e instanceof au)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof aa)return{bytesValue:tx(t.R,e._byteString)};if(e instanceof oZ){n=t.databaseId;var i=e.firestore._databaseId;if(!i.isEqual(n))throw t.Bc("Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:tR(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Bc("Unsupported field value: "+oQ(e))}(e,t)}function ak(e,t){var n={};return S(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):E(e,function(e,r){var i=aC(r,t.kc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function aN(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof w||e instanceof au||e instanceof aa||e instanceof oZ||e instanceof as)}function aA(e,t,n){if(!aN(n)||!("object"==typeof n&&null!==n&&(Object.getPrototypeOf(n)===Object.prototype||null===Object.getPrototypeOf(n)))){var r=oQ(n);throw"an object"===r?t.Bc(e+" a custom object"):t.Bc(e+" "+r)}}function ax(e,t,n){if((t=(0,r.getModularInstance)(t))instanceof ao)return t._internalPath;if("string"==typeof t)return aR(e,t);throw aD("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var aP=RegExp("[~\\*/\\[\\]]");function aR(e,t,n){if(t.search(aP)>=0)throw aD("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(ao.bind.apply(ao,(0,a.__spreadArray)([void 0],t.split(".")))))._internalPath}catch(r){throw aD("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function aD(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new l(c.INVALID_ARGUMENT,(s+=". ")+e+u)}function aO(e,t){return e.some(function(e){return e.isEqual(t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aL=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new oZ(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new aM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(aF("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),aM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(aL);function aF(e,t){return"string"==typeof t?aR(e,t):t instanceof ao?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aj=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),aU=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return(0,a.__extends)(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new aq(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(aF("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(aL),aq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(aU),aV=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new aj(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new aq(n._firestore,n._userDataWriter,r.key,r,new aj(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new l(c.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){var r=new aq(e._firestore,e._userDataWriter,t.doc.key,t.doc,new aj(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new aq(e._firestore,e._userDataWriter,t.doc.key,t.doc,new aj(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y()}}(t.type),doc:n,oldIndex:i,newIndex:o}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function aB(e,t){return e instanceof aU&&t instanceof aU?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof aV&&t instanceof aV&&e._firestore===t._firestore&&o6(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(e){if(eS(e)&&0===e.explicitOrderBy.length)throw new l(c.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var aW=function(){};function aH(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)e=t[r]._apply(e);return e}var az=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Wc=t,i.Gc=n,i.zc=r,i.type="where",i}return(0,a.__extends)(t,e),t.prototype._apply=function(e){var t,n,r=av(e.firestore),i=function(e,t,n,r,i,o,a){if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new l(c.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){aZ(a,o);for(var s,u=[],h=0;h<a.length;h++){var f=a[h];u.push(aJ(r,e,f))}s={arrayValue:{values:u}}}else s=aJ(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||aZ(a,o),s=aS(n,"where",a,"in"===o||"not-in"===o);var d=eu.create(i,o,s);return function(e,t){if(t.g()){var n=ek(e);if(null!==n&&!n.isEqual(t.field))throw new l(c.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=eC(e);null!==r&&a0(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new l(c.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new l(c.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,d),d}(e._query,0,r,e.firestore._databaseId,this.Wc,this.Gc,this.zc);return new o0(e.firestore,e.converter,(n=(t=e._query).filters.concat([i]),new eI(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)))},t}(aW),aG=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Wc=t,r.Hc=n,r.type="orderBy",r}return(0,a.__extends)(t,e),t.prototype._apply=function(e){var t,n,r=function(e,t,n){if(null!==e.startAt)throw new l(c.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new l(c.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new e_(t,n);return function(e,t){if(null===eC(e)){var n=ek(e);null!==n&&a0(e,n,t.field)}}(e,r),r}(e._query,this.Wc,this.Hc);return new o0(e.firestore,e.converter,(n=(t=e._query).explicitOrderBy.concat([r]),new eI(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},t}(aW),aQ=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Jc=n,i.Yc=r,i}return(0,a.__extends)(t,e),t.prototype._apply=function(e){return new o0(e.firestore,e.converter,eP(e._query,this.Jc,this.Yc))},t}(aW),aY=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Xc=n,i.Zc=r,i}return(0,a.__extends)(t,e),t.prototype._apply=function(e){var t,n=a$(e,this.type,this.Xc,this.Zc);return new o0(e.firestore,e.converter,new eI((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,n,t.endAt))},t}(aW),aX=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Xc=n,i.Zc=r,i}return(0,a.__extends)(t,e),t.prototype._apply=function(e){var t,n=a$(e,this.type,this.Xc,this.Zc);return new o0(e.firestore,e.converter,new eI((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,n))},t}(aW);function a$(e,t,n,i){if(n[0]=(0,r.getModularInstance)(n[0]),n[0]instanceof aL)return function(e,t,n,r,i){if(!r)throw new l(c.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=eA(e);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Q(t,r.key));else{var h=r.data.field(u.field);if(M(h))throw new l(c.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=u.field.canonicalString();throw new l(c.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(h)}}return new ey(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,i);var o=av(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new l(c.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var h=i[u];if(a[u].field.isKeyField()){if("string"!=typeof h)throw new l(c.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!eN(e)&&-1!==h.indexOf("/"))throw new l(c.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=e.path.child(k.fromString(h));if(!V.isDocumentKey(f))throw new l(c.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var d=new V(f);s.push(Q(t,d))}else{var p=aS(n,r,h);s.push(p)}}return new ey(s,o)}(e._query,e.firestore._databaseId,o,t,n,i)}function aJ(e,t,n){if("string"==typeof(n=(0,r.getModularInstance)(n))){if(""===n)throw new l(c.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!eN(t)&&-1!==n.indexOf("/"))throw new l(c.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var i=t.path.child(k.fromString(n));if(!V.isDocumentKey(i))throw new l(c.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+i+"' is not because it has an odd number of segments ("+i.length+").");return Q(e,new V(i))}if(n instanceof oZ)return Q(e,n._key);throw new l(c.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+oQ(n)+".")}function aZ(e,t){if(!Array.isArray(e)||0===e.length)throw new l(c.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new l(c.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function a0(e,t,n){if(!n.isEqual(t))throw new l(c.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a1=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),B(e)){case 0:return null;case 1:return e.booleanValue;case 2:return O(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(L(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw y()}},e.prototype.convertObject=function(e,t){var n=this,r={};return E(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r},e.prototype.convertGeoPoint=function(e){return new au(O(e.latitude),O(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=function e(t){var n=t.mapValue.fields.__previous_value__;return M(n)?e(n):n}(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(F(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=D(e);return new w(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=k.fromString(e);t$(n)||y();var r=new oL(n.get(1),n.get(3)),i=new V(n.popFirst(5));return r.isEqual(t)||p("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var a4=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,a.__extends)(t,e),t.prototype.convertBytes=function(e){return new aa(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new oZ(this.firestore,null,t)},t}(a1),a3=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=av(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=a6(e,this._firestore),i=a2(r.converter,t,n),o=ag(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,eJ.none())),this},e.prototype.update=function(e,t,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];this._verifyNotCommitted();var a,s=a6(e,this._firestore);return a="string"==typeof(t=(0,r.getModularInstance)(t))||t instanceof ao?aE(this._dataReader,"WriteBatch.update",s._key,t,n,i):aT(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,eJ.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=a6(e,this._firestore);return this._mutations=this._mutations.concat(new tt(t._key,eJ.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new l(c.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(e,t){if((e=(0,r.getModularInstance)(e)).firestore!==t)throw new l(c.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a5=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,a.__extends)(t,e),t.prototype.convertBytes=function(e){return new aa(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new oZ(this.firestore,null,t)},t}(a1);function a8(e,t,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];e=oY(e,oZ);var a=oY(e.firestore,ae),s=av(a);return a7(a,[("string"==typeof(t=(0,r.getModularInstance)(t))||t instanceof ao?aE(s,"updateDoc",e._key,t,n,i):aT(s,"updateDoc",e._key,t)).toMutation(e._key,eJ.exists(!0))])}function a9(e){for(var t,n,i,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];e=(0,r.getModularInstance)(e);var u={includeMetadataChanges:!1},c=0;"object"!=typeof o[0]||o8(o[c])||(u=o[c],c++);var l,h,f,d={includeMetadataChanges:u.includeMetadataChanges};if(o8(o[c])){var p=o[c];o[c]=null===(t=p.next)||void 0===t?void 0:t.bind(p),o[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),o[c+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}if(e instanceof oZ)h=oY(e.firestore,ae),f=eT(e._key.path),l={next:function(t){o[c]&&o[c](se(h,e,t))},error:o[c+1],complete:o[c+2]};else{var v=oY(e,o0);h=oY(v.firestore,ae),f=v._query;var g=new a5(h);l={next:function(e){o[c]&&o[c](new aV(h,g,v,e))},error:o[c+1],complete:o[c+2]},aK(e._query)}return function(e,t,n,r){var i=this,o=new om(r),s=new iF(t,o,n);return e.asyncQueue.enqueueAndForget(function(){return(0,a.__awaiter)(i,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return t=iR,[4,oP(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),e.asyncQueue.enqueueAndForget(function(){return(0,a.__awaiter)(i,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return t=iD,[4,oP(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}})})})}}(at(h),f,d,l)}function a7(e,t){return function(e,t){var n=this,r=new nc;return e.asyncQueue.enqueueAndForget(function(){return(0,a.__awaiter)(n,void 0,void 0,function(){var n;return(0,a.__generator)(this,function(i){switch(i.label){case 0:return n=i$,[4,ox(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}})})}),r.promise}(at(e),t)}function se(e,t,n){var r=n.docs.get(t._key),i=new a5(e);return new aU(e,i,t._key,r,new aj(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return(0,a.__extends)(t,e),t.prototype.get=function(t){var n=this,r=a6(t,this._firestore),i=new a5(this._firestore);return e.prototype.get.call(this,t).then(function(e){return new aU(n._firestore,i,r._key,e._document,new aj(!1,!1),r.converter)})},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=av(e)}return e.prototype.get=function(e){var t=this,n=a6(e,this._firestore),r=new a4(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return y();var i=e[0];if(i.isFoundDocument())return new aL(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new aL(t._firestore,r,n._key,null,n.converter);throw y()})},e.prototype.set=function(e,t,n){var r=a6(e,this._firestore),i=a2(r.converter,t,n),o=ag(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a,s=a6(e,this._firestore);return a="string"==typeof(t=(0,r.getModularInstance)(t))||t instanceof ao?aE(this._dataReader,"Transaction.update",s._key,t,n,i):aT(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this},e.prototype.delete=function(e){var t=a6(e,this._firestore);return this._transaction.delete(t._key),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){if("undefined"==typeof Uint8Array)throw new l(c.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function sr(){if("undefined"==typeof atob)throw new l(c.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var si=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return sr(),new e(aa.fromBase64String(t))},e.fromUint8Array=function(t){return sn(),new e(aa.fromUint8Array(t))},e.prototype.toBase64=function(){return sr(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return sn(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),so=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){var n,r,i,o,a;return n=e._delegate,r={forceOwnership:t},ai(n=oY(n,ae)),i=at(n),o=n._freezeSettings(),ar(i,a=new og,new op(a,o.cacheSizeBytes,null==r?void 0:r.forceOwnership))},e.prototype.enableMultiTabIndexedDbPersistence=function(e){var t,n,r,i;return ai(t=oY(t=e._delegate,ae)),n=at(t),r=t._freezeSettings(),ar(n,i=new og,new ov(i,r.cacheSizeBytes))},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new l(c.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new nc;return e._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,a.__awaiter)(t,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return nf.yt()?(t=e+"main",[4,nf.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}})})}(rd(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}})})}),n.promise}(e._delegate)},e}(),sa=function(){function e(e,t,n){var r=this;this._delegate=t,this.tu=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof oL||(this.eu=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||v("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,i){void 0===i&&(i={});var o=(e=oY(e,oJ))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&v("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:t+":"+n,ssl:!1})),i.mockUserToken){var a=(0,r.createMockUserToken)(i.mockUserToken),s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new l(c.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");e._credentials=new oU(new oF(a,new rF(s)))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return(0,a.__awaiter)(t,void 0,void 0,function(){var t,n;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return[4,ok(e)];case 1:return t=r.sent(),[4,oA(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),n.Or.delete(0),r7(n))]}})})})}(at(oY(this._delegate,ae)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return(0,a.__awaiter)(t,void 0,void 0,function(){var t,n;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return[4,ok(e)];case 1:return t=r.sent(),[4,oA(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return(t=e).Or.add(0),[4,ie(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}})})}(n))]}})})})}(at(oY(this._delegate,ae)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&oH("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.tu.enableMultiTabIndexedDbPersistence(this):this.tu.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.tu.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.eu&&(this.eu._removeServiceInstance("firestore"),this.eu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new nc;return e.asyncQueue.enqueueAndForget(function(){return(0,a.__awaiter)(t,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return t=i4,[4,ox(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}})})}),n.promise}(at(oY(this._delegate,ae)))},e.prototype.onSnapshotsInSync=function(e){var t;return function(e,t){var n=this,r=new om(t);return e.asyncQueue.enqueueAndForget(function(){return(0,a.__awaiter)(n,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return t=function(e,t){e.Gr.add(t),t.next()},[4,oP(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),e.asyncQueue.enqueueAndForget(function(){return(0,a.__awaiter)(n,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return t=function(e,t){e.Gr.delete(t)},[4,oP(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}})})})}}(at(oY(this._delegate,ae)),o8(e)?e:{next:e})},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.eu)throw new l(c.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.eu},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new sw(this,o2(this._delegate,e))}catch(e){throw sd(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new sf(this,o4(this._delegate,e))}catch(e){throw sd(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new sm(this,function(e,t){if(e=oY(e,oJ),oK("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new l(c.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new o0(e,null,new eI(k.emptyPath(),t))}(this._delegate,e))}catch(e){throw sd(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t,n,r=this;return t=this._delegate,n=function(t){return e(new sc(r,t))},function(e,t){var n=this,r=new nc;return e.asyncQueue.enqueueAndForget(function(){return(0,a.__awaiter)(n,void 0,void 0,function(){var n;return(0,a.__generator)(this,function(i){switch(i.label){case 0:return[4,oC(e).then(function(e){return e.datastore})];case 1:return n=i.sent(),new ow(e.asyncQueue,n,t,r).run(),[2]}})})}),r.promise}(at(t),function(e){return n(new st(t,e))})},e.prototype.batch=function(){var e=this;return at(this._delegate),new sl(new a3(this._delegate,function(t){return a7(e._delegate,t)}))},e.prototype.loadBundle=function(e){throw new l(c.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new l(c.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),ss=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,a.__extends)(t,e),t.prototype.convertBytes=function(e){return new si(new aa(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return sf.nu(t,this.firestore,null)},t}(a1);function su(e){h.setLogLevel(e)}var sc=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ss(e)}return e.prototype.get=function(e){var t=this,n=oY(e,oZ);return this._delegate.get(n).then(function(e){return new sg(t._firestore,new aU(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})},e.prototype.set=function(e,t,n){var r=oY(e,oZ);return n?(oW("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=oY(e,oZ);return 2==arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,(0,a.__spreadArray)([s,t,n],i)),this},e.prototype.delete=function(e){var t=oY(e,oZ);return this._delegate.delete(t),this},e}(),sl=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=oY(e,oZ);return n?(oW("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=oY(e,oZ);return 2==arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,(0,a.__spreadArray)([s,t,n],i)),this},e.prototype.delete=function(e){var t=oY(e,oZ);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),sh=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new aq(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sy(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.su=function(t,n){var r=e.iu,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new ss(t),n),i.set(n,o)),o},e}();sh.iu=new WeakMap;var sf=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ss(e)}return e.ru=function(t,n,r){if(t.length%2!=0)throw new l(c.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new oZ(n._delegate,r,new V(t)))},e.nu=function(t,n,r){return new e(n,new oZ(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new sw(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new sw(this.firestore,o2(this._delegate,e))}catch(e){throw sd(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=(0,r.getModularInstance)(e))instanceof oZ&&o3(this._delegate,e)},e.prototype.set=function(e,t){t=oW("DocumentReference.set",t);try{var n,r,i,o;return n=this._delegate,r=t,n=oY(n,oZ),i=oY(n.firestore,ae),o=a2(n.converter,e,r),a7(i,[ag(av(i),"setDoc",n._key,o,null!==n.converter,r).toMutation(n._key,eJ.none())])}catch(e){throw sd(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1==arguments.length?a8(this._delegate,e):a8.apply(void 0,(0,a.__spreadArray)([this._delegate,e,t],n))}catch(e){throw sd(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){var e;return a7(oY((e=this._delegate).firestore,ae),[new tt(e._key,eJ.none())])},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=sp(t),i=sv(t,function(t){return new sg(e.firestore,new aU(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return a9(this._delegate,r,i)},e.prototype.get=function(e){var t,n,r,i,o,s,u,h,f=this;return("cache"===(null==e?void 0:e.source)?(t=oY(t=this._delegate,oZ),r=at(n=oY(t.firestore,ae)),i=new a5(n),(function(e,t){var n=this,r=new nc;return e.asyncQueue.enqueueAndForget(function(){return(0,a.__awaiter)(n,void 0,void 0,function(){var n;return(0,a.__generator)(this,function(i){switch(i.label){case 0:return n=function(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r;return(0,a.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e.persistence.runTransaction("read document","readonly",function(n){return e.Mn.mn(n,t)})];case 1:return(r=i.sent()).isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new l(c.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=iC(i.sent(),"Failed to get document '"+t+" from cache"),n.reject(r),[3,3];case 3:return[2]}})})},[4,oN(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}})})}),r.promise})(r,t._key).then(function(e){return new aU(n,i,t._key,e,new aj(null!==e&&e.hasLocalMutations,!0),t.converter)})):"server"===(null==e?void 0:e.source)?(o=oY(o=this._delegate,oZ),oR(at(s=oY(o.firestore,ae)),o._key,{source:"server"}).then(function(e){return se(s,o,e)})):(u=oY(u=this._delegate,oZ),oR(at(h=oY(u.firestore,ae)),u._key).then(function(e){return se(h,u,e)}))).then(function(e){return new sg(f.firestore,new aU(f.firestore._delegate,f._userDataWriter,e._key,e._document,e.metadata,f._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(sh.su(this.firestore,t)):this._delegate.withConverter(null))},e}();function sd(e,t,n){return e.message=e.message.replace(t,n),e}function sp(e){for(var t=0;t<e.length;t++){var n=e[t];if("object"==typeof n&&!o8(n))return n}return{}}function sv(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=o8(e[0])?e[0]:o8(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var sg=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new sf(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return aB(this._delegate,e._delegate)},e}(),sy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(sg),sm=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ss(e)}return e.prototype.where=function(t,n,r){try{var i;return new e(this.firestore,aH(this._delegate,(i=aF("where",t),new az(i,n,r))))}catch(e){throw sd(e,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{var r,i,o;return new e(this.firestore,aH(this._delegate,(r=n,void 0===r&&(r="asc"),i=r,o=aF("orderBy",t),new aG(o,i))))}catch(e){throw sd(e,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,aH(this._delegate,(oX("limit",t),new aQ("limit",t,"F"))))}catch(e){throw sd(e,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,aH(this._delegate,(oX("limitToLast",t),new aQ("limitToLast",t,"L"))))}catch(e){throw sd(e,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,aH(this._delegate,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new aY("startAt",e,!0)}).apply(void 0,t)))}catch(e){throw sd(e,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,aH(this._delegate,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new aY("startAfter",e,!1)}).apply(void 0,t)))}catch(e){throw sd(e,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,aH(this._delegate,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new aX("endBefore",e,!0)}).apply(void 0,t)))}catch(e){throw sd(e,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,aH(this._delegate,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new aX("endAt",e,!1)}).apply(void 0,t)))}catch(e){throw sd(e,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return o6(this._delegate,e._delegate)},e.prototype.get=function(e){var t,n,r,i,o,s,u,c,l,h,f,d,p=this;return("cache"===(null==e?void 0:e.source)?(t=oY(t=this._delegate,o0),r=at(n=oY(t.firestore,ae)),i=new a5(n),(function(e,t){var n=this,r=new nc;return e.asyncQueue.enqueueAndForget(function(){return(0,a.__awaiter)(n,void 0,void 0,function(){var n;return(0,a.__generator)(this,function(i){switch(i.label){case 0:return n=function(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,rE(e,t,!0)];case 1:return i=(r=new iW(t,(s=a.sent()).Bn))._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=iC(a.sent(),"Failed to execute query '"+t+" against cache"),n.reject(s),[3,3];case 3:return[2]}})})},[4,oN(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}})})}),r.promise})(r,t._query).then(function(e){return new aV(n,i,t,e)})):"server"===(null==e?void 0:e.source)?(o=oY(o=this._delegate,o0),u=at(s=oY(o.firestore,ae)),c=new a5(s),oD(u,o._query,{source:"server"}).then(function(e){return new aV(s,c,o,e)})):(l=oY(l=this._delegate,o0),f=at(h=oY(l.firestore,ae)),d=new a5(h),aK(l._query),oD(f,l._query).then(function(e){return new aV(h,d,l,e)}))).then(function(e){return new sb(p.firestore,new aV(p.firestore._delegate,p._userDataWriter,p._delegate,e._snapshot))})},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=sp(t),i=sv(t,function(t){return new sb(e.firestore,new aV(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return a9(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(sh.su(this.firestore,t)):this._delegate.withConverter(null))},e}(),s_=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new sy(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),sb=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new sm(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(t){return new sy(e._firestore,t)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new s_(t._firestore,e)})},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new sy(n._firestore,r))})},e.prototype.isEqual=function(e){return aB(this._delegate,e._delegate)},e}(),sw=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return(0,a.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new sf(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new sf(this.firestore,void 0===e?o4(this._delegate):o4(this._delegate,e))}catch(e){throw sd(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t,n,r,i,o=this;return(n=oY((t=this._delegate).firestore,ae),r=o4(t),i=a2(t.converter,e),a7(n,[ag(av(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,eJ.exists(!1))]).then(function(){return r})).then(function(e){return new sf(o.firestore,e)})},t.prototype.isEqual=function(e){return o3(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(sh.su(this.firestore,e)):this._delegate.withConverter(null))},t}(sm),sI=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(ao.bind.apply(ao,(0,a.__spreadArray)([void 0],e)))}return e.documentId=function(){return new e(A.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=(0,r.getModularInstance)(e))instanceof ao&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),sT=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new a_("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new ay("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new ab("arrayUnion",e)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new aw("arrayRemove",e)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=new aI("increment",t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(e){var t,n,r;return n=at(t=oY(t=this._delegate,ae)),r=new o9,function(e,t,n,r){var i,o=this,s=(i=r1(t),new o_(function(e,t){if(e instanceof Uint8Array)return oy(e,void 0);if(e instanceof ArrayBuffer)return oy(new Uint8Array(e),void 0);if(e instanceof ReadableStream)return e.getReader();throw Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof n?(new TextEncoder).encode(n):n),i));e.asyncQueue.enqueueAndForget(function(){return(0,a.__awaiter)(o,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return t=of,[4,ox(e)];case 1:return t.apply(void 0,[n.sent(),s,r]),[2]}})})})}(n,t._databaseId,e,r),r}function sS(e){var t,n=this;return(function(e,t){var n=this;return e.asyncQueue.enqueue(function(){return(0,a.__awaiter)(n,void 0,void 0,function(){var n;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return n=function(e,t){return e.persistence.runTransaction("Get named query","readonly",function(n){return e.Qe.getNamedQuery(n,t)})},[4,oN(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}})})})})(at(t=oY(t=this._delegate,ae)),e).then(function(e){return e?new o0(t,null,e.query):null}).then(function(e){return e?new sm(n,e):null})}},4594:function(e,t,n){"use strict";/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}n.r(t),n.d(t,{LogLevel:function(){return a},Logger:function(){return f},setLogLevel:function(){return d},setUserLogHandler:function(){return p}});var i,o,a,s=[];(i=a||(a={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";var u={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},c=a.INFO,l=((o={})[a.DEBUG]="log",o[a.VERBOSE]="log",o[a.INFO]="info",o[a.WARN]="warn",o[a.ERROR]="error",o),h=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=new Date().toISOString(),a=l[t];if(a)console[a].apply(console,r(["["+o+"]  "+e.name+":"],n));else throw Error("Attempted to log a message with an invalid logType (value: "+t+")")}},f=function(){function e(e){this.name=e,this._logLevel=c,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in a))throw TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?u[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.DEBUG],e)),this._logHandler.apply(this,r([this,a.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.VERBOSE],e)),this._logHandler.apply(this,r([this,a.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.INFO],e)),this._logHandler.apply(this,r([this,a.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.WARN],e)),this._logHandler.apply(this,r([this,a.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.ERROR],e)),this._logHandler.apply(this,r([this,a.ERROR],e))},e}();function d(e){s.forEach(function(t){t.setLogLevel(e)})}function p(e,t){for(var n=0;n<s.length;n++)!function(n){var r=null;t&&t.level&&(r=u[t.level]),null===e?n.userLogHandler=null:n.userLogHandler=function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(function(e){return e}).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:a[n].toLowerCase(),message:s,args:i,type:t.name})}}(s[n])}},8847:function(e,t,n){"use strict";var r,i,o,a=n(6099),s=n(7582),u=n(4589),c=n(909),l="firebasestorage.googleapis.com",h="storageBucket",f=function(e){function t(n,r){var i=e.call(this,d(n),"Firebase Storage: "+r+" ("+d(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return(0,s.__extends)(t,e),t.prototype._codeEquals=function(e){return d(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(u.FirebaseError);function d(e){return"storage/"+e}function p(){return new f("unknown","An unknown error occurred, please check the error payload for server response.")}function v(){return new f("canceled","User canceled the upload/download.")}function g(){return new f("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function y(e){return new f("invalid-argument",e)}function m(){return new f("app-deleted","The Firebase app was deleted.")}function _(e){return new f("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function b(e,t){return new f("invalid-format","String does not match format '"+e+"': "+t)}function w(e){throw new f("internal-error","Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},T=function(e,t){this.data=e,this.contentType=t||null};function E(e,t){switch(e){case I.RAW:return new T(S(t));case I.BASE64:case I.BASE64URL:return new T(C(e,t));case I.DATA_URL:var n;return new T((n=new k(t)).base64?C(I.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw b(I.DATA_URL,"Malformed data URL.")}return S(t)}(n.rest),new k(t).contentType)}throw p()}function S(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):(64512&r)==55296?n<e.length-1&&(64512&e.charCodeAt(n+1))==56320?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):(64512&r)==56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function C(e,t){switch(e){case I.BASE64:var n,r=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(r||i){var o=r?"-":"_";throw b(e,"Invalid character '"+o+"' found: is it base64url encoded?")}break;case I.BASE64URL:var a=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(a||s){var o=a?"+":"/";throw b(e,"Invalid character '"+o+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/")}try{n=atob(t)}catch(t){throw b(e,"Invalid character found")}for(var u=new Uint8Array(n.length),c=0;c<n.length;c++)u[c]=n.charCodeAt(c);return u}var k=function(e){this.base64=!1,this.contentType=null;var t,n=e.match(/^data:([^,]+)?,/);if(null===n)throw b(I.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=(t=";base64",r.length>=t.length&&r.substring(r.length-t.length)===t),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)},N={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function A(e){switch(e){case"running":case"pausing":case"canceling":return N.RUNNING;case"paused":return N.PAUSED;case"success":return N.SUCCESS;case"canceled":return N.CANCELED;default:return N.ERROR}}(r=o||(o={}))[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=o.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=o.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=o.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw w("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw w("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw w("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return -1}},e.prototype.getResponseText=function(){if(!this.sent_)throw w("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}(),P=function(){function e(){}return e.prototype.createXhrIo=function(){return new x},e}(),R=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(n){return new e(t,"")}if(""===r.path)return r;throw new f("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=RegExp("^gs://"+i+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),c=RegExp("^https?://"+(n===l?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),h=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:u,indices:{bucket:1,path:3},postModify:a},{regex:c,indices:{bucket:1,path:2},postModify:a}],d=0;d<h.length;d++){var p=h[d],v=p.regex.exec(t);if(v){var g=v[p.indices.bucket],y=v[p.indices.path];y||(y=""),r=new e(g,y),p.postModify(r);break}}if(null==r)throw new f("invalid-url","Invalid URL '"+t+"'.");return r},e}(),D=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();function O(e){return"string"==typeof e||e instanceof String}function L(e){return M()&&e instanceof Blob}function M(){return"undefined"!=typeof Blob}function F(e,t,n,r){if(r<t)throw y("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw y("Invalid value for '"+e+"'. Expected "+n+" or less.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(e,t){var n=t.match(/^(\w+):\/\/.+/),r=null==n?void 0:n[1],i=t;return null==r&&(i="https://"+t),i+"/v0"+e}function U(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n.slice(0,-1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}return e.prototype.start_=function(){var e=this;function t(t,n){var r=e.resolve_,i=e.reject_,o=n.xhr;if(n.wasSuccessCode)try{var a=e.callback_(o,o.getResponseText());void 0!==a?r(a):r()}catch(e){i(e)}else if(null!==o){var s=p();s.serverResponse=o.getResponseText(),i(e.errorCallback_?e.errorCallback_(o,s):s)}else if(n.canceled){var s=e.appDelete_?m():v();i(s)}else{var s=new f("retry-limit-exceeded","Max retry time for operation exceeded, please try again.");i(s)}}this.canceled_?t(!1,new V(!1,null,!0)):this.backoffId_=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t,n){var r=1,i=null,o=!1,a=0,u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function l(t){i=setTimeout(function(){i=null,e(h,2===a)},t)}function h(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(!u){if(e||2===a||o){c.call.apply(c,(0,s.__spreadArray)([null,e],n));return}r<64&&(r*=2),1===a?(a=2,t=0):t=(r+Math.random())*1e3,l(t)}}var f=!1;function d(e){!f&&(f=!0,!u&&(null!==i?(e||(a=2),clearTimeout(i),l(0)):e||(a=1)))}return l(0),setTimeout(function(){o=!0,d(!0)},n),d}(function(t,n){if(n){t(!1,new V(!1,null,!0));return}var r=e.pool_.createXhrIo();function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then(function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=n.getErrorCode()===o.NO_ERROR,a=n.getStatus();if(!r||e.isRetryStatusCode_(a)){t(!1,new V(!1,null,n.getErrorCode()===o.ABORT));return}t(!0,new V(-1!==e.successCodes_.indexOf(a),n))})},t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),V=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function B(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(M())return new Blob(e);throw new f("unsupported-environment","This browser doesn't seem to support creating Blobs")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K=function(){function e(e,t){var n=0,r="";L(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(!L(this.data_))return new e(new Uint8Array(this.data_.buffer,t,n-t),!0);var r,i=(r=this.data_).webkitSlice?r.webkitSlice(t,n):r.mozSlice?r.mozSlice(t,n):r.slice?r.slice(t,n):null;return null===i?null:new e(i)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(M()){var r=t.map(function(t){return t instanceof e?t.data_:t});return new e(B.apply(null,r))}var i=t.map(function(e){return O(e)?E(I.RAW,e).data:e.data_}),o=0;i.forEach(function(e){o+=e.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]}),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(e){var t,n;try{t=JSON.parse(e)}catch(e){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t}function H(e){var t=e.lastIndexOf("/",e.length-2);return -1===t?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(e,t){return t}var G=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||z},Q=null;function Y(){if(Q)return Q;var e=[];e.push(new G("bucket")),e.push(new G("generation")),e.push(new G("metageneration")),e.push(new G("name","fullPath",!0));var t=new G("name");t.xform=function(e,t){return!O(t)||t.length<2?t:H(t)},e.push(t);var n=new G("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new G("timeCreated")),e.push(new G("updated")),e.push(new G("md5Hash",null,!0)),e.push(new G("cacheControl",null,!0)),e.push(new G("contentDisposition",null,!0)),e.push(new G("contentEncoding",null,!0)),e.push(new G("contentLanguage",null,!0)),e.push(new G("contentType",null,!0)),e.push(new G("metadata","customMetadata",!0)),Q=e}function X(e,t,n){var r=W(t);return null===r?null:function(e,t,n){var r={};r.type="file";for(var i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return Object.defineProperty(r,"ref",{get:function(){var t=new R(r.bucket,r.fullPath);return e._makeStorageReference(t)}}),r}(e,r,n)}function $(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J="prefixes",Z="items",ee=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(e){if(!e)throw p()}function en(e,t){return function(n,r){var i=X(e,r,t);return et(null!==i),i}}function er(e){return function(t,n){var r;return(r=401===t.getStatus()?t.getResponseText().includes("Firebase App Check token is invalid")?new f("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new f("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new f("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new f("unauthorized","User does not have permission to access '"+e.path+"'."):n).serverResponse=n.serverResponse,r}}function ei(e){var t=er(e);return function(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=new f("object-not-found","Object '"+e.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function eo(e,t,n){var r=j(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new ee(r,"GET",en(e,n),i);return o.errorHandler=ei(t),o}function ea(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=t&&t.type()||"application/octet-stream"),r}var es=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function eu(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){et(!1)}return et(!!n&&-1!==(t||["active"]).indexOf(n)),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ec=function(e,t,n){"function"==typeof e||null!=t||null!=n?(this.next=e,this.error=t,this.complete=n):(this.next=e.next,this.error=e.error,this.complete=e.complete)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eh=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Y(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise(function(e,t){r._resolve=e,r._reject=t,r._start()}),this._promise.then(null,function(){})}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}})},e.prototype._createResumable=function(){var e=this;this._resolveToken(function(t,n){var r,i,o,a,s,u,c,l,h,f,d,p,v=(r=e._ref.storage,i=e._ref._location,o=e._mappings,a=e._blob,s=e._metadata,u=i.bucketOnlyServerUrl(),l={name:(c=ea(i,a,s)).fullPath},h=j(u,r.host),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":a.size(),"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},d=$(c,o),(p=new ee(h,"POST",function(e){var t;eu(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){et(!1)}return et(O(t)),t},r.maxUploadRetryTime)).urlParams=l,p.headers=f,p.body=d,p.errorHandler=er(i),p),g=e._ref.storage._makeRequest(v,t,n);e._request=g,g.getPromise().then(function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()},e._errorHandler)})},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken(function(n,r){var i,o,a,s,u=(i=e._ref.storage,o=e._ref._location,a=e._blob,(s=new ee(t,"POST",function(e){var t=eu(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){et(!1)}n||et(!1);var r=Number(n);return et(!isNaN(r)),new es(r,a.size(),"final"===t)},i.maxUploadRetryTime)).headers={"X-Goog-Upload-Command":"query"},s.errorHandler=er(o),s),c=e._ref.storage._makeRequest(u,n,r);e._request=c,c.getPromise().then(function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()},e._errorHandler)})},e.prototype._continueUpload=function(){var e=this,t=262144*this._chunkMultiplier,n=new es(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){try{a=function(e,t,n,r,i,o,a,s){var u=new es(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new f("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},v=r.slice(h,d);if(null===v)throw g();var y=new ee(n,"POST",function(e,n){var i,a=eu(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?en(t,o)(e,n):null,new es(s,c,"final"===a,i)},t.maxUploadRetryTime);return y.headers=p,y.body=v.uploadData(),y.progressCallback=s||null,y.errorHandler=er(e),y}(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(t){e._error=t,e._transition("error");return}var a,s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then(function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()},e._errorHandler)})},e.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken(function(t,n){var r=eo(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._transition("success")},e._metadataErrorHandler)})},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken(function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=ea(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+$(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l=K.getBlob(c,r,"\r\n--"+s+"--");if(null===l)throw g();var h={name:u.fullPath},f=j(o,e.host),d=e.maxUploadRetryTime,p=new ee(f,"POST",en(e,n),d);return p.urlParams=h,p.headers=a,p.body=l.uploadData(),p.errorHandler=er(t),p}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")},e._errorHandler)})},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=v(),this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=A(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new ec(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(A(this._state)){case N.SUCCESS:el(this._resolve.bind(null,this.snapshot))();break;case N.CANCELED:case N.ERROR:el(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(A(this._state)){case N.RUNNING:case N.PAUSED:e.next&&el(e.next.bind(e,this.snapshot))();break;case N.SUCCESS:e.complete&&el(e.complete.bind(e))();break;case N.CANCELED:case N.ERROR:default:e.error&&el(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),ef=function(){function e(e,t){this._service=e,t instanceof R?this._location=t:this._location=R.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new R(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return H(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return -1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new R(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw _(e)},e}();function ed(e,t){return(0,s.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,s.__generator)(this,function(i){switch(i.label){case 0:var o,a,s,u,c,l,h,f,d;return null!=t&&"number"==typeof t.maxResults&&F("options.maxResults",1,1e3,t.maxResults),n=t||{},o=e.storage,a=e._location,s=n.pageToken,u=n.maxResults,c={},a.isRoot?c.prefix="":c.prefix=a.path+"/",c.delimiter="/",s&&(c.pageToken=s),u&&(c.maxResults=u),l=j(a.bucketOnlyServerUrl(),o.host),h=o.maxOperationRetryTime,(d=new ee(l,"GET",(f=a.bucket,function(e,t){var n,r=null===(n=W(t))?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[J])for(var i=0,o=n[J];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e._makeStorageReference(new R(t,a));r.prefixes.push(s)}if(n[Z])for(var u=0,c=n[Z];u<c.length;u++){var l=c[u],s=e._makeStorageReference(new R(t,l.name));r.items.push(s)}return r}(o,f,n);return et(null!==r),r}),h)).urlParams=c,d.errorHandler=er(a),r=d,[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function ep(e,t){var n,r,i=(n=e._location.path,r=t.split("/").filter(function(e){return e.length>0}).join("/"),0===n.length?r:n+"/"+r),o=new R(e._location.bucket,i);return new ef(e.storage,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(e){return/^[A-Za-z]+:\/\//.test(e)}function eg(e,t){var n=null==t?void 0:t[h];return null==n?null:R.makeFromBucketSpec(n,e)}var ey=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=l,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,null!=i?this._bucket=R.makeFromBucketSpec(i,this._host):this._bucket=eg(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=R.makeFromBucketSpec(this._url,e):this._bucket=eg(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){F("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){F("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return(0,s.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,s.__generator)(this,function(n){switch(n.label){case 0:if(!(e=this._authProvider.getImmediate({optional:!0})))return[3,2];return[4,e.getToken()];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}})})},e.prototype._getAppCheckToken=function(){return(0,s.__awaiter)(this,void 0,void 0,function(){var e;return(0,s.__generator)(this,function(t){switch(t.label){case 0:if(!(e=this._appCheckProvider.getImmediate({optional:!0})))return[3,2];return[4,e.getToken()];case 1:return[2,t.sent().token];case 2:return[2,null]}})})},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(e){return e.cancel()}),this._requests.clear(),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new ef(this,e)},e.prototype._makeRequest=function(e,t,n){var r,i,o,a,s,u,c,l=this;if(this._deleted)return new D(m());var h=(r=this._appId,i=this._pool,o=this._firebaseVersion,a=U(e.urlParams),s=e.url+a,c=u=Object.assign({},e.headers),r&&(c["X-Firebase-GMPID"]=r),null!==t&&t.length>0&&(u.Authorization="Firebase "+t),u["X-Firebase-Storage-Version"]="webjs/"+(null!=o?o:"AppManager"),null!==n&&(u["X-Firebase-AppCheck"]=n),new q(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i));return this._requests.add(h),h.getPromise().then(function(){return l._requests.delete(h)},function(){return l._requests.delete(h)}),h},e.prototype.makeRequestWithTokens=function(e){return(0,s.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,s.__generator)(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=(t=i.sent())[0],r=t[1],[2,this._makeRequest(e,n,r)]}})})},e}();function em(e,t){return function(e,t){if(!(t&&ev(t)))return function e(t,n){if(t instanceof ey){if(null==t._bucket)throw new f("no-default-bucket","No default bucket found. Did you set the '"+h+"' property when initializing the app?");var r=new ef(t,t._bucket);return null!=n?e(r,n):r}if(void 0===n)return t;if(n.includes(".."))throw y('`path` param cannot contain ".."');return ep(t,n)}(e,t);if(e instanceof ey)return new ef(e,t);throw y("To use ref(service, url), the first argument must be a Storage instance.")}(e=(0,u.getModularInstance)(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e_=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),eb=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new e_(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new e_(t,n,n._ref))},t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"==typeof t?function(e){return t(new e_(e,i,i._ref))}:{next:t.next?function(e){return t.next(new e_(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),ew=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new eI(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new eI(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),eI=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){return new e(ep(this._delegate,t),this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){var n,r;return this._throwIfRoot("put"),new eb((n=this._delegate,(r=n=(0,u.getModularInstance)(n))._throwIfRoot("uploadBytesResumable"),new eh(r,new K(e),t)),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=I.RAW),this._throwIfRoot("putString");var r=E(t,e),i=(0,s.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new eb(new eh(this._delegate,new K(r.data,!0),i),this)},e.prototype.listAll=function(){var e,t,n=this;return(e=this._delegate,(function e(t,n,r){return(0,s.__awaiter)(this,void 0,void 0,function(){var i,o,a;return(0,s.__generator)(this,function(s){switch(s.label){case 0:return[4,ed(t,{pageToken:r})];case 1:if(i=s.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(a=n.items).push.apply(a,i.items),!(null!=i.nextPageToken))return[3,3];return[4,e(t,n,i.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})})(e=(0,u.getModularInstance)(e),t={prefixes:[],items:[]}).then(function(){return t})).then(function(e){return new ew(e,n.storage)})},e.prototype.list=function(e){var t,n,r=this;return(t=this._delegate,n=e||void 0,ed(t=(0,u.getModularInstance)(t),n)).then(function(e){return new ew(e,r.storage)})},e.prototype.getMetadata=function(){var e;return e=this._delegate,function(e){return(0,s.__awaiter)(this,void 0,void 0,function(){var t;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=eo(e.storage,e._location,Y()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}(e=(0,u.getModularInstance)(e))},e.prototype.updateMetadata=function(e){var t;return t=this._delegate,function(e,t){return(0,s.__awaiter)(this,void 0,void 0,function(){var n;return(0,s.__generator)(this,function(r){switch(r.label){case 0:var i,o,a,s,u,c,l;return e._throwIfRoot("updateMetadata"),i=e.storage,o=e._location,a=Y(),s=j(o.fullServerUrl(),i.host),u=$(t,a),c=i.maxOperationRetryTime,(l=new ee(s,"PATCH",en(i,a),c)).headers={"Content-Type":"application/json; charset=utf-8"},l.body=u,l.errorHandler=ei(o),n=l,[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=(0,u.getModularInstance)(t),e)},e.prototype.getDownloadURL=function(){var e;return e=this._delegate,function(e){return(0,s.__awaiter)(this,void 0,void 0,function(){var t;return(0,s.__generator)(this,function(n){switch(n.label){case 0:var r,i,o,a;return e._throwIfRoot("getDownloadURL"),r=e.storage,i=e._location,o=Y(),(a=new ee(j(i.fullServerUrl(),r.host),"GET",function(e,t){var n=X(r,t,o);return et(null!==n),function(e,t,n){var r=W(t);if(null===r||!O(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(t){var r=e.bucket,i=e.fullPath;return j("/b/"+o(r)+"/o/"+o(i),n)+U({alt:"media",token:t})})[0]}(n,t,r.host)},r.maxOperationRetryTime)).errorHandler=ei(i),t=a,[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then(function(e){if(null===e)throw new f("no-download-url","The given file does not have any download URLs.");return e})]}})})}(e=(0,u.getModularInstance)(e))},e.prototype.delete=function(){var e;return this._throwIfRoot("delete"),e=this._delegate,function(e){return(0,s.__awaiter)(this,void 0,void 0,function(){var t;return(0,s.__generator)(this,function(n){switch(n.label){case 0:var r,i,o;return e._throwIfRoot("deleteObject"),r=e.storage,(o=new ee(j((i=e._location).fullServerUrl(),r.host),"DELETE",function(e,t){},r.maxOperationRetryTime)).successCodes=[200,204],o.errorHandler=ei(i),t=o,[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}(e=(0,u.getModularInstance)(e))},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw _(e)},e}(),eT=function(){function e(e,t){var n=this;this.app=e,this._delegate=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(ev(e))throw y("ref() expected a child path but got a URL, use refFromURL instead.");return new eI(em(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!ev(e))throw y("refFromURL() expected a full URL but got a child path, use ref() instead.");try{R.makeFromUrl(e,this._delegate.host)}catch(e){throw y("refFromUrl() expected a valid full URL but got an invalid one.")}return new eI(em(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t){this._delegate.host="http://"+e+":"+t},e}();(i=a.default).INTERNAL.registerComponent(new c.Component("storage",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate();return new eT(r,new ey(r,e.getProvider("auth-internal"),e.getProvider("app-check-internal"),new P,n,a.default.SDK_VERSION))},"PUBLIC").setServiceProps({TaskState:N,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:I,Storage:ey,Reference:eI}).setMultipleInstances(!0)),i.registerVersion("@firebase/storage","0.5.2")},4589:function(e,t,n){"use strict";n.r(t),n.d(t,{CONSTANTS:function(){return i},Deferred:function(){return p},ErrorFactory:function(){return R},FirebaseError:function(){return P},MAX_VALUE_MILLIS:function(){return ea},RANDOM_FACTOR:function(){return es},Sha1:function(){return Q},areCookiesEnabled:function(){return A},assert:function(){return o},assertionError:function(){return a},async:function(){return $},base64:function(){return c},base64Decode:function(){return h},base64Encode:function(){return l},calculateBackoffMillis:function(){return eu},contains:function(){return V},createMockUserToken:function(){return v},createSubscribe:function(){return Y},decode:function(){return M},deepCopy:function(){return f},deepExtend:function(){return d},errorPrefix:function(){return ee},extractQuerystring:function(){return G},getGlobal:function(){return x},getModularInstance:function(){return el},getUA:function(){return g},isAdmin:function(){return q},isBrowser:function(){return _},isBrowserExtension:function(){return b},isElectron:function(){return I},isEmpty:function(){return K},isIE:function(){return T},isIndexedDBAvailable:function(){return k},isMobileCordova:function(){return y},isNode:function(){return m},isNodeSdk:function(){return S},isReactNative:function(){return w},isSafari:function(){return C},isUWP:function(){return E},isValidFormat:function(){return U},isValidTimestamp:function(){return F},issuedAtTime:function(){return j},jsonEval:function(){return O},map:function(){return W},ordinal:function(){return ec},querystring:function(){return H},querystringDecode:function(){return z},safeGet:function(){return B},stringLength:function(){return eo},stringToByteArray:function(){return ei},stringify:function(){return L},validateArgCount:function(){return Z},validateCallback:function(){return en},validateContextObject:function(){return er},validateIndexedDBOpenable:function(){return N},validateNamespace:function(){return et}});var r=n(7582),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:((64512&i)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},u=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var o=e[n++],a=e[n++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{var o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):u(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},l=function(e){var t=s(e);return c.encodeByteArray(t,!0)},h=function(e){try{return c.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f(e){return d(void 0,e)}function d(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=d(e[n],t[n]));return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[c.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),c.encodeString(JSON.stringify(a),!1),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function m(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function _(){return"object"==typeof self&&self.self===self}function b(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function w(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function I(){return g().indexOf("Electron/")>=0}function T(){var e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function E(){return g().indexOf("MSAppHost/")>=0}function S(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function C(){return!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){return"indexedDB"in self&&null!=indexedDB}function N(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}function A(){return!!navigator&&!!navigator.cookieEnabled}function x(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw Error("Unable to locate global object.")}var P=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,R.prototype.create),o}return(0,r.__extends)(t,e),t}(Error),R=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?o.replace(D,function(e,t){var n=r[t];return null!=n?String(n):"<"+t+"?>"}):"Error",s=this.serviceName+": "+a+" ("+i+").";return new P(i,s,r)},e}(),D=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(e){return JSON.parse(e)}function L(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=O(h(o[0])||""),n=O(h(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},F=function(e){var t=M(e).claims,n=Math.floor(new Date().getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},j=function(e){var t=M(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},U=function(e){var t=M(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},q=function(e){var t=M(e).claims;return"object"==typeof t&&!0===t.admin};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function K(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function W(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}function z(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("="),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}}),t}function G(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n,r,i=this.W_;if("string"==typeof e)for(var o=0;o<16;o++)i[o]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var o=0;o<16;o++)i[o]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var o=16;o<80;o++){var a=i[o-3]^i[o-8]^i[o-14]^i[o-16];i[o]=(a<<1|a>>>31)&4294967295}for(var s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4],o=0;o<80;o++){o<40?o<20?(n=l^u&(c^l),r=1518500249):(n=u^c^l,r=1859775393):o<60?(n=u&c|l&(u|c),r=2400959708):(n=u^c^l,r=3395469782);var a=(s<<5|s>>>27)+n+h+r+i[o]&4294967295;h=l,l=c,c=(u<<30|u>>>2)&4294967295,u=s,s=a}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function Y(e,t){var n=new X(e,t);return n.subscribe.bind(n)}var X=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw Error("Missing Observer.");void 0===(r=!function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0;n<t.length;n++){var r=t[n];if(r in e&&"function"==typeof e[r])return!0}return!1}(e,["next","error","complete"])?{next:e,error:t,complete:n}:e).next&&(r.next=J),void 0===r.error&&(r.error=J),void 0===r.complete&&(r.complete=J);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function $(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}}function J(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ee(e,t){return e+" failed: "+t+" argument "}function et(e,t,n){if((!n||t)&&"string"!=typeof t)throw Error(ee(e,"namespace")+"must be a valid firebase namespace.")}function en(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw Error(ee(e,t)+"must be a valid function.")}function er(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw Error(ee(e,t)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ei=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},eo=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},ea=144e5,es=.5;function eu(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=2);var r=t*Math.pow(n,e);return Math.min(ea,r+Math.round(es*r*(Math.random()-.5)*2))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(e){return Number.isFinite(e)?e+function(e){var t=(e=Math.abs(e))%100;if(t>=10&&t<=20)return"th";var n=e%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}(e):""+e}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(e){return e&&e._delegate?e._delegate:e}},3705:function(e,t,n){"use strict";n.d(t,{FJ:function(){return nk},JJ:function(){return nD},UE:function(){return nC},ii:function(){return nR},jK:function(){return nN},ju:function(){return nx},kN:function(){return nP},tw:function(){return nA}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r,i,o,a,s,u=function(e,t){return(u=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var l,h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},f=f||{},d=h||self;function p(){}function v(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function g(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function y(e,t,n){return e.call.apply(e.bind,arguments)}function m(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _(e,t,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:m).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(){return Date.now()}function I(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Kb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function T(){this.j=this.j,this.i=this.i}T.prototype.j=!1,T.prototype.ja=function(){this.j||(this.j=!0,this.G())},T.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return -1},S=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function C(e){return Array.prototype.concat.apply([],arguments)}function k(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function N(e){return/^[\s\xa0]*$/.test(e)}var A=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function x(e,t){return -1!=e.indexOf(t)}function P(e,t){return e<t?-1:e>t?1:0}e:{var R=d.navigator;if(R){var D=R.userAgent;if(D){r=D;break e}}r=""}function O(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function L(e){var t={};for(var n in e)t[n]=e[n];return t}var M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<M.length;o++)n=M[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function j(e){return j[" "](e),e}j[" "]=p;var U=x(r,"Opera"),q=x(r,"Trident")||x(r,"MSIE"),V=x(r,"Edge"),B=V||q,K=x(r,"Gecko")&&!(x(r.toLowerCase(),"webkit")&&!x(r,"Edge"))&&!(x(r,"Trident")||x(r,"MSIE"))&&!x(r,"Edge"),W=x(r.toLowerCase(),"webkit")&&!x(r,"Edge");function H(){var e=d.document;return e?e.documentMode:void 0}e:{var z,G="",Q=(z=r,K?/rv:([^\);]+)(\)|;)/.exec(z):V?/Edge\/([\d\.]+)/.exec(z):q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(z):W?/WebKit\/(\S+)/.exec(z):U?/(?:Version)[ \/]?(\S+)/.exec(z):void 0);if(Q&&(G=Q?Q[1]:""),q){var Y=H();if(null!=Y&&Y>parseFloat(G)){i=String(Y);break e}}i=G}var X={};function $(e){var t;return t=function(){for(var t=0,n=A(String(i)).split("."),r=A(String(e)).split("."),o=Math.max(n.length,r.length),a=0;0==t&&a<o;a++){var s=n[a]||"",u=r[a]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;t=P(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||P(0==s[2].length,0==u[2].length)||P(s[2],u[2]),s=s[3],u=u[3]}while(0==t)}return 0<=t},Object.prototype.hasOwnProperty.call(X,e)?X[e]:X[e]=t(e)}var J=d.document&&q&&(H()||parseInt(i,10))||void 0,Z=!q||9<=Number(J),ee=q&&!$("9"),et=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{d.addEventListener("test",p,t),d.removeEventListener("test",p,t)}catch(e){}return e}();function en(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}function er(e,t){if(en.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(K){e:{try{j(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ei[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}en.prototype.b=function(){this.defaultPrevented=!0},I(er,en);var ei={2:"touch",3:"pen",4:"mouse"};er.prototype.b=function(){er.X.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,ee)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var eo="closure_listenable_"+(1e6*Math.random()|0),ea=0;function es(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ca=i,this.key=++ea,this.Y=this.Z=!1}function eu(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.ca=null}function ec(e){this.src=e,this.a={},this.b=0}function el(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=E(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(eu(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function eh(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.Y&&o.listener==t&&!!n==o.capture&&o.ca==r)return i}return -1}ec.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=eh(e,t,r,i);return -1<a?(t=e[a],n||(t.Z=!1)):((t=new es(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var ef="closure_lm_"+(1e6*Math.random()|0),ed={};function ep(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=eI(r),t&&t[eo]?t.wa(n,r,g(i)?!!i.capture:!!i,o):ev(t,n,r,!0,i,o)}(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)ep(e,t[o],n,r,i);return null}return n=eI(n),e&&e[eo]?e.va(t,n,g(r)?!!r.capture:!!r,i):ev(e,t,n,!1,r,i)}function ev(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a,s=g(i)?!!i.capture:!!i;if(s&&!Z)return null;var u=eb(e);if(u||(e[ef]=u=new ec(e)),(n=u.add(t,n,r,s,o)).proxy)return n;if(r=a=Z?function(e){return e_.call(a.src,a.listener,e)}:function(e){if(!(e=e_.call(a.src,a.listener,e)))return e},n.proxy=r,r.src=e,r.listener=n,e.addEventListener)et||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ey(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function eg(e){if("number"!=typeof e&&e&&!e.Y){var t=e.src;if(t&&t[eo])el(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ey(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=eb(t))?(el(n,e),0==n.b&&(n.src=null,t[ef]=null)):eu(e)}}}function ey(e){return e in ed?ed[e]:ed[e]="on"+e}function em(e,t){var n=e.listener,r=e.ca||e.src;return e.Z&&eg(e),n.call(r,t)}function e_(e,t){if(e.Y)return!0;if(!Z){if(!t)e:{t=["window","event"];for(var n=d,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}return em(e,t=new er(t,this))}return em(e,new er(t,this))}function eb(e){return(e=e[ef])instanceof ec?e:null}var ew="__closure_events_fn_"+(1e9*Math.random()>>>0);function eI(e){return"function"==typeof e?e:(e[ew]||(e[ew]=function(t){return e.handleEvent(t)}),e[ew])}function eT(){T.call(this),this.c=new ec(this),this.J=this,this.C=null}function eE(e,t){var n,r=e.C;if(r)for(n=[];r;r=r.C)n.push(r);if(e=e.J,r=t.type||t,"string"==typeof t)t=new en(t,e);else if(t instanceof en)t.target=t.target||e;else{var i=t;F(t=new en(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.a=n[o];i=eS(a,r,!0,t)&&i}if(i=eS(a=t.a=e,r,!0,t)&&i,i=eS(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=eS(a=t.a=n[o],r,!1,t)&&i}function eS(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&el(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}I(eT,T),eT.prototype[eo]=!0,(l=eT.prototype).addEventListener=function(e,t,n,r){ep(this,e,t,n,r)},l.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else(i=g(i)?!!i.capture:!!i,r=eI(r),t&&t[eo])?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=eh(a=t.a[n],r,i,o))&&(eu(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):t&&(t=eb(t))&&(n=t.a[n.toString()],t=-1,n&&(t=eh(n,r,i,o)),(r=-1<t?n[t]:null)&&eg(r))}(this,e,t,n,r)},l.G=function(){if(eT.X.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)eu(n[r]);delete t.a[e],t.b--}}this.C=null},l.va=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},l.wa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var eC=d.JSON.stringify;function ek(){this.b=this.a=null}var eN=new(function(){function e(e,t){this.c=e,this.f=t,this.b=0,this.a=null}return e.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},e}())(function(){return new eA},function(e){e.reset()});function eA(){this.next=this.b=this.a=null}function ex(e,t){var n;a||(n=d.Promise.resolve(void 0),a=function(){n.then(eD)}),eP||(a(),eP=!0),eR.add(e,t)}ek.prototype.add=function(e,t){var n=eN.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},eA.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},eA.prototype.reset=function(){this.next=this.b=this.a=null};var eP=!1,eR=new ek;function eD(){for(var e,t;e=null,eR.a&&(e=eR.a,eR.a=eR.a.next,eR.a||(eR.b=null),e.next=null),t=e;){try{t.a.call(t.b)}catch(e){!function(e){d.setTimeout(function(){throw e},0)}(e)}eN.f(t),100>eN.b&&(eN.b++,t.next=eN.a,eN.a=t)}eP=!1}function eO(e,t){eT.call(this),this.b=e||1,this.a=t||d,this.f=_(this.Za,this),this.g=w()}function eL(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}function eM(e,t,n){if("function"==typeof e)n&&(e=_(e,n));else if(e&&"function"==typeof e.handleEvent)e=_(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:d.setTimeout(e,t||0)}I(eO,eT),(l=eO.prototype).aa=!1,l.M=null,l.Za=function(){if(this.aa){var e=w()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),eE(this,"tick"),this.aa&&(eL(this),this.start()))}},l.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=w())},l.G=function(){eO.X.G.call(this),eL(this),delete this.a};var eF=function(e){function t(t,n){var r=e.call(this)||this;return r.g=t,r.h=n,r.b=null,r.c=!1,r.a=null,r}return!function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.f=function(e){this.b=arguments,this.a?this.c=!0:function e(t){t.a=eM(function(){t.a=null,t.c&&(t.c=!1,e(t))},t.h);var n=t.b;t.b=null,t.g.apply(null,n)}(this)},t.prototype.G=function(){e.prototype.G.call(this),this.a&&(d.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(T);function ej(e){T.call(this),this.b=e,this.a={}}I(ej,T);var eU=[];function eq(e,t,n,r){Array.isArray(n)||(n&&(eU[0]=n.toString()),n=eU);for(var i=0;i<n.length;i++){var o=ep(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function eV(e){O(e.a,function(e,t){this.a.hasOwnProperty(t)&&eg(e)},e),e.a={}}function eB(){this.a=!0}function eK(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}}return eC(n)}catch(e){return t}}(e,n)+(r?" "+r:"")})}ej.prototype.G=function(){ej.X.G.call(this),eV(this)},ej.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},eB.prototype.info=function(){};var eW={},eH=null;function ez(){return eH=eH||new eT}function eG(e){en.call(this,eW.Fa,e)}function eQ(e){var t=ez();eE(t,new eG(t,e))}function eY(e,t){en.call(this,eW.STAT_EVENT,e),this.stat=t}function eX(e){var t=ez();eE(t,new eY(t,e))}function e$(e){en.call(this,eW.Ga,e)}function eJ(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){e()},t)}eW.Fa="serverreachability",I(eG,en),eW.STAT_EVENT="statevent",I(eY,en),eW.Ga="timingevent",I(e$,en);var eZ={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},e0={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function e1(){}function e2(e){var t;return(t=e.a)||(t=e.a={}),t}function e4(){}e1.prototype.a=null;var e3={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function e6(){en.call(this,"d")}function e5(){en.call(this,"c")}function e8(){}function e9(e,t,n,r){this.g=e,this.c=t,this.f=n,this.S=r||1,this.J=new ej(this),this.P=e7,e=B?125:void 0,this.R=new eO(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}I(e6,en),I(e5,en),I(e8,e1),s=new e8;var e7=45e3,te={},tt={};function tn(e,t,n){e.H=1,e.i=tT(ty(t)),e.j=n,e.I=!0,tr(e,null)}function tr(e,t){e.u=w(),to(e),e.l=ty(e.i);var n=e.l,r=e.S;Array.isArray(r)||(r=[String(r)]),tM(n.b,"t",r),e.D=0,e.a=n_(e.g,e.g.C?t:null),0<e.O&&(e.F=new eF(_(e.Ca,e,e.a),e.O)),eq(e.J,e.a,"readystatechange",e.Xa),t=e.B?L(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),eQ(1),function(e,t,n,r,i,o){e.info(function(){if(e.a){if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null}else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.c,e.m,e.l,e.f,e.S,e.j)}function ti(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var i=function(e,t){var n=e.D,r=t.indexOf("\n",n);return -1==r?tt:isNaN(n=Number(t.substring(n,r)))?te:(r+=1)+n>t.length?tt:(t=t.substr(r,n),e.D=r+n,t)}(e,n);if(i==tt){4==t&&(e.h=4,eX(14),r=!1),eK(e.c,e.f,null,"[Incomplete Response]");break}if(i==te){e.h=4,eX(15),eK(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}eK(e.c,e.f,i,null),tl(e,i)}4==t&&0==n.length&&(e.h=1,eX(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.V&&(e.V=!0,(t=e.g).a==e&&t.U&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),nh(t),t.F=!0,eX(11))):(eK(e.c,e.f,n,"[Invalid Chunked Response]"),tc(e),tu(e))}function to(e){e.T=w()+e.P,ta(e,e.P)}function ta(e,t){if(null!=e.o)throw Error("WatchDog timer not null");e.o=eJ(_(e.Va,e),t)}function ts(e){e.o&&(d.clearTimeout(e.o),e.o=null)}function tu(e){0==e.g.v||e.A||np(e.g,e)}function tc(e){ts(e);var t=e.F;t&&"function"==typeof t.ja&&t.ja(),e.F=null,eL(e.R),eV(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ja())}function tl(e,t){try{var n=e.g;if(0!=n.v&&(n.a==e||tK(n.b,e))){if(n.I=e.N,!e.C&&tK(n.b,e)&&3==n.v){try{var r=n.ka.a.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.j){if(n.a){if(n.a.u+3e3<e.u)nd(n),nn(n);else break e}nl(n),eX(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=eJ(_(n.Sa,n),6e3));if(1>=tB(n.b)&&n.ea){try{n.ea()}catch(e){}n.ea=void 0}}else ng(n,11)}else if((e.C||n.a==e)&&nd(n),!N(t))for(t=r=n.ka.a.parse(t),r=0;r<t.length;r++)if(i=t[r],n.P=i[0],i=i[1],2==n.v){if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=e.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(x(l,"spdy")||x(l,"quic")||x(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(tW(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,tI(u.B,u.A,f))}}if(n.v=3,n.f&&n.f.ta(),n.U&&(n.N=w()-e.u,n.c.info("Handshake RTT: "+n.N+"ms")),(u=n).la=nm(u,u.C?u.ga:null,u.fa),e.C){tH(u.b,e);var d=u.D;d&&e.setTimeout(d),e.o&&(ts(e),to(e)),u.a=e}else nc(u);0<n.g.length&&no(n)}else"stop"!=i[0]&&"close"!=i[0]||ng(n,7)}else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?ng(n,7):nt(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0)}eQ(4)}catch(e){}}function th(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(v(e)||"string"==typeof e)S(e,t,void 0);else{if(e.L&&"function"==typeof e.L)var n=e.L();else if(e.K&&"function"==typeof e.K)n=void 0;else if(v(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.K&&"function"==typeof e.K)return e.K();if("string"==typeof e)return e.split("");if(v(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return e=t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function tf(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e){if(e instanceof tf)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}}function td(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];tp(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)tp(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function tp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(l=e9.prototype).setTimeout=function(e){this.P=e},l.Xa=function(e){e=e.target;var t=this.F;t&&3==t8(e)?t.f():this.Ca(e)},l.Ca=function(e){try{if(e==this.a)e:{var t=t8(this.a),n=this.a.ua(),r=this.a.W();if(!(3>t||3==t&&!B&&!this.a.$())){this.A||4!=t||7==n||(8==n||0>=r?eQ(3):eQ(2)),ts(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.c,this.m,this.l,this.f,this.S,t,i),this.b){if(this.U&&!this.C){t:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(a)){var u=a;break t}}u=null}if(u)eK(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,tl(this,u);else{this.b=!1,this.h=3,eX(12),tc(this),tu(this);break e}}this.I?(ti(this,t,o),B&&this.b&&3==t&&(eq(this.J,this.R,"tick",this.Wa),this.R.start())):(eK(this.c,this.f,o,null),tl(this,o)),4==t&&tc(this),this.b&&!this.A&&(4==t?np(this.g,this):(this.b=!1,to(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,eX(12)):(this.h=0,eX(13)),tc(this),tu(this)}}}catch(e){}finally{}},l.Wa=function(){if(this.a){var e=t8(this.a),t=this.a.$();this.D<t.length&&(ts(this),ti(this,e,t),this.b&&4!=e&&to(this))}},l.cancel=function(){this.A=!0,tc(this)},l.Va=function(){this.o=null;var e=w();0<=e-this.T?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.c,this.l),2!=this.H&&(eQ(3),eX(17)),tc(this),this.h=2,tu(this)):ta(this,this.T-e)},(l=tf.prototype).K=function(){td(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},l.L=function(){return td(this),this.a.concat()},l.get=function(e,t){return tp(this.b,e)?this.b[e]:t},l.set=function(e,t){tp(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},l.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var tv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tg(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof tg){this.a=void 0!==t?t:e.a,tm(this,e.f),this.j=e.j,t_(this,e.c),tb(this,e.h),this.g=e.g,t=e.b;var n=new tR;n.c=t.c,t.a&&(n.a=new tf(t.a),n.b=t.b),tw(this,n),this.i=e.i}else e&&(n=String(e).match(tv))?(this.a=!!t,tm(this,n[1]||"",!0),this.j=tE(n[2]||""),t_(this,n[3]||"",!0),tb(this,n[4]),this.g=tE(n[5]||"",!0),tw(this,n[6]||"",!0),this.i=tE(n[7]||"")):(this.a=!!t,this.b=new tR(null,this.a))}function ty(e){return new tg(e)}function tm(e,t,n){e.f=n?tE(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function t_(e,t,n){e.c=n?tE(t,!0):t}function tb(e,t){if(t){if(isNaN(t=Number(t))||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function tw(e,t,n){var r,i;t instanceof tR?(e.b=t,r=e.b,(i=e.a)&&!r.f&&(tD(r),r.c=null,r.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(tO(this,t),tM(this,n,e))},r)),r.f=i):(n||(t=tS(t,tx)),e.b=new tR(t,e.a))}function tI(e,t,n){e.b.set(t,n)}function tT(e){return tI(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),e}function tE(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function tS(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,tC),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function tC(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}tg.prototype.toString=function(){var e=[],t=this.f;t&&e.push(tS(t,tk,!0),":");var n=this.c;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(tS(t,tk,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&e.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&e.push("/"),e.push(tS(n,"/"==n.charAt(0)?tA:tN,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",tS(n,tP)),e.join("")};var tk=/[#\/\?@]/g,tN=/[#\?:]/g,tA=/[#\?]/g,tx=/[#\?@]/g,tP=/#/g;function tR(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function tD(e){e.a||(e.a=new tf,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function tO(e,t){tD(e),t=tF(e,t),tp(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,tp((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&td(e)))}function tL(e,t){return tD(e),t=tF(e,t),tp(e.a.b,t)}function tM(e,t,n){tO(e,t),0<n.length&&(e.c=null,e.a.set(tF(e,t),k(n)),e.b+=n.length)}function tF(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(l=tR.prototype).add=function(e,t){tD(this),this.c=null,e=tF(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},l.forEach=function(e,t){tD(this),this.a.forEach(function(n,r){S(n,function(n){e.call(t,n,r,this)},this)},this)},l.L=function(){tD(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},l.K=function(e){tD(this);var t=[];if("string"==typeof e)tL(this,e)&&(t=C(t,this.a.get(tF(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=C(t,e[n])}return t},l.set=function(e,t){return tD(this),this.c=null,tL(this,e=tF(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},l.get=function(e,t){return e&&0<(e=this.K(e)).length?String(e[0]):t},l.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var tj=function(e,t){this.b=e,this.a=t};function tU(e){this.g=e||tq,e=d.PerformanceNavigationTiming?0<(e=d.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(d.ia&&d.ia.ya&&d.ia.ya()&&d.ia.ya().Lb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var tq=10;function tV(e){return!!e.b||!!e.a&&e.a.size>=e.f}function tB(e){return e.b?1:e.a?e.a.size:0}function tK(e,t){return e.b?e.b==t:!!e.a&&e.a.has(t)}function tW(e,t){e.a?e.a.add(t):e.b=t}function tH(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}function tz(e){var t,n;if(null!=e.b)return e.c.concat(e.b.s);if(null!=e.a&&0!==e.a.size){var r=e.c;try{for(var i=c(e.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return k(e.c)}function tG(){}function tQ(){this.a=new tG}function tY(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}tU.prototype.cancel=function(){var e,t;if(this.c=tz(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=c(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},tG.prototype.stringify=function(e){return d.JSON.stringify(e,void 0)},tG.prototype.parse=function(e){return d.JSON.parse(e,void 0)};var tX=d.JSON.parse;function t$(e){eT.call(this),this.headers=new tf,this.H=e||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=tJ,this.D=this.F=!1}I(t$,eT);var tJ="",tZ=/^https?$/i,t0=["POST","PUT"];function t1(e){return"content-type"==e.toLowerCase()}function t2(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,t4(e),t6(e)}function t4(e){e.u||(e.u=!0,eE(e,"complete"),eE(e,"error"))}function t3(e){if(e.b&&void 0!==f&&(!e.s[1]||4!=t8(e)||2!=e.W())){if(e.l&&4==t8(e))eM(e.za,0,e);else if(eE(e,"readystatechange"),4==t8(e)){e.b=!1;try{var t,n,r=e.W();switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break;default:i=!1}if(!(t=i)){if(n=0===r){var o=String(e.B).match(tv)[1]||null;if(!o&&d.self&&d.self.location){var a=d.self.location.protocol;o=a.substr(0,a.length-1)}n=!tZ.test(o?o.toLowerCase():"")}t=n}if(t)eE(e,"complete"),eE(e,"success");else{e.h=6;try{var s=2<t8(e)?e.a.statusText:""}catch(e){s=""}e.f=s+" ["+e.W()+"]",t4(e)}}finally{t6(e)}}}}function t6(e,t){if(e.a){t5(e);var n=e.a,r=e.s[0]?p:null;e.a=null,e.s=null,t||eE(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function t5(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(d.clearTimeout(e.m),e.m=null)}function t8(e){return e.a?e.a.readyState:0}function t9(e,t,n){e:{for(i in n){var r,i=!1;break e}i=!0}i||(r="",O(n,function(e,t){r+=t+":"+e+"\r\n"}),n=r,"string"==typeof e?null!=n&&encodeURIComponent(String(n)):tI(e,t,n))}function t7(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ne(e){this.pa=0,this.g=[],this.c=new eB,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=t7("failFast",!1,e),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=t7("baseRetryDelayMs",5e3,e),this.Ra=t7("retryDelaySeedMs",1e4,e),this.Ma=t7("forwardChannelMaxRetries",2,e),this.ma=t7("forwardChannelRequestTimeoutMs",2e4,e),this.Na=e&&e.g||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new tU(e&&e.concurrentRequestLimit),this.ka=new tQ,this.da=e&&e.fastHandshake||!1,this.Ia=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&e&&e.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=e&&e.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function nt(e){if(nr(e),3==e.v){var t=e.R++,n=ty(e.B);tI(n,"SID",e.J),tI(n,"RID",t),tI(n,"TYPE","terminate"),ns(e,n),(t=new e9(e,e.c,t,void 0)).H=2,t.i=tT(ty(n)),n=!1,d.navigator&&d.navigator.sendBeacon&&(n=d.navigator.sendBeacon(t.i.toString(),"")),!n&&d.Image&&((new Image).src=t.i,n=!0),n||(t.a=n_(t.g,null),t.a.ba(t.i)),t.u=w(),to(t)}ny(e)}function nn(e){e.a&&(nh(e),e.a.cancel(),e.a=null)}function nr(e){nn(e),e.j&&(d.clearTimeout(e.j),e.j=null),nd(e),e.b.cancel(),e.h&&("number"==typeof e.h&&d.clearTimeout(e.h),e.h=null)}function ni(e,t){e.g.push(new tj(e.Oa++,t)),3==e.v&&no(e)}function no(e){tV(e.b)||e.h||(e.h=!0,ex(e.Ba,e),e.u=0)}function na(e,t){n=t?t.f:e.R++;var n,r=ty(e.B);tI(r,"SID",e.J),tI(r,"RID",n),tI(r,"AID",e.P),ns(e,r),e.i&&e.l&&t9(r,e.i,e.l),n=new e9(e,e.c,n,e.u+1),null===e.i&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=nu(e,n,1e3),n.setTimeout(Math.round(.5*e.ma)+Math.round(.5*e.ma*Math.random())),tW(e.b,n),tn(n,r,t)}function ns(e,t){e.f&&th({},function(e,n){tI(t,n,e)})}function nu(e,t,n){n=Math.min(e.g.length,n);for(var r=e.f?_(e.f.Ja,e.f,e):null,i=e.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{!function(e,t,n){var r=n||"";try{th(e,function(e,n){var i=e;g(e)&&(i=eC(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break}}return e=e.g.splice(0,n),t.s=e,r}function nc(e){e.a||e.j||(e.T=1,ex(e.Aa,e),e.o=0)}function nl(e){return!e.a&&!e.j&&!(3<=e.o)&&(e.T++,e.j=eJ(_(e.Aa,e),nv(e,e.o)),e.o++,!0)}function nh(e){null!=e.s&&(d.clearTimeout(e.s),e.s=null)}function nf(e){e.a=new e9(e,e.c,"rpc",e.T),null===e.i&&(e.a.B=e.l),e.a.O=0;var t=ty(e.la);tI(t,"RID","rpc"),tI(t,"SID",e.J),tI(t,"CI",e.H?"0":"1"),tI(t,"AID",e.P),ns(e,t),tI(t,"TYPE","xmlhttp"),e.i&&e.l&&t9(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ga,n.H=1,n.i=tT(ty(t)),n.j=null,n.I=!0,tr(n,e)}function nd(e){null!=e.m&&(d.clearTimeout(e.m),e.m=null)}function np(e,t){var n=null;if(e.a==t){nd(e),nh(e),e.a=null;var r=2}else{if(!tK(e.b,t))return;n=t.s,tH(e.b,t),r=1}if(e.I=t.N,0!=e.v){if(t.b){if(1==r){n=t.j?t.j.length:0,t=w()-t.u;var i,o=e.u;eE(r=ez(),new e$(r,n,t,o)),no(e)}else nc(e)}else if(3==(o=t.h)||0==o&&0<e.I||!(1==r&&(i=t,!(tB(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.g=i.s.concat(e.g),!0):1!=e.v&&2!=e.v&&!(e.u>=(e.La?0:e.Ma))&&(e.h=eJ(_(e.Ba,e,i),nv(e,e.u)),e.u++,!0)))||2==r&&nl(e)))switch(n&&0<n.length&&((t=e.b).c=t.c.concat(n)),o){case 1:ng(e,5);break;case 4:ng(e,10);break;case 3:ng(e,6);break;default:ng(e,2)}}}function nv(e,t){var n=e.Ha+Math.floor(Math.random()*e.Ra);return e.f||(n*=2),n*t}function ng(e,t){if(e.c.info("Error code "+t),2==t){var n=null;e.f&&(n=null);var r=_(e.Ya,e);n||(n=new tg("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||tm(n,"https"),tT(n)),function(e,t){var n=new eB;if(d.Image){var r=new Image;r.onload=b(tY,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(tY,n,r,"TestLoadImage: error",!1,t),r.onabort=b(tY,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(tY,n,r,"TestLoadImage: timeout",!1,t),d.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else eX(2);e.v=0,e.f&&e.f.ra(t),ny(e),nr(e)}function ny(e){e.v=0,e.I=-1,e.f&&((0!=tz(e.b).length||0!=e.g.length)&&(e.b.c.length=0,k(e.g),e.g.length=0),e.f.qa())}function nm(e,t,n){var r=(i=n)instanceof tg?ty(i):new tg(i,void 0);if(""!=r.c)t&&t_(r,t+"."+r.c),tb(r,r.h);else{var i,o,a,s,u,c,l=d.location;o=l.protocol,a=t?t+"."+l.hostname:l.hostname,s=+l.port,u=n,c=new tg(null,void 0),o&&tm(c,o),a&&t_(c,a),s&&tb(c,s),u&&(c.g=u),r=c}return e.V&&O(e.V,function(e,t){tI(r,t,e)}),t=e.A,n=e.na,t&&n&&tI(r,t,n),tI(r,"VER",e.ha),ns(e,r),r}function n_(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new t$(e.Na)).F=e.C,t}function nb(){}function nw(){if(q&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function nI(e,t){eT.call(this),this.a=new ne(t),this.o=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!N(e)&&(this.a.i=e),this.m=t&&t.supportsCrossDomainXhr||!1,this.l=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.a.A=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new nS(this)}function nT(e){e6.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function nE(){e5.call(this),this.status=1}function nS(e){this.a=e}(l=t$.prototype).ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+e);t=t?t.toUpperCase():"GET",this.B=e,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?e2(this.H):e2(s),this.a.onreadystatechange=_(this.za,this);try{this.A=!0,this.a.open(t,String(e),!0),this.A=!1}catch(e){t2(this,e);return}e=n||"";var i,o=new tf(this.headers);r&&th(r,function(e,t){o.set(t,e)}),r=function(e){e:{for(var t=t1,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(o.L()),n=d.FormData&&e instanceof d.FormData,!(0<=E(t0,t))||r||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{t5(this),0<this.o&&((this.D=(i=this.a,q&&$(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=_(this.xa,this)):this.m=eM(this.xa,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){t2(this,e)}},l.xa=function(){void 0!==f&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,eE(this,"timeout"),this.abort(8))},l.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,eE(this,"complete"),eE(this,"abort"),t6(this))},l.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),t6(this,!0)),t$.X.G.call(this)},l.za=function(){this.j||(this.A||this.l||this.g?t3(this):this.Ua())},l.Ua=function(){t3(this)},l.W=function(){try{return 2<t8(this)?this.a.status:-1}catch(e){return -1}},l.$=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},l.Pa=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),tX(t)}},l.ua=function(){return this.h},l.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(l=ne.prototype).ha=8,l.v=1,l.Ba=function(e){if(this.h){if(this.h=null,1==this.v){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t,n=new e9(this,this.c,e,void 0),r=this.l;if(this.O&&(r?F(r=L(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)e:{for(var i=t=0;i<this.g.length;i++){t:{var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)){o=o.length;break t}o=void 0}if(void 0===o)break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.g.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=nu(this,n,t),tI(i=ty(this.B),"RID",e),tI(i,"CVER",22),this.A&&tI(i,"X-HTTP-Session-Id",this.A),ns(this,i),this.i&&r&&t9(i,this.i,r),tW(this.b,n),this.Ia&&tI(i,"TYPE","init"),this.da?(tI(i,"$req",t),tI(i,"SID","null"),n.U=!0,tn(n,i,null)):tn(n,i,t),this.v=2}}else 3==this.v&&(e?na(this,e):0==this.g.length||tV(this.b)||na(this))}},l.Aa=function(){if(this.j=null,nf(this),this.U&&!(this.F||null==this.a||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=eJ(_(this.Ta,this),e)}},l.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,eX(10),nn(this),nf(this))},l.Sa=function(){null!=this.m&&(this.m=null,nn(this),nl(this),eX(19))},l.Ya=function(e){e?(this.c.info("Successfully pinged google.com"),eX(2)):(this.c.info("Failed to ping google.com"),eX(1))},(l=nb.prototype).ta=function(){},l.sa=function(){},l.ra=function(){},l.qa=function(){},l.Ja=function(){},nw.prototype.a=function(e,t){return new nI(e,t)},I(nI,eT),nI.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var e=this.a,t=this.o,n=this.b||void 0;eX(0),e.fa=t,e.V=n||{},e.H=e.S,e.B=nm(e,null,e.fa),no(e)},nI.prototype.close=function(){nt(this.a)},nI.prototype.h=function(e){if("string"==typeof e){var t={};t.__data__=e,ni(this.a,t)}else this.l?((t={}).__data__=eC(e),ni(this.a,t)):ni(this.a,e)},nI.prototype.G=function(){this.a.f=null,delete this.f,nt(this.a),delete this.a,nI.X.G.call(this)},I(nT,e6),I(nE,e5),I(nS,nb),nS.prototype.ta=function(){eE(this.a,"a")},nS.prototype.sa=function(e){eE(this.a,new nT(e))},nS.prototype.ra=function(e){eE(this.a,new nE(e))},nS.prototype.qa=function(){eE(this.a,"b")},nw.prototype.createWebChannel=nw.prototype.a,nI.prototype.send=nI.prototype.h,nI.prototype.open=nI.prototype.g,nI.prototype.close=nI.prototype.close,eZ.NO_ERROR=0,eZ.TIMEOUT=8,eZ.HTTP_ERROR=6,e0.COMPLETE="complete",e4.EventType=e3,e3.OPEN="a",e3.CLOSE="b",e3.ERROR="c",e3.MESSAGE="d",eT.prototype.listen=eT.prototype.va,t$.prototype.listenOnce=t$.prototype.wa,t$.prototype.getLastError=t$.prototype.Qa,t$.prototype.getLastErrorCode=t$.prototype.ua,t$.prototype.getStatus=t$.prototype.W,t$.prototype.getResponseJson=t$.prototype.Pa,t$.prototype.getResponseText=t$.prototype.$,t$.prototype.send=t$.prototype.ba;var nC=function(){return new nw},nk=function(){return ez()},nN=eZ,nA=e0,nx=eW,nP={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},nR=e4,nD=t$},4203:function(e,t,n){"use strict";n.d(t,{Z:function(){return x.default}});var r,i,o,a,s,u,c,l,h,f,d,p,v,g,y,m,_,b,w,I,T,E,S,C,k,N,A,x=n(6099);(function(){var e,t,r,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},o=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,e];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}return globalThis}(this);function a(e){var t,n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:(t=0,function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})}}!function(e,t){if(t){var n=o;e=e.split(".");for(var r=0;r<e.length-1;r++){var a=e[r];a in n||(n[a]={}),n=n[a]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}("Promise",function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c(function(){t.g()})}this.a.push(e)};var i=o.setTimeout;n.prototype.c=function(e){i(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c(function(){throw e})},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{switch(typeof e){case"object":var n=null!=e;break;case"function":n=!0;break;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(e){this.g(e);return}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.s=function(e){var t=this.f();e.Qa(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t(function(e,t){i=e,o=t});return this.Qa(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Qa=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=a(e),o=i.next();!o.done;o=i.next())r(o.value).Qa(t,n)})},t.all=function(e){var n=a(e),i=n.next();return i.done?r([]):new t(function(e,t){var o=[],a=0;do o.push(void 0),a++,r(i.value).Qa(function(t){return function(n){o[t]=n,0==--a&&e(o)}}(o.length-1),t),i=n.next();while(!i.done)})},t});var s=s||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&c.test(e)?e:""}function f(){}function d(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function p(e){var t=d(e);return"array"==t||"object"==t&&"number"==typeof e.length}function v(e){return"function"==d(e)}function g(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function y(e){return Object.prototype.hasOwnProperty.call(e,m)&&e[m]||(e[m]=++_)}var m="closure_uid_"+(1e9*Math.random()>>>0),_=0;function b(e,t,n){return e.call.apply(e.bind,arguments)}function w(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function I(e,t,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function T(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var E=Date.now;function S(e,t){function n(){}n.prototype=t.prototype,e.ab=t.prototype,e.prototype=new n,e.prototype.constructor=e}function C(e){return e}function k(e,t,n){this.code=A+e,this.message=t||P[e]||"",this.a=n||null}function N(e){var t=e&&e.code;return t?new k(t.substring(A.length),e.message,e.serverResponse):null}S(k,Error),k.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},k.prototype.toJSON=function(){return this.w()};var A="auth/",P={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},R={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(e){for(var t in R)if(R[t].id===e)return{firebaseEndpoint:(e=R[t]).Ta,secureTokenEndpoint:e.Za,identityPlatformEndpoint:e.Wa};return null}function O(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function L(e){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function M(e,t){e=e.split("%s");for(var n="",r=e.length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");L.call(this,n+e[r])}function F(e,t){throw new M("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function j(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function U(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function q(){this.b=this.a=null}oH=D("__EID__")?"__EID__":void 0,S(L,Error),L.prototype.name="CustomError",S(M,L),M.prototype.name="AssertionError",j.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var V=new j(function(){return new B},function(e){e.reset()});function B(){this.next=this.b=this.a=null}q.prototype.add=function(e,t){var n=V.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var K=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return -1},W=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},H=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"==typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},z=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"==typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},G=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function Q(e,t){return 0<=K(e,t)}function Y(e,t){var n;return(n=0<=(t=K(e,t)))&&Array.prototype.splice.call(e,t,1),n}function X(e,t){var n=0;!function(e,t){for(var n="string"==typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,function(r,i){t.call(void 0,r,i,e)&&1==Array.prototype.splice.call(e,i,1).length&&n++})}function $(e){return Array.prototype.concat.apply([],arguments)}function J(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var Z=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ee=/&/g,et=/</g,en=/>/g,er=/"/g,ei=/'/g,eo=/\x00/g,ea=/[\x00&<>"']/;function es(e,t){return -1!=e.indexOf(t)}function eu(e,t){return e<t?-1:e>t?1:0}e:{var ec=u.navigator;if(ec){var el=ec.userAgent;if(el){oz=el;break e}}oz=""}function eh(e){return es(oz,e)}function ef(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function ed(e){for(var t in e)return!1;return!0}function ep(e){var t,n={};for(t in e)n[t]=e[t];return n}var ev="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function eg(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ev.length;o++)n=ev[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ey(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break e}}catch(e){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(g(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function em(e,t){this.a=e===ew&&t||"",this.b=eb}function e_(e){return e instanceof em&&e.constructor===em&&e.b===eb?e.a:(F("expected object of type Const, got '"+e+"'"),"type_error:Const")}em.prototype.sa=!0,em.prototype.ra=function(){return this.a},em.prototype.toString=function(){return"Const{"+this.a+"}"};var eb={},ew={};function eI(){if(void 0===oG){var e=null,t=u.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:C,createScript:C,createScriptURL:C})}catch(e){u.console&&u.console.error(e.message)}oG=e}else oG=e}return oG}function eT(e,t){this.a=t===eN?e:""}function eE(e){return e instanceof eT&&e.constructor===eT?e.a:(F("expected object of type TrustedResourceUrl, got '"+e+"' of type "+d(e)),"type_error:TrustedResourceUrl")}function eS(e,t){var n,r,i=e_(e);if(!ek.test(i))throw Error("Invalid TrustedResourceUrl format: "+i);return n=e=i.replace(eC,function(e,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw Error('Found marker, "'+n+'", in format string, "'+i+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[n])instanceof em?e_(e):encodeURIComponent(String(e))}),new eT(n=(r=eI())?r.createScriptURL(n):n,eN)}eT.prototype.sa=!0,eT.prototype.ra=function(){return this.a.toString()},eT.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var eC=/%{(\w+)}/g,ek=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,eN={};function eA(e,t){this.a=t===eM?e:""}function ex(e){return e instanceof eA&&e.constructor===eA?e.a:(F("expected object of type SafeUrl, got '"+e+"' of type "+d(e)),"type_error:SafeUrl")}eA.prototype.sa=!0,eA.prototype.ra=function(){return this.a.toString()},eA.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var eP=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,eR=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,eD=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function eO(e){if(e instanceof eA)return e;if(e="object"==typeof e&&e.sa?e.ra():String(e),eD.test(e))e=new eA(e,eM);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(eR);e=t&&eP.test(t[1])?new eA(e,eM):null}return e}function eL(e){return e instanceof eA?e:(e="object"==typeof e&&e.sa?e.ra():String(e),eD.test(e)||(e="about:invalid#zClosurez"),new eA(e,eM))}var eM={},eF=new eA("about:invalid#zClosurez",eM);function ej(e,t,n){this.a=n===eU?e:""}ej.prototype.sa=!0,ej.prototype.ra=function(){return this.a.toString()},ej.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var eU={};function eq(e,t,n,r){return e=e instanceof eA?e:eL(e),t=t||u,n=n instanceof em?e_(n):n||"",t.open(ex(e),n,r,void 0)}function eV(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function eB(e){return ea.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ee,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(et,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(en,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(er,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ei,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(eo,"&#0;"))),e}function eK(e){return eK[" "](e),e}eK[" "]=f;var eW=eh("Opera"),eH=eh("Trident")||eh("MSIE"),ez=eh("Edge"),eG=ez||eH,eQ=eh("Gecko")&&!(es(oz.toLowerCase(),"webkit")&&!eh("Edge"))&&!(eh("Trident")||eh("MSIE"))&&!eh("Edge"),eY=es(oz.toLowerCase(),"webkit")&&!eh("Edge");function eX(){var e=u.document;return e?e.documentMode:void 0}e:{var e$,eJ="",eZ=(e$=oz,eQ?/rv:([^\);]+)(\)|;)/.exec(e$):ez?/Edge\/([\d\.]+)/.exec(e$):eH?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e$):eY?/WebKit\/(\S+)/.exec(e$):eW?/(?:Version)[ \/]?(\S+)/.exec(e$):void 0);if(eZ&&(eJ=eZ?eZ[1]:""),eH){var e0=eX();if(null!=e0&&e0>parseFloat(eJ)){oQ=String(e0);break e}}oQ=eJ}var e1={};function e2(e){var t;return t=function(){for(var t=0,n=Z(String(oQ)).split("."),r=Z(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=eu(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||eu(0==a[2].length,0==s[2].length)||eu(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t},Object.prototype.hasOwnProperty.call(e1,e)?e1[e]:e1[e]=t(e)}var e4=u.document&&eH&&(eX()||parseInt(oQ,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(e){}var e3=!eH||9<=Number(e4);function e6(e){var t=document;return"string"==typeof e?t.getElementById(e):e}function e5(e,t){ef(t,function(t,n){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:e8.hasOwnProperty(n)?e.setAttribute(e8[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}var e8={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function e9(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function e7(e){u.setTimeout(function(){throw e},0)}function te(e,t){o$||function(){if(u.Promise&&u.Promise.resolve){var e=u.Promise.resolve(void 0);o$=function(){e.then(tr)}}else o$=function(){!v(u.setImmediate)||u.Window&&u.Window.prototype&&!eh("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(oX||(oX=function(){var e=u.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!eh("Presto")&&(e=function(){var e=e9(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=I(function(e){("*"==r||e.origin==r)&&e.data==n&&this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!eh("Trident")&&!eh("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Gb;n.Gb=null,e()}},function(e){r.next={Gb:e},r=r.next,t.port2.postMessage(0)}}return function(e){u.setTimeout(e,0)}}()),oX(tr)):u.setImmediate(tr)}}(),tt||(o$(),tt=!0),tn.add(e,t)}var tt=!1,tn=new q;function tr(){for(var e,t;e=null,tn.a&&(e=tn.a,tn.a=tn.a.next,tn.a||(tn.b=null),e.next=null),t=e;){try{t.a.call(t.b)}catch(e){e7(e)}U(V,t)}tt=!1}function ti(e,t){if(this.a=to,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=f)try{var n=this;e.call(t,function(e){ty(n,ta,e)},function(e){if(!(e instanceof tE))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}ty(n,ts,e)})}catch(e){ty(this,ts,e)}}var to=0,ta=2,ts=3;function tu(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}tu.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var tc=new j(function(){return new tu},function(e){e.reset()});function tl(e,t,n){var r=tc.get();return r.g=e,r.b=t,r.f=n,r}function th(e){if(e instanceof ti)return e;var t=new ti(f);return ty(t,ta,e),t}function tf(e){return new ti(function(t,n){n(e)})}function td(e,t,n){tm(e,t,n,null)||te(T(t,e))}function tp(e){return new ti(function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)td(e[o],T(i,o,!0),T(i,o,!1));else t(r)})}function tv(e,t){e.b||e.a!=ta&&e.a!=ts||t_(e),e.f?e.f.next=t:e.b=t,e.f=t}function tg(e,t,n,r){var i=tl(null,null,null);return i.a=new ti(function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(e){o(e)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof tE?o(t):e(i)}catch(e){o(e)}}:o}),i.a.c=e,tv(e,i),i.a}function ty(e,t,n){var r;e.a==to&&(e===n&&(t=ts,n=TypeError("Promise cannot resolve to itself")),e.a=1,tm(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,t_(e),t!=ts||n instanceof tE||(r=n,e.g=!0,te(function(){e.g&&tT.call(null,r)}))))}function tm(e,t,n,r){if(e instanceof ti)return tv(e,tl(t||f,n||null,r)),!0;if(O(e))return e.then(t,n,r),!0;if(g(e))try{var i=e.then;if(v(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,function(e){a||(a=!0,n.call(i,e))},o)}catch(e){o(e)}}(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1}function t_(e){e.h||(e.h=!0,te(e.gc,e))}function tb(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function tw(e,t,n,r){if(n==ts&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,tI(t,n,r);else try{t.c?t.g.call(t.f):tI(t,n,r)}catch(e){tT.call(null,e)}U(tc,t)}function tI(e,t,n){t==ta?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}ti.prototype.then=function(e,t,n){return tg(this,v(e)?e:null,v(t)?t:null,n)},ti.prototype.$goog_Thenable=!0,(r=ti.prototype).oa=function(e,t){return(e=tl(e,e,t)).c=!0,tv(this,e),this},r.o=function(e,t){return tg(this,null,e,t)},r.cancel=function(e){if(this.a==to){var t=new tE(e);te(function(){(function e(t,n){if(t.a==to){if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==t&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==to&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):tb(r),tw(r,o,ts,n)))}t.c=null}else ty(t,ts,n)}})(this,t)},this)}},r.$c=function(e){this.a=to,ty(this,ta,e)},r.ad=function(e){this.a=to,ty(this,ts,e)},r.gc=function(){for(var e;e=tb(this);)tw(this,e,this.a,this.i);this.h=!1};var tT=e7;function tE(e){L.call(this,e)}function tS(){0!=tC&&(tk[y(this)]=this),this.xa=this.xa,this.pa=this.pa}S(tE,L),tE.prototype.name="cancel";var tC=0,tk={};function tN(e){if(!e.xa&&(e.xa=!0,e.Da(),0!=tC)){var t=y(e);if(0!=tC&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete tk[t]}}tS.prototype.xa=!1,tS.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var tA=Object.freeze||function(e){return e},tx=!eH||9<=Number(e4),tP=eH&&!e2("9"),tR=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{u.addEventListener("test",f,t),u.removeEventListener("test",f,t)}catch(e){}return e}();function tD(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function tO(e,t){if(tD.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(eQ){e:{try{eK(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:tL[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}tD.prototype.preventDefault=function(){this.defaultPrevented=!0},S(tO,tD);var tL=tA({2:"touch",3:"pen",4:"mouse"});tO.prototype.preventDefault=function(){tO.ab.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,tP)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},tO.prototype.g=function(){return this.a};var tM="closure_listenable_"+(1e6*Math.random()|0),tF=0;function tj(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Va=i,this.key=++tF,this.va=this.Pa=!1}function tU(e){e.va=!0,e.listener=null,e.proxy=null,e.src=null,e.Va=null}function tq(e){this.src=e,this.a={},this.b=0}function tV(e,t){var n=t.type;n in e.a&&Y(e.a[n],t)&&(tU(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function tB(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.va&&o.listener==t&&!!n==o.capture&&o.Va==r)return i}return -1}tq.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=tB(e,t,r,i);return -1<a?(t=e[a],n||(t.Pa=!1)):((t=new tj(t,this.src,o,!!r,i)).Pa=n,e.push(t)),t};var tK="closure_lm_"+(1e6*Math.random()|0),tW={},tH=0;function tz(e,t,n,r,i){if(r&&r.once)tQ(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)tz(e,t[o],n,r,i);else n=t4(n),e&&e[tM]?t6(e,t,n,g(r)?!!r.capture:!!r,i):tG(e,t,n,!1,r,i)}function tG(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a,s=g(i)?!!i.capture:!!i,u=t1(e);if(u||(e[tK]=u=new tq(e)),!(n=u.add(t,n,r,s,o)).proxy){if(r=a=tx?function(e){return t0.call(a.src,a.listener,e)}:function(e){if(!(e=t0.call(a.src,a.listener,e)))return e},n.proxy=r,r.src=e,r.listener=n,e.addEventListener)tR||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(t$(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");tH++}}function tQ(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)tQ(e,t[o],n,r,i);else n=t4(n),e&&e[tM]?t5(e,t,n,g(r)?!!r.capture:!!r,i):tG(e,t,n,!0,r,i)}function tY(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)tY(e,t[o],n,r,i);else(r=g(r)?!!r.capture:!!r,n=t4(n),e&&e[tM])?(e=e.v,(t=String(t).toString())in e.a&&-1<(n=tB(o=e.a[t],n,r,i))&&(tU(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):e&&(e=t1(e))&&(t=e.a[t.toString()],e=-1,t&&(e=tB(t,n,r,i)),(n=-1<e?t[e]:null)&&tX(n))}function tX(e){if("number"!=typeof e&&e&&!e.va){var t=e.src;if(t&&t[tM])tV(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(t$(n),r):t.addListener&&t.removeListener&&t.removeListener(r),tH--,(n=t1(t))?(tV(n,e),0==n.b&&(n.src=null,t[tK]=null)):tU(e)}}}function t$(e){return e in tW?tW[e]:tW[e]="on"+e}function tJ(e,t,n,r){var i=!0;if((e=t1(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.va&&(o=tZ(o,r),i=i&&!1!==o)}return i}function tZ(e,t){var n=e.listener,r=e.Va||e.src;return e.Pa&&tX(e),n.call(r,t)}function t0(e,t){if(e.va)return!0;if(!tx){if(!t)e:{t=["window","event"];for(var n=u,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new tO(r=t,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=tJ(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=tJ(r[i],e,!1,t),n=n&&o}return n}return tZ(e,new tO(t,this))}function t1(e){return(e=e[tK])instanceof tq?e:null}var t2="__closure_events_fn_"+(1e9*Math.random()>>>0);function t4(e){return v(e)?e:(e[t2]||(e[t2]=function(t){return e.handleEvent(t)}),e[t2])}function t3(){tS.call(this),this.v=new tq(this),this.ac=this,this.gb=null}function t6(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function t5(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function t8(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&tV(e.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function t9(e,t,n){if(v(e))n&&(e=I(e,n));else if(e&&"function"==typeof e.handleEvent)e=I(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:u.setTimeout(e,t||0)}function t7(e){var t=null;return new ti(function(n,r){-1==(t=t9(function(){n(void 0)},e))&&r(Error("Failed to schedule timer."))}).o(function(e){throw u.clearTimeout(t),e})}function ne(e){if(e.W&&"function"==typeof e.W)return e.W();if("string"==typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function nt(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.W||"function"!=typeof e.W){if(p(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function nn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e){if(e instanceof nn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}}function nr(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];ni(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)ni(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function ni(e,t){return Object.prototype.hasOwnProperty.call(e,t)}S(t3,tS),t3.prototype[tM]=!0,t3.prototype.addEventListener=function(e,t,n,r){tz(this,e,t,n,r)},t3.prototype.removeEventListener=function(e,t,n,r){tY(this,e,t,n,r)},t3.prototype.dispatchEvent=function(e){var t,n=this.gb;if(n)for(t=[];n;n=n.gb)t.push(n);n=this.ac;var r=e.type||e;if("string"==typeof e)e=new tD(e,n);else if(e instanceof tD)e.target=e.target||n;else{var i=e;eg(e=new tD(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=t8(a,r,!0,e)&&i}if(i=t8(a=e.b=n,r,!0,e)&&i,i=t8(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=t8(a=e.b=t[o],r,!1,e)&&i;return i},t3.prototype.Da=function(){if(t3.ab.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)tU(n[r]);delete t.a[e],t.b--}}this.gb=null},(r=nn.prototype).W=function(){nr(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.Y=function(){return nr(this),this.a.concat()},r.clear=function(){this.b={},this.c=this.a.length=0},r.get=function(e,t){return ni(this.b,e)?this.b[e]:t},r.set=function(e,t){ni(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var no=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function na(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof na?(this.i=void 0!==t?t:e.i,ns(this,e.c),this.l=e.l,this.a=e.a,nu(this,e.g),this.f=e.f,nc(this,nN(e.b)),this.h=e.h):e&&(n=String(e).match(no))?(this.i=!!t,ns(this,n[1]||"",!0),this.l=np(n[2]||""),this.a=np(n[3]||"",!0),nu(this,n[4]),this.f=np(n[5]||"",!0),nc(this,n[6]||"",!0),this.h=np(n[7]||"")):(this.i=!!t,this.b=new nI(null,this.i))}function ns(e,t,n){e.c=n?np(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function nu(e,t){if(t){if(isNaN(t=Number(t))||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function nc(e,t,n){var r,i;t instanceof nI?(e.b=t,r=e.b,(i=e.i)&&!r.f&&(nT(r),r.c=null,r.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(nS(this,t),nk(this,n,e))},r)),r.f=i):(n||(t=nv(t,nb)),e.b=new nI(t,e.i))}function nl(e,t,n){e.b.set(t,n)}function nh(e,t){return e.b.get(t)}function nf(e){return e instanceof na?new na(e):new na(e,void 0)}function nd(e,t,n,r){var i=new na(null,void 0);return e&&ns(i,e),t&&(i.a=t),n&&nu(i,n),r&&(i.f=r),i}function np(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function nv(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ng),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ng(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}na.prototype.toString=function(){var e=[],t=this.c;t&&e.push(nv(t,ny,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(nv(t,ny,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(nv(n,"/"==n.charAt(0)?n_:nm,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",nv(n,nw)),e.join("")},na.prototype.resolve=function(e){var t=new na(this),n=!!e.c;n?ns(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)nu(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0)){if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}}if(".."==(i=r)||"."==i)r="";else if(es(i,"./")||es(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?nc(t,nN(e.b)):n=!!e.h,n&&(t.h=e.h),t};var ny=/[#\/\?@]/g,nm=/[#\?:]/g,n_=/[#\?]/g,nb=/[#\?@]/g,nw=/#/g;function nI(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function nT(e){e.a||(e.a=new nn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function nE(e){var t=nt(e);if(void 0===t)throw Error("Keys are undefined");var n=new nI(null,void 0);e=ne(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?nk(n,i,o):n.add(i,o)}return n}function nS(e,t){nT(e),t=nA(e,t),ni(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,ni((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&nr(e)))}function nC(e,t){return nT(e),t=nA(e,t),ni(e.a.b,t)}function nk(e,t,n){nS(e,t),0<n.length&&(e.c=null,e.a.set(nA(e,t),J(n)),e.b+=n.length)}function nN(e){var t=new nI;return t.c=e.c,e.a&&(t.a=new nn(e.a),t.b=e.b),t}function nA(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function nx(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";r.push("]");return}if(n instanceof String||n instanceof Number||n instanceof Boolean)n=n.valueOf();else{for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),nO(i,r),r.push(":"),e(t,a,r),o=",");r.push("}");return}}switch(typeof n){case"string":nO(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new nP,e,t),t.join("")}function nP(){}(r=nI.prototype).add=function(e,t){nT(this),this.c=null,e=nA(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.clear=function(){this.a=this.c=null,this.b=0},r.forEach=function(e,t){nT(this),this.a.forEach(function(n,r){W(n,function(n){e.call(t,n,r,this)},this)},this)},r.Y=function(){nT(this);for(var e=this.a.W(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.W=function(e){nT(this);var t=[];if("string"==typeof e)nC(this,e)&&(t=$(t,this.a.get(nA(this,e))));else{e=this.a.W();for(var n=0;n<e.length;n++)t=$(t,e[n])}return t},r.set=function(e,t){return nT(this),this.c=null,nC(this,e=nA(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var nR={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},nD=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function nO(e,t){t.push('"',e.replace(nD,function(e){var t=nR[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),nR[e]=t),t}),'"')}function nL(){var e=n0();return eH&&!!e4&&11==e4||/Edge\/\d+/.test(e)}function nM(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function nF(e,t){t=t||u.window;var n="about:blank";e&&(n=ex(eO(e)||eF)),t.location.href=n}function nj(e){return!!((e=(e||n0()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function nU(e){e=e||u.window;try{e.close()}catch(e){}}function nq(e,t,n){var r,i=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var o=(window.screen.availHeight-n)/2,a=(window.screen.availWidth-t)/2;for(s in t={width:t,height:n,top:0<o?o:0,left:0<a?a:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=n0().toLowerCase(),i&&(t.target=i,es(n,"crios/")&&(t.target="_blank")),n$(n0())==nY&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),i=window,t=n instanceof eA?n:eO(void 0!==n.href?n.href:String(n))||eF,n=e.target||n.target,o=[],e)switch(s){case"width":case"height":case"top":case"left":o.push(s+"="+e[s]);break;case"target":case"noopener":case"noreferrer":break;default:o.push(s+"="+(e[s]?1:0))}var s=o.join(",");if((eh("iPhone")&&!eh("iPod")&&!eh("iPad")||eh("iPad")||eh("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(ey(s=e9(document,"A"),"HTMLAnchorElement"),t=t instanceof eA?t:eL(t),s.href=ex(t),s.setAttribute("target",n),e.noreferrer&&s.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),s.dispatchEvent(e),s={}):e.noreferrer?(s=eq("",i,n,s),e=ex(t),s&&(eG&&es(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),s.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+eB(e)+'">',e=new ej(e=(i=eI())?i.createHTML(e):e,null,eU),i=s.document)&&(i.write((r=e)instanceof ej&&r.constructor===ej?r.a:(F("expected object of type SafeHtml, got '"+r+"' of type "+d(r)),"type_error:SafeHtml")),i.close())):(s=eq(t,i,n,s))&&e.noopener&&(s.opener=null),s)try{s.focus()}catch(e){}return s}var nV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nB=/^[^@]+@[^@]+$/;function nK(){var e=null;return new ti(function(t){"complete"==u.document.readyState?t():tQ(window,"load",e=function(){t()})}).o(function(t){throw tY(window,"load",e),t})}function nW(e){return e=e||n0(),!("file:"!==n6()&&"ionic:"!==n6()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function nH(){var e=u.window;try{return!(!e||e==e.top)}catch(e){return!1}}function nz(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function nG(){return x.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":x.default.INTERNAL.hasOwnProperty("node")?"Node":nz()?"Worker":"Browser"}function nQ(){var e=nG();return"ReactNative"===e||"Node"===e}var nY="Firefox",nX="Chrome";function n$(e){var t=e.toLowerCase();return es(t,"opera/")||es(t,"opr/")||es(t,"opios/")?"Opera":es(t,"iemobile")?"IEMobile":es(t,"msie")||es(t,"trident/")?"IE":es(t,"edge/")?"Edge":es(t,"firefox/")?nY:es(t,"silk/")?"Silk":es(t,"blackberry")?"Blackberry":es(t,"webos")?"Webos":!es(t,"safari/")||es(t,"chrome/")||es(t,"crios/")||es(t,"android")?!es(t,"chrome/")&&!es(t,"crios/")||es(t,"edge/")?es(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":nX:"Safari"}var nJ={md:"FirebaseCore-web",od:"FirebaseUI-web"};function nZ(e,t){t=t||[];var n,r=[],i={};for(n in nJ)i[nJ[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=nG())?r=n$(i=n0()):"Worker"===r&&(r=n$(i=n0())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function n0(){return u.navigator&&u.navigator.userAgent||""}function n1(e,t){e=e.split("."),t=t||u;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function n2(){try{var e=u.localStorage,t=re();if(e)return e.setItem(t,"1"),e.removeItem(t),!nL()||!!u.indexedDB}catch(e){return nz()&&!!u.indexedDB}return!1}function n4(){return(n3()||"chrome-extension:"===n6()||nW())&&!nQ()&&n2()&&!nz()}function n3(){return"http:"===n6()||"https:"===n6()}function n6(){return u.location&&u.location.protocol||null}function n5(e){return!nj(e=e||n0())&&n$(e)!=nY}function n8(e){return void 0===e?null:nx(e)}function n9(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function n7(e){if(null!==e)return JSON.parse(e)}function re(e){return e||Math.floor(1e9*Math.random()).toString()}function rt(e){return!("Safari"==n$(e=e||n0())||e.toLowerCase().match(/iphone|ipad|ipod/))}function rn(){var e=u.___jsl;if(e&&e.H){for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}}function rr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=n0(),t=nG(),this.b=nj(e)||"ReactNative"===t}function ri(){var e=u.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function ro(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function ra(){return!(!n1("fireauth.oauthhelper",u)&&!n1("fireauth.iframe",u))}rr.prototype.get=function(){var e=u.navigator;return(e&&"boolean"==typeof e.onLine&&(n3()||"chrome-extension:"===n6()||void 0!==e.connection)?e.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};var rs={};function ru(e){rs[e]||(rs[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var rc={};Object.defineProperty(rc,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(rc,"abcd",{configurable:!0,enumerable:!0,value:2}),oJ=2==rc.abcd}catch(e){oJ=!1}function rl(e,t,n){oJ?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function rh(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&rl(e,n,t[n])}function rf(e){var t={};return rh(t,e),t}function rd(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)rl(t,n,rd(e[n]));return t}function rp(e){var t=e&&(e[r_]?"phone":null);if(t&&e&&e[rm]){rl(this,"uid",e[rm]),rl(this,"displayName",e[rg]||null);var n=null;e[ry]&&(n=new Date(e[ry]).toUTCString()),rl(this,"enrollmentTime",n),rl(this,"factorId",t)}else throw new k("internal-error","Internal assert: invalid MultiFactorInfo object")}function rv(e){try{var t=new rb(e)}catch(e){t=null}return t}rp.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var rg="displayName",ry="enrolledAt",rm="mfaEnrollmentId",r_="phoneInfo";function rb(e){rp.call(this,e),rl(this,"phoneNumber",e[r_])}function rw(e){var t={},n=e[rS],r=e[rk],i=e[rN];if(e=rv(e[rC]),!i||i!=rT&&i!=rE&&!n||i==rE&&!r||i==rI&&!e)throw Error("Invalid checkActionCode response!");i==rE?(t[rx]=n||null,t[rR]=n||null,t[rA]=r):(t[rx]=r||null,t[rR]=r||null,t[rA]=n||null),t[rP]=e||null,rl(this,rO,i),rl(this,rD,rd(t))}S(rb,rp),rb.prototype.w=function(){var e=rb.ab.w.call(this);return e.phoneNumber=this.phoneNumber,e};var rI="REVERT_SECOND_FACTOR_ADDITION",rT="EMAIL_SIGNIN",rE="VERIFY_AND_CHANGE_EMAIL",rS="email",rC="mfaInfo",rk="newEmail",rN="requestType",rA="email",rx="fromEmail",rP="multiFactorInfo",rR="previousEmail",rD="data",rO="operation";function rL(e){var t=nh(e=nf(e),rM)||null,n=nh(e,rF)||null,r=nh(e,rq)||null;if(r=r&&rB[r]||null,!t||!n||!r)throw new k("argument-error",rM+", "+rF+"and "+rq+" are required in a valid action code URL.");rh(this,{apiKey:t,operation:r,code:n,continueUrl:nh(e,rj)||null,languageCode:nh(e,rU)||null,tenantId:nh(e,rV)||null})}var rM="apiKey",rF="oobCode",rj="continueUrl",rU="languageCode",rq="mode",rV="tenantId",rB={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:rI,signIn:rT,verifyAndChangeEmail:rE,verifyEmail:"VERIFY_EMAIL"};function rK(e){try{return new rL(e)}catch(e){return null}}function rW(e){var t=e[rY];if(void 0===t)throw new k("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new k("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[rH];if(n&&"object"==typeof n){t=n[rJ];var r=n[rX];if(n=n[r$],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new k("argument-error",rX+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new k("argument-error",r$+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new k("argument-error",rJ+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new k("missing-android-pkg-name")}}else if(void 0!==n)throw new k("argument-error",rH+" property must be a non null object when specified.");if(this.f=null,(t=e[rQ])&&"object"==typeof t){if("string"==typeof(t=t[rZ])&&t.length)this.f=t;else if(void 0!==t)throw new k("argument-error",rZ+" property must be a non empty string when specified.")}else if(void 0!==t)throw new k("argument-error",rQ+" property must be a non null object when specified.");if(void 0!==(t=e[rG])&&"boolean"!=typeof t)throw new k("argument-error",rG+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[rz])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new k("argument-error",rz+" property must be a non empty string when specified.");this.i=e||null}var rH="android",rz="dynamicLinkDomain",rG="handleCodeInApp",rQ="iOS",rY="url",rX="installApp",r$="minimumVersion",rJ="packageName",rZ="bundleId";function r0(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var r1=null;function r2(e){var t=r3(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function r4(e){try{return new r2(e)}catch(e){return null}}function r3(e){if(!e||3!=(e=e.split(".")).length)return null;e=e[1];for(var t=(4-e.length%4)%4,n=0;n<t;n++)e+=".";try{var r,i,o=(r=e,i=[],function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=r1[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}(function(){if(!r1){r1={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===r1[o]&&(r1[o]=i)}}})();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(r,function(e){i.push(e)}),i);for(e=[],n=t=0;t<o.length;){var a=o[t++];if(128>a)e[n++]=String.fromCharCode(a);else if(191<a&&224>a){var s=o[t++];e[n++]=String.fromCharCode((31&a)<<6|63&s)}else if(239<a&&365>a){s=o[t++];var u=o[t++],c=o[t++],l=((7&a)<<18|(63&s)<<12|(63&u)<<6|63&c)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(1023&l))}else s=o[t++],u=o[t++],e[n++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&u)}return JSON.parse(e.join(""))}catch(e){}return null}r2.prototype.T=function(){return this.f},r2.prototype.l=function(){return this.c},r2.prototype.toString=function(){return this.h};var r6="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),r5=["client_id","response_type","scope","redirect_uri","state"],r8={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:r5},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:r5},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:r5},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:r6},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function r9(e){for(var t in r8)if(r8[t].fa==e)return r8[t];return null}function r7(e){var t={};t["facebook.com"]=io,t["google.com"]=is,t["github.com"]=ia,t["twitter.com"]=iu;var n=e&&e[it];try{if(n)return t[n]?new t[n](e):new ii(e);if(void 0!==e[ie])return new ir(e)}catch(e){}return null}var ie="idToken",it="providerId";function ir(e){var t=e[it];if(!t&&e[ie]){var n=r4(e[ie]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");("anonymous"==t||"custom"==t)&&(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),rl(this,"providerId",t),rl(this,"isNewUser",n)}function ii(e){ir.call(this,e),rl(this,"profile",rd((e=n7(e.rawUserInfo||"{}"))||{}))}function io(e){if(ii.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ia(e){if(ii.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");rl(this,"username",this.profile&&this.profile.login||null)}function is(e){if(ii.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function iu(e){if(ii.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");rl(this,"username",e.screenName||null)}function ic(e){var t=nf(e),n=nh(t,"link"),r=nh(nf(n),"link");return t=nh(t,"deep_link_id"),nh(nf(t),"link")||t||r||n||e}function il(e,t){if(!e&&!t)throw new k("internal-error","Internal assert: no raw session string available");if(e&&t)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?ih:id}S(ii,ir),S(io,ii),S(ia,ii),S(is,ii),S(iu,ii);var ih="enroll",id="signin";function ip(){}function iv(e,t){return e.then(function(e){if(e[o1]){var n=r4(e[o1]);if(!n||t!=n.i)throw new k("user-mismatch");return e}throw new k("user-mismatch")}).o(function(e){throw e&&e.code&&e.code==A+"user-not-found"?new k("user-mismatch"):e})}function ig(e,t){if(t)this.a=t;else throw new k("internal-error","failed to construct a credential");rl(this,"providerId",e),rl(this,"signInMethod",e)}function iy(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function im(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new ig(e.providerId,e.pendingToken)}catch(e){}return null}function i_(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&rl(this,"idToken",t.idToken),t.accessToken&&rl(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&rl(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else if(t.oauthToken&&t.oauthTokenSecret)rl(this,"accessToken",t.oauthToken),rl(this,"secret",t.oauthTokenSecret);else throw new k("internal-error","failed to construct a credential");rl(this,"providerId",e),rl(this,"signInMethod",n)}function ib(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:nE(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function iw(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new i_(e.providerId,t,e.signInMethod)}catch(e){}}return null}function iI(e,t){this.Qc=t||[],rh(this,{providerId:e,isOAuthProvider:!0}),this.Ib={},this.pb=(r9(e)||{}).Ja||null,this.ob=null}function iT(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');iI.call(this,e,[])}function iE(e){iI.call(this,e,r5),this.a=[]}function iS(){iE.call(this,"facebook.com")}function iC(e){if(!e)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return g(e)&&(t=e.accessToken),(new iS).credential({accessToken:t})}function ik(){iE.call(this,"github.com")}function iN(e){if(!e)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return g(e)&&(t=e.accessToken),(new ik).credential({accessToken:t})}function iA(){iE.call(this,"google.com"),this.Ca("profile")}function ix(e,t){var n=e;return g(e)&&(n=e.idToken,t=e.accessToken),(new iA).credential({idToken:n,accessToken:t})}function iP(){iI.call(this,"twitter.com",r6)}function iR(e,t){var n=e;if(g(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new i_("twitter.com",n,"twitter.com")}function iD(e,t,n){this.a=e,this.f=t,rl(this,"providerId","password"),rl(this,"signInMethod",n===iL.EMAIL_LINK_SIGN_IN_METHOD?iL.EMAIL_LINK_SIGN_IN_METHOD:iL.EMAIL_PASSWORD_SIGN_IN_METHOD)}function iO(e){return e&&e.email&&e.password?new iD(e.email,e.password,e.signInMethod):null}function iL(){rh(this,{providerId:"password",isOAuthProvider:!1})}function iM(e,t){if(!(t=iF(t)))throw new k("argument-error","Invalid email link!");return new iD(e,t.code,iL.EMAIL_LINK_SIGN_IN_METHOD)}function iF(e){return(e=rK(e=ic(e)))&&e.operation===rT?e:null}function ij(e){if(!(e.eb&&e.cb||e.La&&e.ea))throw new k("internal-error");this.a=e,rl(this,"providerId","phone"),this.fa="phone",rl(this,"signInMethod","phone")}function iU(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return W(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){e[n]&&(t[n]=e[n])}),new ij(t)}return null}function iq(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.eb,code:e.a.cb}}function iV(e){try{this.a=e||x.default.auth()}catch(e){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}rh(this,{providerId:"phone",isOAuthProvider:!1})}function iB(e,t){if(!e)throw new k("missing-verification-id");if(!t)throw new k("missing-verification-code");return new ij({eb:e,cb:t})}function iK(e){if(e.temporaryProof&&e.phoneNumber)return new ij({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return ix(o,n);case"facebook.com":return iC(n);case"github.com":return iN(n);case"twitter.com":return iR(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new ig(t,a):new i_(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new iE(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function iW(e){if(!e.isOAuthProvider)throw new k("invalid-oauth-provider")}function iH(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,this.g||this.a){if(this.g&&this.a||this.g&&!this.f)throw new k("invalid-auth-event")}else throw new k("invalid-auth-event")}function iz(e){return(e=e||{}).type?new iH(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&N(e.error),e.postBody,e.tenantId):null}function iG(){this.b=null,this.a=[]}il.prototype.Ha=function(){return this.a?th(this.a):th(this.b)},il.prototype.w=function(){return this.type==ih?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ip.prototype.ka=function(){},ip.prototype.b=function(){},ip.prototype.c=function(){},ip.prototype.w=function(){},ig.prototype.ka=function(e){return ad(e,iy(this))},ig.prototype.b=function(e,t){var n=iy(this);return n.idToken=t,ap(e,n)},ig.prototype.c=function(e,t){return iv(av(e,iy(this)),t)},ig.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},i_.prototype.ka=function(e){return ad(e,ib(this))},i_.prototype.b=function(e,t){var n=ib(this);return n.idToken=t,ap(e,n)},i_.prototype.c=function(e,t){return iv(av(e,ib(this)),t)},i_.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},iI.prototype.Ka=function(e){return this.Ib=ep(e),this},S(iT,iI),S(iE,iI),iE.prototype.Ca=function(e){return Q(this.a,e)||this.a.push(e),this},iE.prototype.Qb=function(){return J(this.a)},iE.prototype.credential=function(e,t){var n;if(!(n=g(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new i_(this.providerId,n,this.providerId)},S(iS,iE),rl(iS,"PROVIDER_ID","facebook.com"),rl(iS,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(ik,iE),rl(ik,"PROVIDER_ID","github.com"),rl(ik,"GITHUB_SIGN_IN_METHOD","github.com"),S(iA,iE),rl(iA,"PROVIDER_ID","google.com"),rl(iA,"GOOGLE_SIGN_IN_METHOD","google.com"),S(iP,iI),rl(iP,"PROVIDER_ID","twitter.com"),rl(iP,"TWITTER_SIGN_IN_METHOD","twitter.com"),iD.prototype.ka=function(e){return this.signInMethod==iL.EMAIL_LINK_SIGN_IN_METHOD?aX(e,aT,{email:this.a,oobCode:this.f}):aX(e,aH,{email:this.a,password:this.f})},iD.prototype.b=function(e,t){return this.signInMethod==iL.EMAIL_LINK_SIGN_IN_METHOD?aX(e,aE,{idToken:t,email:this.a,oobCode:this.f}):aX(e,aF,{idToken:t,email:this.a,password:this.f})},iD.prototype.c=function(e,t){return iv(this.ka(e),t)},iD.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},rh(iL,{PROVIDER_ID:"password"}),rh(iL,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),rh(iL,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),ij.prototype.ka=function(e){return e.fb(iq(this))},ij.prototype.b=function(e,t){var n=iq(this);return n.idToken=t,aX(e,aG,n)},ij.prototype.c=function(e,t){var n=iq(this);return n.operation="REAUTH",iv(e=aX(e,aQ,n),t)},ij.prototype.w=function(){var e={providerId:"phone"};return this.a.eb&&(e.verificationId=this.a.eb),this.a.cb&&(e.verificationCode=this.a.cb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},iV.prototype.fb=function(e,t){var n=this.a.a;return th(t.verify()).then(function(r){if("string"!=typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===t.type){var i=g(e)?e.session:null,o=g(e)?e.phoneNumber:e;return(i&&i.type==ih?i.Ha().then(function(e){return aX(n,aU,{idToken:e,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}}).then(function(e){return e.phoneSessionInfo.sessionInfo})}):i&&i.type==id?i.Ha().then(function(t){return aX(n,aq,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}}).then(function(e){return e.phoneResponseInfo.sessionInfo})}):aX(n,aL,{phoneNumber:o,recaptchaToken:r})).then(function(e){return"function"==typeof t.reset&&t.reset(),e},function(e){throw"function"==typeof t.reset&&t.reset(),e})}throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')})},rh(iV,{PROVIDER_ID:"phone"}),rh(iV,{PHONE_SIGN_IN_METHOD:"phone"}),iH.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},iH.prototype.T=function(){return this.h},iH.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var iQ=null;function iY(e){var t="unauthorized-domain",n=void 0,r=nf(e);e=r.a,"chrome-extension"==(r=r.c)?n=eV("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=eV("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",k.call(this,t,n)}function iX(e,t,n){k.call(this,e,n),(e=t||{}).Jb&&rl(this,"email",e.Jb),e.ea&&rl(this,"phoneNumber",e.ea),e.credential&&rl(this,"credential",e.credential),e.Zb&&rl(this,"tenantId",e.Zb)}function i$(e){if(e.code){var t=e.code||"";0==t.indexOf(A)&&(t=t.substring(A.length));var n={credential:iK(e),Zb:e.tenantId};if(e.email)n.Jb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new k(t,e.message||void 0);return new iX(t,n,e.message)}return null}function iJ(){}function iZ(e){return e.c||(e.c=e.b())}function i0(){}function i1(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function i2(){}function i4(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Sb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function i3(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function i6(e,t,n){this.reset(e,t,n,void 0,void 0)}S(iY,k),S(iX,k),iX.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&eg(e,t),e},iX.prototype.toJSON=function(){return this.w()},iJ.prototype.c=null,S(i0,iJ),i0.prototype.a=function(){var e=i1(this);return e?new ActiveXObject(e):new XMLHttpRequest},i0.prototype.b=function(){var e={};return i1(this)&&(e[0]=!0,e[1]=!0),e},oZ=new i0,S(i2,iJ),i2.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new i4;throw Error("Unsupported browser")},i2.prototype.b=function(){return{}},(r=i4.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},r.send=function(e){if(e){if("string"==typeof e)this.a.send(e);else throw Error("Only string data is supported")}else this.a.send()},r.abort=function(){this.a.abort()},r.setRequestHeader=function(){},r.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},r.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,i3(this,4)},r.Sb=function(){this.status=500,this.response=this.responseText="",i3(this,4)},r.vc=function(){this.Sb()},r.rc=function(){this.status=200,i3(this,1)},r.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},i6.prototype.a=null;var i5=0;function i8(e){this.f=e,this.b=this.c=this.a=null}function i9(e,t){this.name=e,this.value=t}i6.prototype.reset=function(e,t,n,r,i){"number"==typeof i||i5++,r||E(),delete this.a},i9.prototype.toString=function(){return this.name};var i7=new i9("SEVERE",1e3),oe=new i9("WARNING",900),ot=new i9("CONFIG",700),on=new i9("FINE",500);i8.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(F("Root logger has no level set."),null)}(this).value)for(v(t)&&(t=t()),e=new i6(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var or={},oi=null;function oo(e){if(oi||(oi=new i8(""),or[""]=oi,oi.c=ot),!(t=or[e])){t=new i8(e);var t,n=e.lastIndexOf("."),r=e.substr(n+1);(n=oo(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,or[e]=t}return t}function oa(e,t){e&&e.log(on,t,void 0)}function os(e){this.f=e}function ou(e){t3.call(this),this.u=e,this.h=void 0,this.readyState=oc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=oo("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(os,iJ),os.prototype.a=function(){return new ou(this.f)},os.prototype.b=(oW={},function(){return oW}),S(ou,t3);var oc=0;function ol(e){e.c.read().then(e.pc.bind(e)).catch(e.Ua.bind(e))}function oh(e){e.readyState=4,e.g=null,e.c=null,e.m=null,of(e)}function of(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function od(e){t3.call(this),this.headers=new nn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=op,this.u=this.S=!1}(r=ou.prototype).open=function(e,t){if(this.readyState!=oc)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,of(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Ua.bind(this))},r.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,oh(this)),this.readyState=oc},r.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,of(this)),this.a&&(this.readyState=3,of(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==u.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,ol(this)):e.text().then(this.tc.bind(this),this.Ua.bind(this)))))},r.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?oh(this):of(this),3==this.readyState&&ol(this)}},r.tc=function(e){this.a&&(this.response=this.responseText=e,oh(this))},r.sc=function(e){this.a&&(this.response=e,oh(this))},r.Ua=function(e){var t=this.i;t&&t.log(oe,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&oh(this)},r.setRequestHeader=function(e,t){this.l.append(e,t)},r.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(oe,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},r.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(oe,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ou.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),S(od,t3);var op="";od.prototype.b=oo("goog.net.XhrIo");var ov=/^https?$/i,og=["POST","PUT"];function oy(e){return"content-type"==e.toLowerCase()}function om(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,o_(e),ow(e)}function o_(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function ob(e){if(e.c&&void 0!==s){if(e.C[1]&&4==oT(e)&&2==oE(e))oa(e.b,oS(e,"Local request error detected and ignored"));else if(e.i&&4==oT(e))t9(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==oT(e)){oa(e.b,oS(e,"Request complete")),e.c=!1;try{var t,n,r=oE(e);switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break;default:i=!1}if(!(t=i)){if(n=0===r){var o=String(e.l).match(no)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}n=!ov.test(o?o.toLowerCase():"")}t=n}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<oT(e)?e.a.statusText:""}catch(t){oa(e.b,"Can not get status: "+t.message),c=""}e.h=c+" ["+oE(e)+"]",o_(e)}}finally{ow(e)}}}}function ow(e,t){if(e.a){oI(e);var n=e.a,r=e.C[0]?f:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(i7,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function oI(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(u.clearTimeout(e.s),e.s=null)}function oT(e){return e.a?e.a.readyState:0}function oE(e){try{return 2<oT(e)?e.a.status:-1}catch(e){return -1}}function oS(e,t){return t+" ["+e.R+" "+e.l+" "+oE(e)+"]"}function oC(e){this.g=[],this.u=oF,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ok(e,t,n){e.a=!0,e.c=n,e.f=!t,oP(e)}function oN(e){if(e.a){if(!e.v)throw new oR(e);e.v=!1}}function oA(e,t,n,r){e.g.push([t,n,r]),e.a&&oP(e)}function ox(e){return G(e.g,function(e){return v(e[1])})}function oP(e){if(e.h&&e.a&&ox(e)){var t=e.h,n=oL[t];n&&(u.clearTimeout(n.a),delete oL[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.s,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(O(t)||"function"==typeof u.Promise&&t instanceof u.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,ox(e)||(n=!0)}}e.c=t,r&&(s=I(e.m,e,!0),r=I(e.m,e,!1),t instanceof oC?(oA(t,s,r),t.C=!0):t.then(s,r)),n&&(oL[(t=new oO(t)).a]=t,e.h=t.a)}function oR(){L.call(this)}function oD(){L.call(this)}function oO(e){this.a=u.setTimeout(I(this.c,this),0),this.b=e}(r=od.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",oa(this.b,oS(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(){this.a&&this.c&&(oa(this.b,oS(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ow(this))},r.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ow(this,!0)),od.ab.Da.call(this)},r.Vb=function(){this.xa||(this.O||this.i||this.f?ob(this):this.Jc())},r.Jc=function(){ob(this)},r.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case op:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(i7,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return oa(this.b,"Can not get response: "+e.message),null}},oC.prototype.cancel=function(e){if(this.a)this.c instanceof oC&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new oD(this),oN(this),ok(this,!1,e))}},oC.prototype.m=function(e,t){this.i=!1,ok(this,e,t)},oC.prototype.then=function(e,t,n){var r,i,o=new ti(function(e,t){r=e,i=t});return oA(this,r,function(e){e instanceof oD?o.cancel():i(e)}),o.then(e,t,n)},oC.prototype.$goog_Thenable=!0,S(oR,L),oR.prototype.message="Deferred has already fired",oR.prototype.name="AlreadyCalledError",S(oD,L),oD.prototype.message="Deferred was canceled",oD.prototype.name="CanceledError",oO.prototype.c=function(){throw delete oL[this.a],this.b};var oL={};function oM(e){var t,n,r={},i=r.document||document,o=eE(e).toString(),a=e9(document,"SCRIPT"),s={Wb:a,Ma:void 0},c=new oC(s),f=null,d=null!=r.timeout?r.timeout:5e3;return 0<d&&(f=window.setTimeout(function(){oj(a,!0);var e=new oV(oq,"Timeout reached for loading script "+o);oN(c),ok(c,!1,e)},d),s.Ma=f),a.onload=a.onreadystatechange=function(){a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(oj(a,r.xd||!1,f),oN(c),ok(c,!0,null))},a.onerror=function(){oj(a,!0,f);var e=new oV(oU,"Error while loading script "+o);oN(c),ok(c,!1,e)},eg(s=r.attributes||{},{type:"text/javascript",charset:"UTF-8"}),e5(a,s),n=e,ey(a,"HTMLScriptElement"),a.src=eE(n),(n=a.ownerDocument&&a.ownerDocument.defaultView)&&n!=u?n=h(n.document):(null===l&&(l=h(u.document)),n=l),n&&a.setAttribute("nonce",n),((t=(i||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:i.documentElement).appendChild(a),c}function oF(){if(this&&this.Wb){var e=this.Wb;e&&"SCRIPT"==e.tagName&&oj(e,!0,this.Ma)}}function oj(e,t,n){null!=n&&u.clearTimeout(n),e.onload=f,e.onerror=f,e.onreadystatechange=f,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}var oU=0,oq=1;function oV(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),L.call(this,n),this.code=e}function oB(e){this.f=e}function oK(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||o2,this.g=ep(e.secureTokenHeaders||o4),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||o3,this.a=ep(e.firebaseHeaders||o6),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==nG(),!(n=u.XMLHttpRequest||n&&x.default.INTERNAL.node&&x.default.INTERNAL.node.XMLHttpRequest)&&!nz())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,nz()?this.f=new os(self):nQ()?this.f=new oB(n):this.f=new i2,this.b=null}S(oV,L),S(oB,iJ),oB.prototype.a=function(){return new this.f},oB.prototype.b=function(){return{}};var oW,oH,oz,oG,oQ,oY,oX,o$,oJ,oZ,o0,o1="idToken",o2=new rr(3e4,6e4),o4={"Content-Type":"application/x-www-form-urlencoded"},o3=new rr(3e4,6e4),o6={"Content-Type":"application/json"};function o5(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function o8(e,t){t&&(e.l=o9("https://securetoken.googleapis.com/v1/token",t),e.h=o9("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=o9("https://identitytoolkit.googleapis.com/v2/",t))}function o9(e,t){return e=nf(e),t=nf(t.url),e.f=e.a+e.f,ns(e,t.c),e.a=t.a,nu(e,t.g),e.toString()}function o7(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function ae(e,t,n,r,i,o,a){var s;!((!(s=n$(s=n0())!=nX?null:(s=s.match(/\sChrome\/(\d+)/i))&&2==s.length?parseInt(s[1],10):null)||!(30>s))&&(!eH||!e4||9<e4)||nz())?(o0||(o0=new ti(function(e,t){var n,r;n=e,r=t,((window.gapi||{}).client||{}).request?n():(u[an]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},oA(oM(eS(at,{onload:an})),null,function(){r(Error("CORS_UNSUPPORTED"))},void 0))})),e=I(e.s,e)):e=I(e.u,e),e(t,n,r,i,o,a)}oK.prototype.T=function(){return this.b},oK.prototype.u=function(e,t,n,r,i,o){if(nz()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new od(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}t6(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return oa(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}t&&t(e)}),t5(a,"ready",function(){s&&clearTimeout(s),tN(this)}),t5(a,"timeout",function(){s&&clearTimeout(s),tN(this),t&&t(null)}),function(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():oZ.a(),e.C=e.D?iZ(e.D):iZ(oZ),e.a.onreadystatechange=I(e.Vb,e);try{oa(e.b,oS(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){oa(e.b,oS(e,"Error opening Xhr: "+t.message)),om(e,t);return}t=r||"";var o,a=new nn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"==typeof e)W(e,t,void 0);else for(var n=nt(e),r=ne(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,function(e,t){a.set(t,e)}),i=function(e){e:{for(var t=oy,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(a.Y()),r=u.FormData&&t instanceof u.FormData,!Q(og,n)||i||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(e,t){this.a.setRequestHeader(t,e)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{oI(e),0<e.g&&(e.u=(o=e.a,eH&&e2(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),oa(e.b,oS(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=I(e.Ma,e)):e.s=t9(e.Ma,e.g,e)),oa(e.b,oS(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){oa(e.b,oS(e,"Send error: "+t.message)),om(e,t)}}(a,e,n,r,i)};var at=new em(ew,"https://apis.google.com/js/client.js?onload=%{onload}"),an="__fcb"+Math.floor(1e6*Math.random()).toString();function ar(e,t,n,r,i,o,a){var s=nf(t+n);nl(s,"key",e.c),a&&nl(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&nl(s,c,i[c]);return new ti(function(t,n){ae(e,s.toString(),function(e){e?e.error?n(aJ(e,o||{})):t(e):n(new k("network-request-failed"))},r,u?void 0:nx(n9(i)),e.a,e.v.get())})}function ai(e){if("string"!=typeof(e=e.email)||!nB.test(e))throw new k("invalid-email")}function ao(e){"email"in e&&ai(e)}function aa(e){if(!e[o1]){if(e.mfaPendingCredential)throw new k("multi-factor-auth-required",null,ep(e));throw new k("internal-error")}}function as(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new k("internal-error")}else{if(!e.sessionInfo)throw new k("missing-verification-id");if(!e.code)throw new k("missing-verification-code")}}oK.prototype.s=function(e,t,n,r,i){var o=this;o0.then(function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})}).o(function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},oK.prototype.zb=function(){return aX(this,aj,{})},oK.prototype.Bb=function(e,t){return aX(this,aM,{idToken:e,email:t})},oK.prototype.Cb=function(e,t){return aX(this,aF,{idToken:e,password:t})};var au={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ac(e){if(!e.phoneVerificationInfo)throw new k("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new k("missing-verification-code")}function al(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new k("internal-error")}function ah(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&nC(e=new nI(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function af(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=i$(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=i$(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=i$(e)):e.errorMessage&&(t=a$(e.errorMessage)),t)throw t;aa(e)}function ad(e,t){return t.returnIdpCredential=!0,aX(e,aV,t)}function ap(e,t){return t.returnIdpCredential=!0,aX(e,aK,t)}function av(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,aX(e,aB,t)}function ag(e){if(!e.oobCode)throw new k("invalid-action-code")}(r=oK.prototype).Db=function(e,t){var n={idToken:e},r=[];return ef(au,function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),aX(this,aM,n)},r.vb=function(e,t){return eg(e={requestType:"PASSWORD_RESET",email:e},t),aX(this,aP,e)},r.wb=function(e,t){return eg(e={requestType:"EMAIL_SIGNIN",email:e},t),aX(this,aN,e)},r.ub=function(e,t){return eg(e={requestType:"VERIFY_EMAIL",idToken:e},t),aX(this,aA,e)},r.Eb=function(e,t,n){return eg(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),aX(this,ax,e)},r.fb=function(e){return aX(this,az,e)},r.nb=function(e,t){return aX(this,aO,{oobCode:e,newPassword:t})},r.Ra=function(e){return aX(this,am,{oobCode:e})},r.jb=function(e){return aX(this,ay,{oobCode:e})};var ay={endpoint:"setAccountInfo",A:ag,Z:"email",B:!0},am={endpoint:"resetPassword",A:ag,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new k("internal-error")},B:!0},a_={endpoint:"signupNewUser",A:function(e){if(ai(e),!e.password)throw new k("weak-password")},G:aa,V:!0,B:!0},ab={endpoint:"createAuthUri",B:!0},aw={endpoint:"deleteAccount",N:["idToken"]},aI={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new k("internal-error")}},aT={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ai,G:aa,V:!0,B:!0},aE={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ai,G:aa,V:!0},aS={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ac,G:aa,B:!0,Na:!0},aC={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ac,G:aa,B:!0,Na:!0},ak={endpoint:"getAccountInfo"},aN={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new k("internal-error");ai(e)},Z:"email",B:!0},aA={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new k("internal-error")},Z:"email",B:!0},ax={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new k("internal-error")},Z:"email",B:!0},aP={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new k("internal-error");ai(e)},Z:"email",B:!0},aR={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},aD={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new k("internal-error")}},aO={endpoint:"resetPassword",A:ag,Z:"email",B:!0},aL={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},aM={endpoint:"setAccountInfo",N:["idToken"],A:ao,V:!0},aF={endpoint:"setAccountInfo",N:["idToken"],A:function(e){if(ao(e),!e.password)throw new k("weak-password")},G:aa,V:!0},aj={endpoint:"signupNewUser",G:aa,V:!0,B:!0},aU={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new k("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},aq={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},aV={endpoint:"verifyAssertion",A:al,Ya:ah,G:af,V:!0,B:!0},aB={endpoint:"verifyAssertion",A:al,Ya:ah,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new k("user-not-found");if(e.errorMessage)throw a$(e.errorMessage);aa(e)},V:!0,B:!0},aK={endpoint:"verifyAssertion",A:function(e){if(al(e),!e.idToken)throw new k("internal-error")},Ya:ah,G:af,V:!0},aW={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new k("invalid-custom-token")},G:aa,V:!0,B:!0},aH={endpoint:"verifyPassword",A:function(e){if(ai(e),!e.password)throw new k("wrong-password")},G:aa,V:!0,B:!0},az={endpoint:"verifyPhoneNumber",A:as,G:aa,B:!0},aG={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new k("internal-error");as(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",i$(e);aa(e)}},aQ={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:as,G:aa,B:!0},aY={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[o1]^!!e.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function aX(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.N))return tf(new k("internal-error"));var r,i=!!t.Na,o=t.Ub||"POST";return th(n).then(t.A).then(function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),i?ar(e,e.i,t.endpoint,o,n,t.Hb,t.lb||!1):ar(e,e.h,t.endpoint,o,n,t.Hb,t.lb||!1)}).then(function(e){return r=e,t.Ya?t.Ya(n,r):r}).then(t.G).then(function(){if(!t.Z)return r;if(!(t.Z in r))throw new k("internal-error");return r[t.Z]})}function a$(e){return aJ({error:{errors:[{message:e}],code:400,message:e}})}function aJ(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",eg(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],t);return!t&&e&&(t=n8(e)),new k("internal-error",t)}function aZ(e){var t;this.b=e,this.a=null,this.rb=(t=this,(a4||(a4=new ti(function(e,t){function n(){rn(),n1("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){rn(),t(Error("Network Error"))},timeout:a1.get()})}if(n1("gapi.iframes.Iframe"))e();else if(n1("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){n1("gapi.load")?n():t(Error("Network Error"))},th(oM(r=eS(a0,{onload:r}))).o(function(){t(Error("Network Error"))})}}).o(function(e){throw a4=null,e}))).then(function(){return new ti(function(e,n){n1("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:n1("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},a2.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})}))}var a0=new em(ew,"https://apis.google.com/js/api.js?onload=%{onload}"),a1=new rr(3e4,6e4),a2=new rr(5e3,15e3),a4=null;function a3(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,e=this.g?nd((e=nf(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):nd("https",this.l,null,"/__/auth/iframe"),this.a=e,nl(this.a,"apiKey",this.h),nl(this.a,"appName",this.i),this.b=null,this.c=[]}function a6(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function a5(e){try{return x.default.app(e).auth().Ga()}catch(e){return[]}}function a8(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function a9(e){var t=nM();return aX(e,aR,{}).then(function(e){return e.authorizedDomains||[]}).then(function(e){e:{var n=nf(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n;if(a=0==o.indexOf("chrome-extension://")?nf(o).a==a&&"chrome-extension"==r:("http"==r||"https"==r)&&(nV.test(o)?a==o:RegExp("^(.+\\."+(o=o.split(".").join("\\."))+"|"+o+")$","i").test(a))){e=!0;break e}}e=!1}if(!e)throw new iY(nM())})}function a7(e){return e.m||(e.m=nK().then(function(){if(!e.u){var t=e.c,n=e.i,r=a5(e.b),i=new a3(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=J(r||[]),e.u=i.toString()}e.v=new aZ(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.rb.then(function(){e.a.register("authEvent",t,n1("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(e.v,function(t){var n={};if(t&&t.authEvent){var r=!1;for(n=0,t=iz(t.authEvent);n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",th(n)}return n.status="ERROR",th(n)})}(e)})),e.m}function se(e){return e.l||(e.C=e.c?nZ(e.c,a5(e.b)):null,e.l=new oK(e.g,D(e.i),e.C),e.f&&o8(e.l,e.f)),e.l}function st(e,t,n,r,i,o,a,s,u,c,l,h){return(e=new a6(e,t,n,r,i,h)).l=o,e.g=a,e.i=s,e.b=ep(u||null),e.f=c,e.yb(l).toString()}function sn(e){if(this.a=e||x.default.INTERNAL.reactNative&&x.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function sr(e){this.b=e,this.a={},this.f=I(this.c,this)}a3.prototype.toString=function(){return this.f?nl(this.a,"v",this.f):nS(this.a.b,"v"),this.b?nl(this.a,"eid",this.b):nS(this.a.b,"eid"),this.c.length?nl(this.a,"fw",this.c.join(",")):nS(this.a.b,"fw"),this.a.toString()},a6.prototype.yb=function(e){return this.h=e,this},a6.prototype.toString=function(){if(this.v){var e=nf(this.v.url);e=nd(e.c,e.a,e.g,"/emulator/auth/handler")}else e=nd("https",this.u,null,"/__/auth/handler");if(nl(e,"apiKey",this.s),nl(e,"appName",this.c),nl(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=x.default.app(this.c).auth().la()}catch(e){n=null}for(var r in t.ob=n,nl(e,"providerId",this.a.providerId),t=n9((n=this.a).Ib))t[r]=t[r].toString();r=n.Qc,t=ep(t);for(var i=0;i<r.length;i++){var o=r[i];o in t&&delete t[o]}n.pb&&n.ob&&!t[n.pb]&&(t[n.pb]=n.ob),ed(t)||nl(e,"customParameters",n8(t))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&nl(e,"scopes",n.join(",")),this.l?nl(e,"redirectUrl",this.l):nS(e.b,"redirectUrl"),this.g?nl(e,"eventId",this.g):nS(e.b,"eventId"),this.i?nl(e,"v",this.i):nS(e.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!nh(e,a)&&nl(e,a,this.b[a]);return this.h?nl(e,"tid",this.h):nS(e.b,"tid"),this.f?nl(e,"eid",this.f):nS(e.b,"eid"),(a=a5(this.c)).length&&nl(e,"fw",a.join(",")),e.toString()},(r=a8.prototype).Ob=function(e,t,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,a=!1;return this.ma().then(function(){var n;(n={type:"webStorageSupport"},a7(o).then(function(){var e;return(e=o.v).rb.then(function(){return new ti(function(t){e.a.send(n.type,n,t,n1("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}).then(function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})).then(function(n){n||(e&&nU(e),t(i),a=!0)})}).o(function(){}).then(function(){if(!a)return new ti(function(t){return function n(){t7(2e3).then(function(){if(e&&!e.closed)return n();t()})}()})}).then(function(){if(!a)return t7(n).then(function(){t(r)})})},r.Xb=function(){var e=n0();return!n5(e)&&!rt(e)},r.Tb=function(){return!1},r.Mb=function(e,t,n,r,i,o,a,s){if(!e)return tf(new k("popup-blocked"));if(a&&!n5())return this.ma().o(function(t){nU(e),i(t)}),r(),th();this.a||(this.a=a9(se(this)));var u=this;return this.a.then(function(){var t=u.ma().o(function(t){throw nU(e),i(t),t});return r(),t}).then(function(){iW(n),a||nF(st(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)}).o(function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e})},r.Nb=function(e,t,n,r){this.a||(this.a=a9(se(this)));var i=this;return this.a.then(function(){iW(t),nF(st(i.s,i.g,i.b,e,t,nM(),n,i.c,void 0,i.i,r,i.f))}).o(function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e})},r.ma=function(){var e=this;return a7(this).then(function(){return e.v.rb}).o(function(){throw e.a=null,new k("network-request-failed")})},r.$b=function(){return!0},r.Ea=function(e){this.h.push(e)},r.Sa=function(e){X(this.h,function(t){return t==e})},(r=sn.prototype).get=function(e){return th(this.a.getItem(e)).then(function(e){return e&&n7(e)})},r.set=function(e,t){return th(this.a.setItem(e,n8(t)))},r.U=function(e){return th(this.a.removeItem(e))},r.ca=function(){},r.ia=function(){};var si=[];function so(e,t,n){ed(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function sa(e){this.a=e}function ss(e){this.c=e,this.b=!1,this.a=[]}function su(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return tf(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ti(function(n,r){h?(i=Math.floor(1e20*Math.random()).toString(),h.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(t){return sc(e,c),t}).o(function(t){throw sc(e,c),t})}function sc(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),X(e.a,function(e){return e==t})}}function sl(){if(!sd())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e,t=this;nz()&&self?(this.v=function(){var e=nz()?self:null;if(W(si,function(n){n.b==e&&(t=n)}),!t){var t=new sr(e);si.push(t)}return t}(),so(this.v,"keyChanged",function(e,n){return sm(t).then(function(e){return 0<e.length&&W(t.a,function(t){t(e)}),{keyProcessed:Q(e,n.key)}})}),so(this.v,"ping",function(){return th(["keyChanged"])})):((e=u.navigator)&&e.serviceWorker?th().then(function(){return e.serviceWorker.ready}).then(function(e){return e.active||null}).o(function(){return null}):th(null)).then(function(e){(t.h=e)&&(t.g=new ss(new sa(e)),su(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function sh(e){return e.i||(e.i=function e(t){return new ti(function(n,r){var i=t.m.open("firebaseLocalStorageDb",1);i.onerror=function(e){try{e.preventDefault()}catch(e){}r(Error(e.target.error))},i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):new ti(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(e){n(Error(e.target.error))}}).then(function(){return e(t)}).then(function(e){n(e)}).o(function(e){r(e)})}})}(e)),e.i}function sf(e,t){var n=0;return new ti(function r(i,o){sh(e).then(t).then(i).o(function(t){if(!(3<++n))return sh(e).then(function(t){return t.close(),e.i=void 0,r(i,o)}).o(function(e){o(e)});o(t)})})}function sd(){try{return!!u.indexedDB}catch(e){return!1}}function sp(e){return e.objectStore("firebaseLocalStorage")}function sv(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function sg(e){return new ti(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}})}function sy(e,t){var n;return e.g&&e.h&&((n=u.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===e.h?su(e.g,"keyChanged",{key:t},e.s).then(function(){}).o(function(){}):th()}function sm(e){return sh(e).then(function(e){var t=sp(sv(e,!1));return t.getAll?sg(t.getAll()):new ti(function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}})}).then(function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r})}function s_(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function sb(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=th().then(function(){if(sd()){var e=re(),r="__sak"+e;return sN||(sN=new sl),(n=sN).set(r,e).then(function(){return n.get(r)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return t.c})}return t.c}).then(function(e){return t.type=e.type,e.ca(function(e){W(t.a,function(t){t(e)})}),e})}function sw(){this.a={},this.type="inMemory"}function sI(){if(!function(){var e="Node"==nG();if(!(e=sT()||e&&x.default.INTERNAL.node&&x.default.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==nG())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=sT()||x.default.INTERNAL.node.localStorage,this.type="localStorage"}function sT(){try{var e=u.localStorage,t=re();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function sE(){this.type="nullStorage"}function sS(){if(!function(){var e="Node"==nG();if(!(e=sC()||e&&x.default.INTERNAL.node&&x.default.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==nG())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=sC()||x.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function sC(){try{var e=u.sessionStorage,t=re();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function sk(){var e={};e.Browser=sx,e.Node=sP,e.ReactNative=sR,e.Worker=sD,this.a=e[nG()]}sr.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];W(r,function(t){i.push(th().then(function(){return t(e.origin,e.data.data)}))}),tp(i).then(function(r){var i=[];W(r,function(e){i.push({fulfilled:e.Pb,value:e.value,reason:e.reason?e.reason.message:void 0})}),W(i,function(e){for(var t in e)void 0===e[t]&&delete e[t]}),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})})}},sa.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},ss.prototype.close=function(){for(;0<this.a.length;)sc(this,this.a[0]);this.b=!0},(r=sl.prototype).set=function(e,t){var n=this,r=!1;return sf(this,function(t){return sg((t=sp(sv(t,!0))).get(e))}).then(function(i){return sf(n,function(o){if(o=sp(sv(o,!0)),i)return i.value=t,sg(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,sg(o.add(a))})}).then(function(){return n.c[e]=t,sy(n,e)}).oa(function(){r&&n.b--})},r.get=function(e){return sf(this,function(t){return sg(sp(sv(t,!1)).get(e))}).then(function(e){return e&&e.value})},r.U=function(e){var t=this,n=!1;return sf(this,function(r){return n=!0,t.b++,sg(sp(sv(r,!0)).delete(e))}).then(function(){return delete t.c[e],sy(t,e)}).oa(function(){n&&t.b--})},r.ca=function(e){var t;0==this.a.length&&(t=this,s_(t),function e(){t.f=setTimeout(function(){t.l=sm(t).then(function(e){0<e.length&&W(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(e)},r.ia=function(e){X(this.a,function(t){return t==e}),0==this.a.length&&s_(this)},(r=sb.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},r.set=function(e,t){return this.b.then(function(n){return n.set(e,t)})},r.U=function(e){return this.b.then(function(t){return t.U(e)})},r.ca=function(e){this.a.push(e)},r.ia=function(e){X(this.a,function(t){return t==e})},(r=sw.prototype).get=function(e){return th(this.a[e])},r.set=function(e,t){return this.a[e]=t,th()},r.U=function(e){return delete this.a[e],th()},r.ca=function(){},r.ia=function(){},(r=sI.prototype).get=function(e){var t=this;return th().then(function(){return n7(t.a.getItem(e))})},r.set=function(e,t){var n=this;return th().then(function(){var r=n8(t);null===r?n.U(e):n.a.setItem(e,r)})},r.U=function(e){var t=this;return th().then(function(){t.a.removeItem(e)})},r.ca=function(e){u.window&&tz(u.window,"storage",e)},r.ia=function(e){u.window&&tY(u.window,"storage",e)},(r=sE.prototype).get=function(){return th(null)},r.set=function(){return th()},r.U=function(){return th()},r.ca=function(){},r.ia=function(){},(r=sS.prototype).get=function(e){var t=this;return th().then(function(){return n7(t.a.getItem(e))})},r.set=function(e,t){var n=this;return th().then(function(){var r=n8(t);null===r?n.U(e):n.a.setItem(e,r)})},r.U=function(e){var t=this;return th().then(function(){t.a.removeItem(e)})},r.ca=function(){},r.ia=function(){};var sN,sA,sx={F:sI,bb:sS},sP={F:sI,bb:sS},sR={F:sn,bb:sE},sD={F:sI,bb:sE},sO={rd:"local",NONE:"none",td:"session"};function sL(){var e=!!(!rt(n0())&&nH()),t=n5(),n=n2();this.m=e,this.h=t,this.l=n,this.a={},sA||(sA=new sk),e=sA;try{this.g=!nL()&&ra()||!u.indexedDB?new e.a.F:new sb(nz()?new sw:new e.a.F)}catch(e){this.g=new sw,this.h=!0}try{this.i=new e.a.bb}catch(e){this.i=new sw}this.v=new sw,this.f=I(this.Yb,this),this.b={}}function sM(){return e||(e=new sL),e}function sF(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function sj(e,t){return"firebase:"+e.name+(t?":"+t:"")}function sU(e,t,n){return n=sj(t,n),"local"==t.F&&(e.b[n]=null),sF(e,t.F).U(n)}function sq(e){e.c&&(clearInterval(e.c),e.c=null)}function sV(e){this.a=e,this.b=sM()}(r=sL.prototype).get=function(e,t){return sF(this,e.F).get(sj(e,t))},r.set=function(e,t,n){var r=sj(e,n),i=this,o=sF(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},r.addListener=function(e,t,n){var r;e=sj(e,t),this.l&&(this.b[e]=u.localStorage.getItem(e)),ed(this.a)&&(sF(this,"local").ca(this.f),this.h||(nL()||!ra())&&u.indexedDB||!this.l||(r=this,sq(r),r.c=setInterval(function(){for(var e in r.a){var t=u.localStorage.getItem(e),n=r.b[e];t!=n&&(r.b[e]=t,t=new tO({type:"storage",key:e,target:window,oldValue:n,newValue:t,a:!0}),r.Yb(t))}},1e3))),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},r.removeListener=function(e,t,n){e=sj(e,t),this.a[e]&&(X(this.a[e],function(e){return e==n}),0==this.a[e].length&&delete this.a[e]),ed(this.a)&&(sF(this,"local").ia(this.f),sq(this))},r.Yb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?sF(this,"local").ia(this.f):sq(this),this.m){if(n=u.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?u.localStorage.setItem(t,r):u.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return}var o=this;n=function(){(void 0!==e.a.a||o.b[t]!==u.localStorage.getItem(t))&&(o.b[t]=u.localStorage.getItem(t),o.mb(t))},eH&&e4&&10==e4&&u.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else W(e,I(this.mb,this))},r.mb=function(e){this.a[e]&&W(this.a[e],function(e){e()})};var sB={name:"authEvent",F:"local"};function sK(){this.a=sM()}function sW(e,n){this.b=sH,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=n,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===t&&(t=u.Int32Array?new Int32Array(sJ):sJ),this.reset()}S(sW,function(){this.b=-1});for(var sH=64,sz=sH-1,sG=[],sQ=0;sQ<sz;sQ++)sG[sQ]=0;var sY=$(128,sG);function sX(e){for(var n=e.f,r=e.l,i=0,o=0;o<n.length;)r[i++]=n[o]<<24|n[o+1]<<16|n[o+2]<<8|n[o+3],o=4*i;for(n=16;64>n;n++){o=0|r[n-15],i=0|r[n-2];var a=(0|r[n-16])+((o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3)|0,s=(0|r[n-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;r[n]=a+s|0}i=0|e.a[0],o=0|e.a[1];var u=0|e.a[2],c=0|e.a[3],l=0|e.a[4],h=0|e.a[5],f=0|e.a[6];for(n=0,a=0|e.a[7];64>n;n++){var d=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&o^i&u^o&u)|0;s=l&h^~l&f,s=(a=a+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((s=s+(0|t[n])|0)+(0|r[n])|0)|0,a=f,f=h,h=l,l=c+s|0,c=u,u=o,o=i,i=s+d|0}e.a[0]=e.a[0]+i|0,e.a[1]=e.a[1]+o|0,e.a[2]=e.a[2]+u|0,e.a[3]=e.a[3]+c|0,e.a[4]=e.a[4]+l|0,e.a[5]=e.a[5]+h|0,e.a[6]=e.a[6]+f|0,e.a[7]=e.a[7]+a|0}function s$(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"==typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(sX(e),i=0);else if(p(t))for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(sX(e),i=0)}else throw Error("message must be string or array");e.c=i,e.g+=n}sW.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):J(this.h)};var sJ=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function sZ(){sW.call(this,8,s0)}S(sZ,sW);var s0=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function s1(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new sK,this.g=new sV(this.h),this.f=null,this.b=[],this.a=this.c=null}function s2(e){return new k("invalid-cordova-configuration",e)}function s4(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function s3(e){return e.f||(e.f=e.ma().then(function(){return new ti(function(t){e.Ea(function n(r){return t(r),e.Sa(n),!1}),function(e){function t(t){o=!0,a&&a.cancel(),s6(e).then(function(n){var r=i;if(n&&t&&t.url){var o=null;-1!=(r=ic(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=n7(nh(o=nf(r),"firebaseError")||null))?N(o):null)?new iH(n.c,n.b,null,null,o,null,n.T()):new iH(n.c,n.b,r,n.f,null,null,n.T())),r=o||i}s4(e,r)})}var n,r,i=new iH("unknown",null,null,null,new k("no-auth-event")),o=!1,a=t7(500).then(function(){return s6(e).then(function(){o||s4(e,i)})}),s=u.handleOpenURL;u.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(n1("BuildInfo.packageName",u).toLowerCase()+"://")&&t({url:e}),"function"==typeof s)try{s(e)}catch(e){console.error(e)}},iQ||(iQ=new iG),n=t,(r=iQ).a.push(n),r.b||(r.b=function(e){for(var t=0;t<r.a.length;t++)r.a[t](e)},"function"==typeof(n=n1("universalLinks.subscribe",u))&&n(null,r.b))}(e)})})),e.f}function s6(e){var t,n=null;return(t=e.g).b.get(sB,t.a).then(function(e){return iz(e)}).then(function(t){return n=t,sU((t=e.g).b,sB,t.a)}).then(function(){return n})}function s5(e){this.a=e,this.b=sM()}(r=s1.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(nW(void 0)?nK().then(function(){return new ti(function(e,t){var n=u.document,r=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),e()},!1)})}):tf(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof n1("universalLinks.subscribe",u))throw s2("cordova-universal-links-plugin-fix is not installed");if(void 0===n1("BuildInfo.packageName",u))throw s2("cordova-plugin-buildinfo is not installed");if("function"!=typeof n1("cordova.plugins.browsertab.openUrl",u))throw s2("cordova-plugin-browsertab is not installed");if("function"!=typeof n1("cordova.InAppBrowser.open",u))throw s2("cordova-plugin-inappbrowser is not installed")},function(){throw new k("cordova-not-ready")})},r.Ob=function(e,t){return t(new k("operation-not-supported-in-this-environment")),th()},r.Mb=function(){return tf(new k("operation-not-supported-in-this-environment"))},r.$b=function(){return!1},r.Xb=function(){return!0},r.Tb=function(){return!0},r.Nb=function(e,t,n,r){if(this.c)return tf(new k("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,l=null;return this.c=th().then(function(){return iW(t),s3(i)}).then(function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new iH(t,r,null,o,new k("no-auth-event"),null,i),s=n1("BuildInfo.packageName",u);if("string"!=typeof s)throw new k("invalid-cordova-configuration");var c=n1("BuildInfo.displayName",u),l={};if(n0().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!n0().toLowerCase().match(/android/))return tf(new k("operation-not-supported-in-this-environment"));l.apn=s}c&&(l.appDisplayName=c),o=function(e){var t=new sZ;s$(t,e),e=[];var n=8*t.g;56>t.c?s$(t,sY,56-t.c):s$(t,sY,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(sX(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return z(e,function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join("")}(o),l.sessionId=o;var h=st(e.v,e.i,e.l,t,n,null,r,e.m,l,e.u,i,e.s);return e.ma().then(function(){var t=e.h;return e.C.a.set(sB,a.w(),t)}).then(function(){var t=n1("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof t)throw new k("invalid-cordova-configuration");var n=null;t(function(t){if(t){if("function"!=typeof(n=n1("cordova.plugins.browsertab.openUrl",u)))throw new k("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=n1("cordova.InAppBrowser.open",u)))throw new k("invalid-cordova-configuration");t=n0(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,e,t,n,r)}).then(function(){return new ti(function(e,t){s=function(){var t=n1("cordova.plugins.browsertab.close",u);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=t7(2e3).then(function(){t(new k("redirect-cancelled-by-user"))}))},l=function(){ri()&&c()},o.addEventListener("resume",c,!1),n0().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(e){return s6(i).then(function(){throw e})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&i.Sa(s),i.c=null})},r.Ea=function(e){this.b.push(e),s3(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&e(t=new iH("unknown",null,null,null,new k("no-auth-event")))})},r.Sa=function(e){X(this.b,function(t){return t==e})};var s8={name:"pendingRedirect",F:"session"};function s9(e){return sU(e.b,s8,e.a)}function s7(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new up,this.C=new u_,this.g=new s5(uf(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=ue(this.D,this.v,this.m,oH,this.J)}function ue(e,t,n,r,i){var o=x.default.SDK_VERSION||null;return nW()?new s1(e,t,n,o,r,i):new a8(e,t,n,o,r,i)}function ut(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o(function(n){throw e.a==t&&e.reset(),n})}function un(e){e.a.Xb()&&ut(e).o(function(t){var n=new iH("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));uu(t)&&e.s(n)}),e.a.Tb()||uv(e.b)}function ur(e,t){var n;Q(e.h,t)||e.h.push(t),e.f||(n=e.g).b.get(s8,n.a).then(function(e){return"pending"==e}).then(function(t){t?s9(e.g).then(function(){ut(e).o(function(t){var n=new iH("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));uu(t)&&e.s(n)})}):un(e)}).o(function(){un(e)})}function ui(e,t){X(e.h,function(e){return e==t})}s7.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=ue(this.D,this.v,this.m,null,this.J),this.i={}},s7.prototype.s=function(e){if(!e)throw new k("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return uv(this.b),t};var uo=new rr(2e3,1e4),ua=new rr(3e4,6e4);function us(e,t,n,r,i,o,a){return e.a.Mb(t,n,r,function(){e.f||(e.f=!0,e.a.Ea(e.l))},function(){e.reset()},i,o,a)}function uu(e){return!!e&&"auth/cordova-not-ready"==e.code}function uc(e,t,n,r,i){var o,a;return(a=e.g).b.set(s8,"pending",a.a).then(function(){return e.a.Nb(t,n,r,i).o(function(t){if(uu(t))throw new k("operation-not-supported-in-this-environment");return o=t,s9(e.g).then(function(){throw o})}).then(function(){return e.a.$b()?new ti(function(){}):s9(e.g).then(function(){return e.qa()}).then(function(){}).o(function(){})})})}function ul(e,t,n,r,i){return e.a.Ob(r,function(e){t.na(n,null,e,i)},uo.get())}s7.prototype.qa=function(){return this.b.qa()};var uh={};function uf(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function ud(e,t,n,r){var i=uf(t,n,r);return uh[i]||(uh[i]=new s7(e,t,n,r)),uh[i]}function up(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function uv(e){e.g||(e.g=!0,um(e,!1,null,null))}function ug(e){e.g&&!e.i&&um(e,!1,null,null)}function uy(e,t){if(e.b=function(){return th(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function um(e,t,n,r){t?r?function(e,t){if(e.b=function(){return tf(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):uy(e,n):uy(e,{user:null}),e.f=[],e.c=[]}function u_(){}function ub(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(e){this.ib=e},enumerable:!1})}function uw(e,t){this.a=t,rl(this,"verificationId",e)}function uI(e,t,n,r){return new iV(e).fb(t,n).then(function(e){return new uw(e,r)})}function uT(e){var t=r3(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");rh(this,{token:e,expirationTime:ro(1e3*t.exp),authTime:ro(1e3*t.auth_time),issuedAtTime:ro(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function uE(e,t,n){var r=t&&t[uC];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=ep(t),this.g=n,this.c=new il(null,r),this.b=[];var i=this;W(t[uS]||[],function(e){(e=rv(e))&&i.b.push(e)}),rl(this,"auth",this.a),rl(this,"session",this.c),rl(this,"hints",this.b)}up.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},up.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(um(this,!0,null,e.a),th()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then(function(t){um(e,s,t,null)}).o(function(t){um(e,s,null,t)})}(this,e,t):tf(new k("invalid-auth-event")):(um(this,!1,null,null),th())}else tf(new k("invalid-auth-event"))},up.prototype.qa=function(){var e=this;return new ti(function(t,n){var r;e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),r=new k("timeout"),e.a&&e.a.cancel(),e.a=t7(ua.get()).then(function(){e.b||(e.g=!0,um(e,!0,null,r))}))})},u_.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),th()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then(function(e){t.na(r,e,null,n)}).o(function(e){t.na(r,null,e,n)})}(e,t):tf(new k("invalid-auth-event"))}else tf(new k("invalid-auth-event"))},uw.prototype.confirm=function(e){return e=iB(this.verificationId,e),this.a(e)};var uS="mfaInfo",uC="mfaPendingCredential";function uk(e,t,n,r){k.call(this,"multi-factor-auth-required",r,t),this.b=new uE(e,t,n),rl(this,"resolver",this.b)}function uN(e,t,n){if(e&&g(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new uk(t,e.serverResponse,n,e.message)}catch(e){}return null}function uA(){}function ux(e){rl(this,"factorId",e.fa),this.a=e}function uP(e){if(ux.call(this,e),this.a.fa!=iV.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uR(e,t){for(var n in tD.call(this,e),t)this[n]=t[n]}function uD(e,t){this.a=e,this.b=[],this.c=I(this.yc,this),tz(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&W(t.multiFactor.enrolledFactors,function(e){var t=null,r={};if(e){e.uid&&(r[rm]=e.uid),e.displayName&&(r[rg]=e.displayName),e.enrollmentTime&&(r[ry]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[r_]=e.phoneNumber);try{t=new rb(r)}catch(e){}e=t}else e=null;e&&n.push(e)}),uO(this,n)}function uO(e,t){e.b=t,rl(e,"enrolledFactors",t)}function uL(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function uM(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function uF(e,t){void 0===t&&(t=e.b?(t=e.b).a-t.g:0),e.c=Date.now()+1e3*t}function uj(e,t){e.b=r4(t[o1]||""),e.a=t.refreshToken,uF(e,void 0!==(t=t.expiresIn)?Number(t):void 0)}function uU(e,t){this.a=e||null,this.b=t||null,rh(this,{lastSignInTime:ro(t||null),creationTime:ro(e||null)})}function uq(e,t,n,r,i,o){rh(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function uV(e,t,n){this.J=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var r,i=x.default.SDK_VERSION?nZ(x.default.SDK_VERSION):null;this.a=new oK(this.l,D(oH),i),e.emulatorConfig&&o8(this.a,e.emulatorConfig),this.b=new uM(this.a),uY(this,t[o1]),uj(this.b,t),rl(this,"refreshToken",this.b.a),uJ(this,n||{}),t3.call(this),this.R=!1,this.s&&n4()&&(this.i=ud(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=(r=this,new uL(function(){return r.I(!0)},function(e){return!!e&&"auth/network-request-failed"==e.code},function(){var e=r.b.c-Date.now()-3e5;return 0<e?e:0})),this.aa=I(this.hb,this);var o=this;this.ya=null,this.Oa=function(e){o.wa(e.h)},this.ja=null,this.Aa=function(e){o8(o.a,e.c)},this.X=null,this.$=[],this.Ba=function(e){uW(o,e.f)},this.ba=null,this.O=new uD(this,n),rl(this,"multiFactor",this.O)}function uB(e,t){e.ja&&tY(e.ja,"languageCodeChanged",e.Oa),(e.ja=t)&&tz(t,"languageCodeChanged",e.Oa)}function uK(e,t){e.X&&tY(e.X,"emulatorConfigChanged",e.Aa),(e.X=t)&&tz(t,"emulatorConfigChanged",e.Aa)}function uW(e,t){e.$=t,o7(e.a,x.default.SDK_VERSION?nZ(x.default.SDK_VERSION,e.$):null)}function uH(e,t){e.ba&&tY(e.ba,"frameworkChanged",e.Ba),(e.ba=t)&&tz(t,"frameworkChanged",e.Ba)}function uz(e){try{return x.default.app(e.m).auth()}catch(t){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function uG(e){e.D||e.u.b||(e.u.start(),tY(e,"tokenChanged",e.aa),tz(e,"tokenChanged",e.aa))}function uQ(e){tY(e,"tokenChanged",e.aa),e.u.stop()}function uY(e,t){e.za=t,rl(e,"_lat",t)}function uX(e){for(var t=[],n=0;n<e.S.length;n++)t.push(e.S[n](e));return tp(t).then(function(){return e})}function u$(e){e.i&&!e.R&&(e.R=!0,ur(e.i,e))}function uJ(e,t){rh(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new uU(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function uZ(){}function u0(e){return th().then(function(){if(e.D)throw new k("app-deleted")})}function u1(e){return z(e.providerData,function(e){return e.providerId})}function u2(e,t){t&&(u4(e,t.providerId),e.providerData.push(t))}function u4(e,t){X(e.providerData,function(e){return e.providerId==t})}function u3(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&rl(e,t,n)}function u6(e,t){var n,r,i;e!=t&&(rh(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?rl(e,"metadata",new uU((n=t.metadata).a,n.b)):rl(e,"metadata",new uU),W(t.providerData,function(t){u2(e,t)}),r=e.b,i=t.b,r.b=i.b,r.a=i.a,r.c=i.c,rl(e,"refreshToken",e.b.a),uO(e.O,t.O.b))}function u5(e){return e.I().then(function(t){var n=e.isAnonymous;return aX(e.a,ak,{idToken:t}).then(I(e.Kc,e)).then(function(){return n||u3(e,"isAnonymous",!1),t})})}function u8(e,t){t[o1]&&e.za!=t[o1]&&(uj(e.b,t),e.dispatchEvent(new uR("tokenChanged")),uY(e,t[o1]),u3(e,"refreshToken",e.b.a))}function u9(e,t){return u5(e).then(function(){if(Q(u1(e),t))return uX(e).then(function(){throw new k("provider-already-linked")})})}function u7(e,t,n){return rf({user:e,credential:iK(t),additionalUserInfo:t=r7(t),operationType:n})}function ce(e,t){return u8(e,t),e.reload().then(function(){return e})}function ct(e,t,n,r,i){if(!n4())return tf(new k("operation-not-supported-in-this-environment"));if(e.h&&!i)return tf(e.h);var o=r9(n.providerId),a=re(e.uid+":::"),s=null;(!n5()||nH())&&e.s&&n.isOAuthProvider&&(s=st(e.s,e.l,e.m,t,n,null,a,x.default.SDK_VERSION||null,null,null,e.tenantId));var u=nq(s,o&&o.ua,o&&o.ta);return r=r().then(function(){if(cr(e),!i)return e.I().then(function(){})}).then(function(){return us(e.i,u,t,n,a,!!s,e.tenantId)}).then(function(){return new ti(function(n,r){e.na(t,null,new k("cancelled-popup-request"),e.g||null),e.f=n,e.C=r,e.g=a,e.c=ul(e.i,e,t,u,a)})}).then(function(e){return u&&nU(u),e?rf(e):null}).o(function(e){throw u&&nU(u),e}),ci(e,r,i)}function cn(e,t,n,r,i){if(!n4())return tf(new k("operation-not-supported-in-this-environment"));if(e.h&&!i)return tf(e.h);var o=null,a=re(e.uid+":::");return r=r().then(function(){if(cr(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=a,uX(e)}).then(function(t){return e.ha&&(t=(t=e.ha).b.set(cs,e.w(),t.a)),t}).then(function(){return uc(e.i,t,n,a,e.tenantId)}).o(function(t){if(o=t,e.ha)return cu(e.ha);throw o}).then(function(){if(o)throw o}),ci(e,r,i)}function cr(e){if(!e.i||!e.R){if(e.i&&!e.R)throw new k("internal-error");throw new k("auth-domain-config-required")}}function ci(e,t,n){var r=e.h&&!n?(t.cancel(),tf(e.h)):t.o(function(t){throw t&&("auth/user-disabled"==t.code||"auth/user-token-expired"==t.code)&&(e.h||e.dispatchEvent(new uR("userInvalidated")),e.h=t),t});return e.J.push(r),r.oa(function(){Y(e.J,r)}),r.o(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=uN(t.w(),uz(e),I(e.jc,e))),n||t})}function co(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[o1]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new uV(t,n,e);return e.providerData&&W(e.providerData,function(e){e&&u2(i,rf(e))}),e.redirectEventId&&(i.ga=e.redirectEventId),i}function ca(e){this.a=e,this.b=sM()}uE.prototype.Rc=function(e){var t=this;return e.sb(this.a.a,this.c).then(function(e){var n=ep(t.f);return delete n[uS],delete n[uC],eg(n,e),t.g(n)})},S(uk,k),uA.prototype.sb=function(e,t,n){var r,i;return t.type==ih?(r=this,t.Ha().then(function(t){return t={idToken:t},void 0!==n&&(t.displayName=n),eg(t,{phoneVerificationInfo:iq(r.a)}),aX(e,aS,t)})):(i=this,t.Ha().then(function(t){return eg(t={mfaPendingCredential:t},{phoneVerificationInfo:iq(i.a)}),aX(e,aC,t)}))},S(ux,uA),S(uP,ux),S(uR,tD),(r=uD.prototype).yc=function(e){var t,n;uO(this,(t=e.hd,n=[],W(t.mfaInfo||[],function(e){(e=rv(e))&&n.push(e)}),n))},r.Rb=function(){return this.a.I().then(function(e){return new il(e,null)})},r.fc=function(e,t){var n=this,r=this.a.a;return this.Rb().then(function(n){return e.sb(r,n,t)}).then(function(e){return u8(n.a,e),n.a.reload()})},r.bd=function(e){var t=this,n="string"==typeof e?e:e.uid,r=this.a.a;return this.a.I().then(function(e){return aX(r,aY,{idToken:e,mfaEnrollmentId:n})}).then(function(e){var r=H(t.b,function(e){return e.uid!=n});return uO(t,r),u8(t.a,e),t.a.reload().o(function(e){if("auth/user-token-expired"!=e.code)throw e})})},r.w=function(){return{multiFactor:{enrolledFactors:z(this.b,function(e){return e.w()})}}},uL.prototype.start=function(){this.a=this.c,function e(t,n){var r;t.stop(),t.b=t7((r=n)?(t.a=t.c,t.g()):(r=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),r)).then(function(){var e,t;return e=u.document,t=null,ri()||!e?th():new ti(function(n){t=function(){ri()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)}).o(function(n){throw e.removeEventListener("visibilitychange",t,!1),n})}).then(function(){return t.h()}).then(function(){e(t,!0)}).o(function(n){t.i(n)&&e(t,!1)})}(this,!0)},uL.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},uM.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},uM.prototype.getToken=function(e){var t,n,r;return e=!!e,this.b&&!this.a?tf(new k("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?(t=this,n={grant_type:"refresh_token",refresh_token:this.a},(r=t.f,new ti(function(e,t){"refresh_token"==n.grant_type&&n.refresh_token||"authorization_code"==n.grant_type&&n.code?ae(r,r.l+"?key="+encodeURIComponent(r.c),function(n){n?n.error?t(aJ(n)):n.access_token&&n.refresh_token?e(n):t(new k("internal-error")):t(new k("network-request-failed"))},"POST",nE(n).toString(),r.g,r.m.get()):t(new k("internal-error"))})).then(function(e){return t.b=r4(e.access_token),t.a=e.refresh_token,uF(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})):th(null):th({accessToken:this.b.toString(),refreshToken:this.a})},uU.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(uV,t3),uV.prototype.wa=function(e){this.ya=e,o5(this.a,e)},uV.prototype.la=function(){return this.ya},uV.prototype.Ga=function(){return J(this.$)},uV.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},rl(uV.prototype,"providerId","firebase"),(r=uV.prototype).reload=function(){var e=this;return ci(this,u0(this).then(function(){return u5(e).then(function(){return uX(e)}).then(uZ)}))},r.oc=function(e){return this.I(e).then(function(e){return new uT(e)})},r.I=function(e){var t=this;return ci(this,u0(this).then(function(){return t.b.getToken(e)}).then(function(e){if(!e)throw new k("internal-error");return e.accessToken!=t.za&&(uY(t,e.accessToken),t.dispatchEvent(new uR("tokenChanged"))),u3(t,"refreshToken",e.refreshToken),e.accessToken}))},r.Kc=function(e){if(!(e=e.users)||!e.length)throw new k("internal-error");uJ(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t,n=(t=(t=e).providerUserInfo)&&t.length?z(t,function(e){return new uq(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[],r=0;r<n.length;r++)u2(this,n[r]);u3(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new uR("userReloaded",{hd:e}))},r.Lc=function(e){return ru("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(e)},r.tb=function(e){var t=this,n=null;return ci(this,e.c(this.a,this.uid).then(function(e){return u8(t,e),n=u7(t,e,"reauthenticate"),t.h=null,t.reload()}).then(function(){return n}),!0)},r.Cc=function(e){return ru("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(e)},r.qb=function(e){var t=this,n=null;return ci(this,u9(this,e.providerId).then(function(){return t.I()}).then(function(n){return e.b(t.a,n)}).then(function(e){return n=u7(t,e,"link"),ce(t,e)}).then(function(){return n}))},r.Dc=function(e,t){var n=this;return ci(this,u9(this,"phone").then(function(){return uI(uz(n),e,t,I(n.qb,n))}))},r.Mc=function(e,t){var n=this;return ci(this,th().then(function(){return uI(uz(n),e,t,I(n.tb,n))}),!0)},r.Bb=function(e){var t=this;return ci(this,this.I().then(function(n){return t.a.Bb(n,e)}).then(function(e){return u8(t,e),t.reload()}))},r.ed=function(e){var t=this;return ci(this,this.I().then(function(n){return e.b(t.a,n)}).then(function(e){return u8(t,e),t.reload()}))},r.Cb=function(e){var t=this;return ci(this,this.I().then(function(n){return t.a.Cb(n,e)}).then(function(e){return u8(t,e),t.reload()}))},r.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return u0(this);var t=this;return ci(this,this.I().then(function(n){return t.a.Db(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){return u8(t,e),u3(t,"displayName",e.displayName||null),u3(t,"photoURL",e.photoUrl||null),W(t.providerData,function(e){"password"===e.providerId&&(rl(e,"displayName",t.displayName),rl(e,"photoURL",t.photoURL))}),uX(t)}).then(uZ))},r.cd=function(e){var t=this;return ci(this,u5(this).then(function(n){return Q(u1(t),e)?aX(t.a,aI,{idToken:n,deleteProvider:[e]}).then(function(e){var n={};return W(e.providerUserInfo||[],function(e){n[e.providerId]=!0}),W(u1(t),function(e){n[e]||u4(t,e)}),n[iV.PROVIDER_ID]||rl(t,"phoneNumber",null),uX(t)}):uX(t).then(function(){throw new k("no-such-provider")})}))},r.delete=function(){var e=this;return ci(this,this.I().then(function(t){return aX(e.a,aw,{idToken:t})}).then(function(){e.dispatchEvent(new uR("userDeleted"))})).then(function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");uB(e,null),uK(e,null),uH(e,null),e.J=[],e.D=!0,uQ(e),rl(e,"refreshToken",null),e.i&&ui(e.i,e)})},r.Fb=function(e,t){return"linkViaPopup"==e&&(this.g||null)==t&&!!this.f||"reauthViaPopup"==e&&(this.g||null)==t&&!!this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t},r.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},r.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?I(this.Kb,this):"reauthViaPopup"==e&&t==(this.g||null)?I(this.Lb,this):"linkViaRedirect"==e&&(this.ga||null)==t?I(this.Kb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?I(this.Lb,this):null},r.Ec=function(e){var t=this;return ct(this,"linkViaPopup",e,function(){return u9(t,e.providerId).then(function(){return uX(t)})},!1)},r.Nc=function(e){return ct(this,"reauthViaPopup",e,function(){return th()},!0)},r.Fc=function(e){var t=this;return cn(this,"linkViaRedirect",e,function(){return u9(t,e.providerId)},!1)},r.Oc=function(e){return cn(this,"reauthViaRedirect",e,function(){return th()},!0)},r.Kb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ci(this,this.I().then(function(n){return ap(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})}).then(function(e){return o=u7(i,e,"link"),ce(i,e)}).then(function(){return o}))},r.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ci(this,th().then(function(){return iv(av(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)}).then(function(e){return o=u7(i,e,"reauthenticate"),u8(i,e),i.h=null,i.reload()}).then(function(){return o}),!0)},r.ub=function(e){var t=this,n=null;return ci(this,this.I().then(function(t){return n=t,void 0===e||ed(e)?{}:r0(new rW(e))}).then(function(e){return t.a.ub(n,e)}).then(function(e){if(t.email!=e)return t.reload()}).then(function(){}))},r.Eb=function(e,t){var n=this,r=null;return ci(this,this.I().then(function(e){return r=e,void 0===t||ed(t)?{}:r0(new rW(t))}).then(function(t){return n.a.Eb(r,e,t)}).then(function(e){if(n.email!=e)return n.reload()}).then(function(){}))},r.jc=function(e){var t=null,n=this;return ci(this,e=iv(th(e),n.uid).then(function(e){return t=u7(n,e,"reauthenticate"),u8(n,e),n.h=null,n.reload()}).then(function(){return t}),!0)},r.toJSON=function(){return this.w()},r.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&eg(e,this.metadata.w()),W(this.providerData,function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))}),eg(e,this.O.w()),e};var cs={name:"redirectUser",F:"session"};function cu(e){return sU(e.b,cs,e.a)}function cc(e){var t,n,r,i,o,a,s,c;this.a=e,this.b=sM(),this.c=null,this.f=(t=this,a=cf("local"),s=cf("session"),c=cf("none"),(n=t.b,i=sj(a,r=t.a),o=sF(n,a.F),n.get(a,r).then(function(e){var t=null;try{t=n7(u.localStorage.getItem(i))}catch(e){}if(t&&!e)return u.localStorage.removeItem(i),n.set(a,t,r);t&&e&&"localStorage"!=o.type&&u.localStorage.removeItem(i)})).then(function(){return t.b.get(s,t.a)}).then(function(e){return e?s:t.b.get(c,t.a).then(function(e){return e?c:t.b.get(a,t.a).then(function(e){return e?a:t.b.get(ch,t.a).then(function(e){return e?cf(e):a})})})}).then(function(e){return t.c=e,cl(t,e.F)}).o(function(){t.c||(t.c=a)})),this.b.addListener(cf("local"),this.a,I(this.g,this))}function cl(e,t){var n,r=[];for(n in sO)sO[n]!==t&&r.push(sU(e.b,cf(sO[n]),e.a));return r.push(sU(e.b,ch,e.a)),new ti(function(e,t){var n=r.length,i=[];if(n)for(var o=function(t,r){n--,i[t]=r,0==n&&e(i)},a=function(e){t(e)},s=0;s<r.length;s++)td(r[s],T(o,s),a);else e(i)})}cc.prototype.g=function(){var e=this,t=cf("local");cg(this,function(){return th().then(function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null}).then(function(n){if(n)return cl(e,"local").then(function(){e.c=t})})})};var ch={name:"persistence",F:"session"};function cf(e){return{name:"authUser",F:e}}function cd(e,t){return cg(e,function(){return e.b.set(e.c,t.w(),e.a)})}function cp(e){return cg(e,function(){return sU(e.b,e.c,e.a)})}function cv(e,t,n){return cg(e,function(){return e.b.get(e.c,e.a).then(function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),co(e||{})})})}function cg(e,t){return e.f=e.f.then(t,t),e.f}function cy(e){var t,n,r,i,o,a,s,u,c,l;if(this.l=!1,rl(this,"settings",new ub),rl(this,"app",e),cS(this).options&&cS(this).options.apiKey)e=x.default.SDK_VERSION?nZ(x.default.SDK_VERSION):null,this.a=new oK(cS(this).options&&cS(this).options.apiKey,D(oH),e);else throw new k("invalid-api-key");this.R=[],this.s=[],this.O=[],this.hb=x.default.INTERNAL.createSubscribe(I(this.zc,this)),this.X=void 0,this.bc=x.default.INTERNAL.createSubscribe(I(this.Ac,this)),cT(this,null),this.i=new cc(cS(this).options.apiKey+":"+cS(this).name),this.D=new ca(cS(this).options.apiKey+":"+cS(this).name),this.$=cA(this,(o=this,c=cS(o).options.authDomain,l=(u=(a=o.D,s=cS(o).options.authDomain,a.b.get(cs,a.a).then(function(e){return e&&s&&(e.authDomain=s),co(e||{})})).then(function(e){return(o.m=e)&&(e.ha=o.D),cu(o.D)}),cA(o,u)).then(function(){return cv(o.i,c,o.P)}).then(function(e){return e?(e.ha=o.D,o.m&&(o.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return cd(o.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:cp(o.i)})):null}).then(function(e){cT(o,e||null)}),cA(o,l))),this.h=cA(this,(t=this,t.$.then(function(){return cI(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(cf("local"),e.a,t.ja)}}))),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.ya=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,n=this,r=cS(n).options.authDomain,i=cS(n).options.apiKey,r&&n4()&&(n.Oa=n.$.then(function(){if(!n.l){if(n.b=ud(r,i,cS(n).name,n.P),ur(n.b,n),cC(n)&&u$(cC(n)),n.m){u$(n.m);var e=n.m;e.wa(n.la()),uB(e,n),uW(e=n.m,n.J),uH(e,n),o8((e=n.m).a,n.P),uK(e,n),n.m=null}return n.b}})),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,t3.call(this),Object.defineProperty(this,"lc",{get:function(){return this.la()},set:function(e){this.wa(e)},enumerable:!1}),this.aa=null,Object.defineProperty(this,"ti",{get:function(){return this.T()},set:function(e){this.yb(e)},enumerable:!1}),this.S=null,Object.defineProperty(this,"emulatorConfig",{get:function(){if(this.P){var e=nf(this.P.url);e=rf({protocol:e.c,host:e.a,port:e.g,options:rf({disableWarnings:this.P.ec})})}else e=null;return e},enumerable:!1}),this.J=[],this.P=null}function cm(e){tD.call(this,"languageCodeChanged"),this.h=e}function c_(e){tD.call(this,"emulatorConfigChanged"),this.c=e}function cb(e){tD.call(this,"frameworkChanged"),this.f=e}function cw(e){return e.Oa||tf(new k("auth-domain-config-required"))}function cI(e){if(!n4())return tf(new k("operation-not-supported-in-this-environment"));var t=cw(e).then(function(){return e.b.qa()}).then(function(e){return e?rf(e):null});return cA(e,t)}function cT(e,t){var n,r;cC(e)&&(n=cC(e),r=e.Ba,X(n.S,function(e){return e==r}),tY(cC(e),"tokenChanged",e.ya),tY(cC(e),"userDeleted",e.za),tY(cC(e),"userInvalidated",e.Aa),uQ(cC(e))),t&&(t.S.push(e.Ba),tz(t,"tokenChanged",e.ya),tz(t,"userDeleted",e.za),tz(t,"userInvalidated",e.Aa),0<e.u&&uG(t)),rl(e,"currentUser",t),t&&(t.wa(e.la()),uB(t,e),uW(t,e.J),uH(t,e),o8(t.a,e.P),uK(t,e))}function cE(e,t){var n=null,r=null;return cA(e,t.then(function(t){var i;return n=iK(t),r=r7(t),(i={}).apiKey=cS(e).options.apiKey,i.authDomain=cS(e).options.authDomain,i.appName=cS(e).name,e.P&&(i.emulatorConfig=e.P),e.$.then(function(){var n,r,o;return n=e.D,r=e.Ga(),o=new uV(i,t),n&&(o.ha=n),r&&uW(o,r),o.reload().then(function(){return o})}).then(function(t){return cC(e)&&t.uid==cC(e).uid?u6(cC(e),t):(cT(e,t),u$(t)),e.da(t)}).then(function(){cN(e)})},function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=uN(t.w(),e,I(e.kc,e))),n||t}).then(function(){return rf({user:cC(e),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function cS(e){return e.app}function cC(e){return e.currentUser}function ck(e){return cC(e)&&cC(e)._lat||null}function cN(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](ck(e));if(e.X!==e.getUid()&&e.O.length)for(e.X=e.getUid(),t=0;t<e.O.length;t++)e.O[t]&&e.O[t](ck(e))}}function cA(e,t){return e.R.push(t),t.oa(function(){Y(e.R,t)}),t}function cx(){}function cP(){this.a={},this.b=1e12}cc.prototype.xb=function(e){var t=null,n=this;return function(e){var t=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");e:{for(r in sO)if(sO[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(nG()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!sd()&&"none"!==e)throw n;break;default:if(!n2()&&"none"!==e)throw n}}(e),cg(this,function(){return e!=n.c.F?n.b.get(n.c,n.a).then(function(r){return t=r,cl(n,e)}).then(function(){if(n.c=cf(e),t)return n.b.set(n.c,t,n.a)}):th()})},S(cy,t3),S(cm,tD),S(c_,tD),S(cb,tD),(r=cy.prototype).xb=function(e){return cA(this,e=this.i.xb(e))},r.wa=function(e){this.aa===e||this.l||(this.aa=e,o5(this.a,this.aa),this.dispatchEvent(new cm(this.la())))},r.la=function(){return this.aa},r.fd=function(){var e=u.navigator;this.wa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},r.gd=function(e,t){if(!this.P){var n;if(!/^https?:\/\//.test(e))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");n=t=!!t&&!!t.disableWarnings,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!n&&nK().then(function(){var e=u.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),u.document.body.appendChild(e)}),this.P={url:e,ec:t},this.settings.ib=!0,o8(this.a,this.P),this.dispatchEvent(new c_(this.P))}},r.Gc=function(e){this.J.push(e),o7(this.a,x.default.SDK_VERSION?nZ(x.default.SDK_VERSION,this.J):null),this.dispatchEvent(new cb(this.J))},r.Ga=function(){return J(this.J)},r.yb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},r.T=function(){return this.S},r.toJSON=function(){return{apiKey:cS(this).options.apiKey,authDomain:cS(this).options.authDomain,appName:cS(this).name,currentUser:cC(this)&&cC(this).w()}},r.Fb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},r.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},r.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?I(this.ic,this):null},r.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return cE(i,ad(i.a,o))})},r.Xc=function(e){if(!n4())return tf(new k("operation-not-supported-in-this-environment"));var t=this,n=r9(e.providerId),r=re(),i=null;(!n5()||nH())&&cS(this).options.authDomain&&e.isOAuthProvider&&(i=st(cS(this).options.authDomain,cS(this).options.apiKey,cS(this).name,"signInViaPopup",e,null,r,x.default.SDK_VERSION||null,null,null,this.T(),this.P));var o=nq(i,n&&n.ua,n&&n.ta);return cA(this,n=cw(this).then(function(n){return us(n,o,"signInViaPopup",e,r,!!i,t.T())}).then(function(){return new ti(function(e,n){t.na("signInViaPopup",null,new k("cancelled-popup-request"),t.g),t.f=e,t.C=n,t.g=r,t.c=ul(t.b,t,"signInViaPopup",o,r)})}).then(function(e){return o&&nU(o),e?rf(e):null}).o(function(e){throw o&&nU(o),e}))},r.Yc=function(e){if(!n4())return tf(new k("operation-not-supported-in-this-environment"));var t=this;return cA(this,cw(this).then(function(){var e;return cg(e=t.i,function(){return e.b.set(ch,e.c.F,e.a)})}).then(function(){return uc(t.b,"signInViaRedirect",e,void 0,t.T())}))},r.qa=function(){var e=this;return cI(this).then(function(t){return e.b&&ug(e.b.b),t}).o(function(t){throw e.b&&ug(e.b.b),t})},r.dd=function(e){if(!e)return tf(new k("null-user"));if(this.S!=e.tenantId)return tf(new k("tenant-id-mismatch"));var t,n,r,i,o,a=this,s={};s.apiKey=cS(this).options.apiKey,s.authDomain=cS(this).options.authDomain,s.appName=cS(this).name;var u=(t=s,n=a.D,r=a.Ga(),i=e.b,(o={})[o1]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new uV(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&uW(t,r),u6(t,e),t);return cA(this,this.h.then(function(){if(cS(a).options.apiKey!=e.l)return u.reload()}).then(function(){return cC(a)&&e.uid==cC(a).uid?(u6(cC(a),e),a.da(e)):(cT(a,u),u$(u),a.da(u))}).then(function(){cN(a)}))},r.Ab=function(){var e=this;return cA(this,this.h.then(function(){return(e.b&&ug(e.b.b),cC(e))?(cT(e,null),cp(e.i).then(function(){cN(e)})):th()}))},r.Zc=function(){var e=this;return cv(this.i,cS(this).options.authDomain).then(function(t){if(!e.l){var n;if(n=cC(e)&&t){n=cC(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return u6(cC(e),t),cC(e).I();(cC(e)||t)&&(cT(e,t),t&&(u$(t),t.ha=e.D),e.b&&ur(e.b,e),cN(e))}})},r.da=function(e){return cd(this.i,e)},r.mc=function(){cN(this),this.da(cC(this))},r.wc=function(){this.Ab()},r.xc=function(){this.Ab()},r.kc=function(e){var t=this;return this.h.then(function(){return cE(t,th(e))})},r.zc=function(e){var t=this;this.addAuthTokenListener(function(){e.next(cC(t))})},r.Ac=function(e){var t,n,r=this;t=this,n=function(){e.next(cC(r))},t.O.push(n),cA(t,t.h.then(function(){!t.l&&Q(t.O,n)&&t.X!==t.getUid()&&(t.X=t.getUid(),n(ck(t)))}))},r.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof e?e(cC(r)):"function"==typeof e.next&&e.next(cC(r))}),this.hb(e,t,n)},r.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof e?e(cC(r)):"function"==typeof e.next&&e.next(cC(r))}),this.bc(e,t,n)},r.nc=function(e){var t=this;return cA(this,this.h.then(function(){return cC(t)?cC(t).I(e).then(function(e){return{accessToken:e}}):null}))},r.Tc=function(e){var t=this;return this.h.then(function(){return cE(t,aX(t.a,aW,{token:e}))}).then(function(e){var n=e.user;return u3(n,"isAnonymous",!1),t.da(n),e})},r.Uc=function(e,t){var n=this;return this.h.then(function(){return cE(n,aX(n.a,aH,{email:e,password:t}))})},r.dc=function(e,t){var n=this;return this.h.then(function(){return cE(n,aX(n.a,a_,{email:e,password:t}))})},r.$a=function(e){var t=this;return this.h.then(function(){return cE(t,e.ka(t.a))})},r.Sc=function(e){return ru("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(e)},r.zb=function(){var e=this;return this.h.then(function(){var t=cC(e);if(t&&t.isAnonymous){var n=rf({providerId:null,isNewUser:!1});return rf({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return cE(e,e.a.zb()).then(function(t){var n=t.user;return u3(n,"isAnonymous",!0),e.da(n),t})})},r.getUid=function(){return cC(this)&&cC(this).uid||null},r.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&cC(this)&&uG(cC(this))},r.Pc=function(e){var t=this;W(this.s,function(n){n==e&&t.u--}),0>this.u&&(this.u=0),0==this.u&&cC(this)&&uQ(cC(this)),this.removeAuthTokenListener(e)},r.addAuthTokenListener=function(e){var t=this;this.s.push(e),cA(this,this.h.then(function(){t.l||Q(t.s,e)&&e(ck(t))}))},r.removeAuthTokenListener=function(e){X(this.s,function(t){return t==e})},r.delete=function(){this.l=!0;for(var e=0;e<this.R.length;e++)this.R[e].cancel("app-deleted");return this.R=[],this.i&&(e=this.i).b.removeListener(cf("local"),e.a,this.ja),this.b&&(ui(this.b,this),ug(this.b.b)),Promise.resolve()},r.hc=function(e){return cA(this,aX(this.a,ab,{identifier:e,continueUri:n3()?nM():"http://localhost"}).then(function(e){return e.signinMethods||[]}))},r.Bc=function(e){return!!iF(e)},r.wb=function(e,t){var n=this;return cA(this,th().then(function(){var e=new rW(t);if(!e.c)throw new k("argument-error",rG+" must be true when sending sign in link to email");return r0(e)}).then(function(t){return n.a.wb(e,t)}).then(function(){}))},r.jd=function(e){return this.Ra(e).then(function(e){return e.data.email})},r.nb=function(e,t){return cA(this,this.a.nb(e,t).then(function(){}))},r.Ra=function(e){return cA(this,this.a.Ra(e).then(function(e){return new rw(e)}))},r.jb=function(e){return cA(this,this.a.jb(e).then(function(){}))},r.vb=function(e,t){var n=this;return cA(this,th().then(function(){return void 0===t||ed(t)?{}:r0(new rW(t))}).then(function(t){return n.a.vb(e,t)}).then(function(){}))},r.Wc=function(e,t){return cA(this,uI(this,e,t,I(this.$a,this)))},r.Vc=function(e,t){var n=this;return cA(this,th().then(function(){var r=t||nM(),i=iM(e,r);if(!(r=iF(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.$a(i)}))},cx.prototype.render=function(){},cx.prototype.reset=function(){},cx.prototype.getResponse=function(){},cx.prototype.execute=function(){};var cR=null;function cD(e,t){return(t=cO(t))&&e.a[t]||null}function cO(e){return(e=void 0===e?1e12:e)?e.toString():null}function cL(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=e6(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():tz(this.f,"click",this.i)}function cM(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function cF(){}function cj(){}cP.prototype.render=function(e,t){return this.a[this.b.toString()]=new cL(e,t),this.b++},cP.prototype.reset=function(e){var t=cD(this,e);e=cO(e),t&&e&&(t.delete(),delete this.a[e])},cP.prototype.getResponse=function(e){return(e=cD(this,e))?e.getResponse():null},cP.prototype.execute=function(e){(e=cD(this,e))&&e.execute()},cL.prototype.getResponse=function(){return cM(this),this.b},cL.prototype.execute=function(){cM(this);var e=this;this.a||(this.a=setTimeout(function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(e){}e.a=setTimeout(function(){if(e.a=null,e.b=null,n)try{n()}catch(e){}e.h&&e.execute()},6e4)},500))},cL.prototype.delete=function(){cM(this),this.g=!0,clearTimeout(this.a),this.a=null,tY(this.f,"click",this.i)},rl(cF,"FACTOR_ID","phone"),cj.prototype.g=function(){return cR||(cR=new cP),th(cR)},cj.prototype.c=function(){};var cU=null;function cq(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var cV=new em(ew,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),cB=new rr(3e4,6e4);cq.prototype.g=function(e){var t=this;return new ti(function(n,r){var i=setTimeout(function(){r(new k("network-request-failed"))},cB.get());u.grecaptcha&&(e===t.f||t.b)?(clearTimeout(i),n(u.grecaptcha)):(u[t.a]=function(){if(u.grecaptcha){t.f=e;var o=u.grecaptcha.render;u.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete u[t.a]},th(oM(eS(cV,{onload:t.a,hl:e||""}))).o(function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))})},cq.prototype.c=function(){this.b--};var cK=null;function cW(e,t,n,r,i,o,a){if(rl(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=t,this.g=null,a?(cU||(cU=new cj),a=cU):(cK||(cK=new cq),a=cK),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[cG])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[cQ],!u.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!e6(t)||!this.i&&e6(t).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new oK(e,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[cH];this.a[cH]=function(e){if(cY(s,e),"function"==typeof c)c(e);else if("string"==typeof c){var t=n1(c,u);"function"==typeof t&&t(e)}};var l=this.a[cz];this.a[cz]=function(){if(cY(s,null),"function"==typeof l)l();else if("string"==typeof l){var e=n1(l,u);"function"==typeof e&&e()}}}var cH="callback",cz="expired-callback",cG="sitekey",cQ="size";function cY(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(e){}}function cX(e,t){return e.h.push(t),t.oa(function(){Y(e.h,t)}),t}function c$(e){if(e.D)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function cJ(e,t,n){var r=!1;try{this.b=n||x.default.app()}catch(e){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)n=this.b.options.apiKey;else throw new k("invalid-api-key");var i=this,o=null;try{o=this.b.auth().Ga()}catch(e){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}o=x.default.SDK_VERSION?nZ(x.default.SDK_VERSION,o):null,cW.call(this,n,e,t,function(){try{var e=i.b.auth().la()}catch(t){e=null}return e},o,D(oH),r)}function cZ(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=c0.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=c0[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new k("argument-error",e+" failed: "+r)}(r=cW.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=cX(this,th().then(function(){if(n3()&&!nz())return nK();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.u())}).then(function(t){return e.g=t,aX(e.s,aD,{})}).then(function(t){e.a[cG]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},r.render=function(){c$(this);var e=this;return cX(this,this.Ia().then(function(){if(null===e.c){var t=e.v;if(!e.i){var n=e6(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!e3&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',eB(a.name),'"'),a.type){o.push(' type="',eB(a.type),'"');var s={};eg(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=e9(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):e5(o,a)),2<r.length&&function(e,t,n){function r(n){n&&t.appendChild("string"==typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||g(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(g(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(v(o)){a="function"==typeof o.item;break e}}a=!1}W(a?J(o):o,r)}}}(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c}))},r.verify=function(){c$(this);var e=this;return cX(this,this.render().then(function(t){return new ti(function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(X(e.l,function(e){return e==i}),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}})}))},r.reset=function(){c$(this),null!==this.c&&this.g.reset(this.c)},r.clear=function(){c$(this),this.D=!0,this.m.c();for(var e,t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(t=e6(this.v);e=t.firstChild;)t.removeChild(e)},S(cJ,cW);var c0="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function c1(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"==typeof e}}}function c2(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"==typeof e}}}function c4(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:g}}function c3(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"==typeof e}}}function c6(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function c5(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function c8(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.sb}}}function c9(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}}function c7(e,t){return g(e)&&"string"==typeof e.type&&e.type===t&&"function"==typeof e.Ha}function le(e){return g(e)&&"string"==typeof e.uid}function lt(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}}function ln(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function lr(e,t){for(var n in t){var r=t[n].name;e[r]=la(r,e[n],t[n].j)}}function li(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:T(function(e){return this[e]},n),set:T(function(e,t,n,r){cZ(e,[n],[r],!0),this[t]=r},r,n,t[n].kb),enumerable:!0})}}function lo(e,t,n,r){e[t]=la(t,n,r)}function la(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return cZ(a,n,e),t.apply(this,e)}if(!n)return t;var i,o,a=(i=(i=e).split("."))[i.length-1];for(o in t)r[o]=t[o];for(o in t.prototype)r.prototype[o]=t.prototype[o];return r}lr(cy.prototype,{jb:{name:"applyActionCode",j:[c1("code")]},Ra:{name:"checkActionCode",j:[c1("code")]},nb:{name:"confirmPasswordReset",j:[c1("code"),c1("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[c1("email"),c1("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[c1("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[c1("emailLink")]},Hc:{name:"onAuthStateChanged",j:[ln(c4(),c3(),"nextOrObserver"),c3("opt_error",!0),c3("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[ln(c4(),c3(),"nextOrObserver"),c3("opt_error",!0),c3("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[c1("email"),ln(c4("opt_actionCodeSettings",!0),c6(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[c1("email"),c4("actionCodeSettings")]},xb:{name:"setPersistence",j:[c1("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[c5()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[c5()]},Tc:{name:"signInWithCustomToken",j:[c1("token")]},Uc:{name:"signInWithEmailAndPassword",j:[c1("email"),c1("password")]},Vc:{name:"signInWithEmailLink",j:[c1("email"),c1("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[c1("phoneNumber"),lt()]},Xc:{name:"signInWithPopup",j:[c9()]},Yc:{name:"signInWithRedirect",j:[c9()]},dd:{name:"updateCurrentUser",j:[ln({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof uV)}},c6(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[c1(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[c1("url"),c4("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[c1("code")]}}),li(cy.prototype,{lc:{name:"languageCode",kb:ln(c1(),c6(),"languageCode")},ti:{name:"tenantId",kb:ln(c1(),c6(),"tenantId")}}),cy.Persistence=sO,cy.Persistence.LOCAL="local",cy.Persistence.SESSION="session",cy.Persistence.NONE="none",lr(uV.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[c2("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[c2("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[c5()]},qb:{name:"linkWithCredential",j:[c5()]},Dc:{name:"linkWithPhoneNumber",j:[c1("phoneNumber"),lt()]},Ec:{name:"linkWithPopup",j:[c9()]},Fc:{name:"linkWithRedirect",j:[c9()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[c5()]},tb:{name:"reauthenticateWithCredential",j:[c5()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[c1("phoneNumber"),lt()]},Nc:{name:"reauthenticateWithPopup",j:[c9()]},Oc:{name:"reauthenticateWithRedirect",j:[c9()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[ln(c4("opt_actionCodeSettings",!0),c6(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[c1(null,!0)]},cd:{name:"unlink",j:[c1("provider")]},Bb:{name:"updateEmail",j:[c1("email")]},Cb:{name:"updatePassword",j:[c1("password")]},ed:{name:"updatePhoneNumber",j:[c5("phone")]},Db:{name:"updateProfile",j:[c4("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[c1("email"),ln(c4("opt_actionCodeSettings",!0),c6(null,!0),"opt_actionCodeSettings",!0)]}}),lr(cP.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),lr(cx.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),lr(ti.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),li(ub.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:c2("appVerificationDisabledForTesting")}}),lr(uw.prototype,{confirm:{name:"confirm",j:[c1("verificationCode")]}}),lo(ip,"fromJSON",function(e){e="string"==typeof e?JSON.parse(e):e;for(var t,n=[iw,iO,iU,im],r=0;r<n.length;r++)if(t=n[r](e))return t;return null},[ln(c1(),c4(),"json")]),lo(iL,"credential",function(e,t){return new iD(e,t)},[c1("email"),c1("password")]),lr(iD.prototype,{w:{name:"toJSON",j:[c1(null,!0)]}}),lr(iS.prototype,{Ca:{name:"addScope",j:[c1("scope")]},Ka:{name:"setCustomParameters",j:[c4("customOAuthParameters")]}}),lo(iS,"credential",iC,[ln(c1(),c4(),"token")]),lo(iL,"credentialWithLink",iM,[c1("email"),c1("emailLink")]),lr(ik.prototype,{Ca:{name:"addScope",j:[c1("scope")]},Ka:{name:"setCustomParameters",j:[c4("customOAuthParameters")]}}),lo(ik,"credential",iN,[ln(c1(),c4(),"token")]),lr(iA.prototype,{Ca:{name:"addScope",j:[c1("scope")]},Ka:{name:"setCustomParameters",j:[c4("customOAuthParameters")]}}),lo(iA,"credential",ix,[ln(c1(),ln(c4(),c6()),"idToken"),ln(c1(),c6(),"accessToken",!0)]),lr(iP.prototype,{Ka:{name:"setCustomParameters",j:[c4("customOAuthParameters")]}}),lo(iP,"credential",iR,[ln(c1(),c4(),"token"),c1("secret",!0)]),lr(iE.prototype,{Ca:{name:"addScope",j:[c1("scope")]},credential:{name:"credential",j:[ln(c1(),ln(c4(),c6()),"optionsOrIdToken"),ln(c1(),c6(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[c4("customOAuthParameters")]}}),lr(i_.prototype,{w:{name:"toJSON",j:[c1(null,!0)]}}),lr(ig.prototype,{w:{name:"toJSON",j:[c1(null,!0)]}}),lo(iV,"credential",iB,[c1("verificationId"),c1("verificationCode")]),lr(iV.prototype,{fb:{name:"verifyPhoneNumber",j:[ln(c1(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?c7(e.session,ih)&&"string"==typeof e.phoneNumber:e.session&&e.multiFactorHint?c7(e.session,id)&&le(e.multiFactorHint):e.session&&e.multiFactorUid?c7(e.session,id)&&"string"==typeof e.multiFactorUid:!!e.phoneNumber&&"string"==typeof e.phoneNumber)}},"phoneInfoOptions"),lt()]}}),lr(ij.prototype,{w:{name:"toJSON",j:[c1(null,!0)]}}),lr(k.prototype,{toJSON:{name:"toJSON",j:[c1(null,!0)]}}),lr(iX.prototype,{toJSON:{name:"toJSON",j:[c1(null,!0)]}}),lr(iY.prototype,{toJSON:{name:"toJSON",j:[c1(null,!0)]}}),lr(uk.prototype,{toJSON:{name:"toJSON",j:[c1(null,!0)]}}),lr(uE.prototype,{Rc:{name:"resolveSignIn",j:[c8()]}}),lr(uD.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[c8(),c1("displayName",!0)]},bd:{name:"unenroll",j:[ln({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:le},c1(),"multiFactorInfoIdentifier")]}}),lr(cJ.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),lo(rL,"parseLink",rK,[c1("link")]),lo(cF,"assertion",function(e){return new uP(e)},[c5("phone")]),function(){if(void 0!==x.default&&x.default.INTERNAL&&x.default.INTERNAL.registerComponent){var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:rT,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:rI,VERIFY_AND_CHANGE_EMAIL:rE,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:cy,AuthCredential:ip,Error:k};lo(e,"EmailAuthProvider",iL,[]),lo(e,"FacebookAuthProvider",iS,[]),lo(e,"GithubAuthProvider",ik,[]),lo(e,"GoogleAuthProvider",iA,[]),lo(e,"TwitterAuthProvider",iP,[]),lo(e,"OAuthProvider",iE,[c1("providerId")]),lo(e,"SAMLAuthProvider",iT,[c1("providerId")]),lo(e,"PhoneAuthProvider",iV,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof cy)}}]),lo(e,"RecaptchaVerifier",cJ,[ln(c1(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),c4("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof x.default.app.App)}}]),lo(e,"ActionCodeURL",rL,[]),lo(e,"PhoneMultiFactorGenerator",cF,[]),x.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new cy(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),x.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return e=e.getProvider("auth").getImmediate(),{getUid:I(e.getUid,e),getToken:I(e.nc,e),addAuthTokenListener:I(e.cc,e),removeAuthTokenListener:I(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),x.default.registerVersion("@firebase/auth","0.16.6"),x.default.INTERNAL.extendNamespace({User:uV})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n(9446),n(8483);var P=n(4589),R=n(4594);n(3705);var D=n(3297);(r=D.B).prototype.loadBundle=D.r,r.prototype.namedQuery=D.o;var O=n(7582),L=n(909),M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return(0,O.__extends)(t,e),t}(Error),j=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(function(e){return n.auth=e},function(){}),this.messaging||t.get().then(function(e){return n.messaging=e},function(){})}return e.prototype.getAuthToken=function(){return(0,O.__awaiter)(this,void 0,void 0,function(){var e;return(0,O.__generator)(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:if(!(e=t.sent()))return[2,void 0];return[2,e.accessToken];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getInstanceIdToken=function(){return(0,O.__awaiter)(this,void 0,void 0,function(){return(0,O.__generator)(this,function(e){switch(e.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getContext=function(){return(0,O.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,O.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}})})},e}();function U(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var q=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e)||!0===e||!1===e||"[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map(function(e){return t.encode(e)});if("function"==typeof e||"object"==typeof e)return U(e,function(e){return t.encode(e)});throw Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw Error("Data cannot be decoded from JSON: "+e);return n;default:throw Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(e){return t.decode(e)}):"function"==typeof e||"object"==typeof e?U(e,function(e){return t.decode(e)}):e},e}(),V=function(){function e(e,t,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=e,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new q,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new j(t,n),this.cancelAllRequests=new Promise(function(e){a.deleteService=function(){return e()}});try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(e){this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e:null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return(0,O.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,O.__generator)(this,function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}})})},e.prototype.getAppCheckToken=function(){return(0,O.__awaiter)(this,void 0,void 0,function(){var e;return(0,O.__generator)(this,function(t){switch(t.label){case 0:if(!(e=this.appCheckProvider.getImmediate({optional:!0})))return[3,2];return[4,e.getToken()];case 1:return[2,t.sent().token];case 2:return[2,null]}})})},e.prototype.call=function(e,t,n){return(0,O.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,h,f;return(0,O.__generator)(this,function(d){switch(d.label){case 0:return r=this._url(e),i={data:t=this.serializer.encode(t)},o={},[4,this.contextProvider.getContext()];case 1:var p,v,g;return(a=d.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),p=n.timeout||7e4,g=new Promise(function(e,t){v=setTimeout(function(){t(new F("deadline-exceeded","deadline-exceeded"))},p)}),u=(s={timer:v,promise:g}).timer,c=s.promise,[4,Promise.race([B(u,this.postJSON(r,i,o)),c,B(u,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new F("cancelled","Firebase Functions instance was deleted.");if(h=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"==typeof s){if(!M[s])return new F("internal","internal");r=M[s],i=s}var u=a.message;"string"==typeof u&&(i=u),o=a.details,void 0!==o&&(o=n.decode(o))}}catch(e){}return"ok"===r?null:new F(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new F("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new F("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}})})},e}();function B(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}})})}!/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){e.INTERNAL.registerComponent(new L.Component("functions",function(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new V(i,o,e.getProvider("messaging"),a,r,t)},"PUBLIC").setServiceProps({Functions:V}).setMultipleInstances(!0))}(x.default,fetch.bind(self)),x.default.registerVersion("@firebase/functions","0.6.9");var K=n(8676),W="0.4.26",H="w:"+W,z="FIS_v2",G=((d={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',d["not-registered"]="Firebase Installation is not registered.",d["installation-not-found"]="Firebase Installation not found.",d["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',d["app-offline"]="Could not process request. Application offline.",d["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",d),Q=new P.ErrorFactory("installations","Installations",G);function Y(e){return e instanceof P.FirebaseError&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function $(e){return{token:e.token,requestStatus:2,expiresIn:Number(e.expiresIn.replace("s","000")),creationTime:Date.now()}}function J(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return[4,t.json()];case 1:return n=r.sent().error,[2,Q.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function Z(e){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey})}function ee(e,t){var n=t.refreshToken,r=Z(e);return r.append("Authorization",z+" "+n),r}function et(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t;return(0,O.__generator)(this,function(n){switch(n.label){case 0:return[4,e()];case 1:if((t=n.sent()).status>=500&&t.status<600)return[2,e()];return[2,t]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var er=/^[cdef][\w-]{21}$/;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(e){return e.appName+"!"+e.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eo=new Map;function ea(e,t){var n,r=ei(e);es(r,t),(n=ec())&&n.postMessage({key:r,fid:t}),el()}function es(e,t){var n,r,i=eo.get(e);if(i)try{for(var o=(0,O.__values)(i),a=o.next();!a.done;a=o.next())(0,a.value)(t)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var eu=null;function ec(){return!eu&&"BroadcastChannel"in self&&((eu=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){es(e.data.key,e.data.fid)}),eu}function el(){0===eo.size&&eu&&(eu.close(),eu=null)}var eh="firebase-installations-store",ef=null;function ed(){return ef||(ef=(0,K.openDb)("firebase-installations-database",1,function(e){0===e.oldVersion&&e.createObjectStore(eh)})),ef}function ep(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,O.__generator)(this,function(a){switch(a.label){case 0:return n=ei(e),[4,ed()];case 1:return[4,(i=(r=a.sent().transaction(eh,"readwrite")).objectStore(eh)).get(n)];case 2:return o=a.sent(),[4,i.put(t,n)];case 3:return a.sent(),[4,r.complete];case 4:return a.sent(),o&&o.fid===t.fid||ea(e,t.fid),[2,t]}})})}function ev(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return t=ei(e),[4,ed()];case 1:return[4,(n=r.sent().transaction(eh,"readwrite")).objectStore(eh).delete(t)];case 2:return r.sent(),[4,n.complete];case 3:return r.sent(),[2]}})})}function eg(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a;return(0,O.__generator)(this,function(s){switch(s.label){case 0:return n=ei(e),[4,ed()];case 1:return[4,(i=(r=s.sent().transaction(eh,"readwrite")).objectStore(eh)).get(n)];case 2:if(void 0!==(a=t(o=s.sent())))return[3,4];return[4,i.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,i.put(a,n)];case 5:s.sent(),s.label=6;case 6:return[4,r.complete];case 7:return s.sent(),a&&(!o||o.fid!==a.fid)&&ea(e,a.fid),[2,a]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,O.__generator)(this,function(i){switch(i.label){case 0:return[4,eg(e,function(n){var r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Q.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,7]),[4,/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){var n=t.fid;return(0,O.__awaiter)(this,void 0,void 0,function(){var t,r,i,o;return(0,O.__generator)(this,function(a){switch(a.label){case 0:return t=X(e),r={method:"POST",headers:Z(e),body:JSON.stringify({fid:n,authVersion:z,appId:e.appId,sdkVersion:H})},[4,et(function(){return fetch(t,r)})];case 1:if(!(i=a.sent()).ok)return[3,3];return[4,i.json()];case 2:return[2,{fid:(o=a.sent()).fid||n,registrationStatus:2,refreshToken:o.refreshToken,authToken:$(o.authToken)}];case 3:return[4,J("Create Installation",i)];case 4:throw a.sent()}})})}(e,t)];case 1:return[2,ep(e,r.sent())];case 2:if(!(Y(n=r.sent())&&409===n.customData.serverCode))return[3,4];return[4,ev(e)];case 3:return r.sent(),[3,6];case 4:return[4,ep(e,{fid:t.fid,registrationStatus:0})];case 5:r.sent(),r.label=6;case 6:throw n;case 7:return[2]}})})}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return(0,O.__generator)(this,function(o){switch(o.label){case 0:return[4,em(e)];case 1:t=o.sent(),o.label=2;case 2:if(1!==t.registrationStatus)return[3,5];return[4,en(100)];case 3:return o.sent(),[4,em(e)];case 4:return t=o.sent(),[3,2];case 5:if(0!==t.registrationStatus)return[3,7];return[4,ey(e)];case 6:if(r=(n=o.sent()).installationEntry,i=n.registrationPromise)return[2,i];return[2,r];case 7:return[2,t]}})})}(e)}:{installationEntry:t}}(e,e_(n||{fid:function(){try{var e,t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var n=(e=t,btoa(String.fromCharCode.apply(String,(0,O.__spreadArray)([],(0,O.__read)(e)))).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22));return er.test(n)?n:""}catch(e){return""}}(),registrationStatus:0}));return t=r.registrationPromise,r.installationEntry})];case 1:if(""!==(n=i.sent()).fid)return[3,3];return r={},[4,t];case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function em(e){return eg(e,function(e){if(!e)throw Q.create("installation-not-found");return e_(e)})}function e_(e){return 1===e.registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(e,t){return void 0===t&&(t=!1),(0,O.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,O.__generator)(this,function(o){switch(o.label){case 0:return[4,eg(e.appConfig,function(r){if(!eI(r))throw Q.create("not-registered");var i,o,a,s,u=r.authToken;if(!t&&2===(i=u).requestStatus&&(o=i,!((a=Date.now())<o.creationTime)&&!(o.creationTime+o.expiresIn<a+36e5)))return r;if(1===u.requestStatus)return n=function(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,O.__generator)(this,function(i){switch(i.label){case 0:return[4,ew(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:if(1!==n.authToken.requestStatus)return[3,5];return[4,en(100)];case 3:return i.sent(),[4,ew(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:if(0===(r=n.authToken).requestStatus)return[2,eb(e,t)];return[2,r]}})})}(e,t),r;if(!navigator.onLine)throw Q.create("app-offline");var c=(s={requestStatus:1,requestTime:Date.now()},(0,O.__assign)((0,O.__assign)({},r),{authToken:s}));return n=function(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,O.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return(0,O.__awaiter)(this,void 0,void 0,function(){var e,i,o,a,s;return(0,O.__generator)(this,function(u){switch(u.label){case 0:var c;return c=t.fid,e=X(n)+"/"+c+"/authTokens:generate",i=ee(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:H}})},[4,et(function(){return fetch(e,a)})];case 1:if(!(s=u.sent()).ok)return[3,3];return[4,s.json()];case 2:return[2,$(u.sent())];case 3:return[4,J("Generate Auth Token",s)];case 4:throw u.sent()}})})}(e,t)];case 1:return n=o.sent(),r=(0,O.__assign)((0,O.__assign)({},t),{authToken:n}),[4,ep(e.appConfig,r)];case 2:return o.sent(),[2,n];case 3:if(!(Y(i=o.sent())&&(401===i.customData.serverCode||404===i.customData.serverCode)))return[3,5];return[4,ev(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return r=(0,O.__assign)((0,O.__assign)({},t),{authToken:{requestStatus:0}}),[4,ep(e.appConfig,r)];case 6:o.sent(),o.label=7;case 7:throw i;case 8:return[2]}})})}(e,c),c})];case 1:if(r=o.sent(),!n)return[3,3];return[4,n];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function ew(e){return eg(e,function(e){var t;if(!eI(e))throw Q.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?(0,O.__assign)((0,O.__assign)({},e),{authToken:{requestStatus:0}}):e})}function eI(e){return void 0!==e&&2===e.registrationStatus}function eT(e){return Q.create("missing-app-config-values",{valueName:e})}(i=x.default).INTERNAL.registerComponent(new L.Component("installations",function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){if(!e||!e.options)throw eT("App Configuration");if(!e.name)throw eT("App Name");try{for(var t,n,r=(0,O.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw eT(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){return(/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,O.__generator)(this,function(i){switch(i.label){case 0:return[4,ey(e.appConfig)];case 1:return n=(t=i.sent()).installationEntry,(r=t.registrationPromise)?r.catch(console.error):eb(e).catch(console.error),[2,n.fid]}})})}(n))},getToken:function(e){return(/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return void 0===t&&(t=!1),(0,O.__awaiter)(this,void 0,void 0,function(){return(0,O.__generator)(this,function(n){switch(n.label){case 0:return[4,function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t;return(0,O.__generator)(this,function(n){switch(n.label){case 0:return[4,ey(e)];case 1:if(!(t=n.sent().registrationPromise))return[3,3];return[4,t];case 2:n.sent(),n.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return n.sent(),[4,eb(e,t)];case 2:return[2,n.sent().token]}})})}(n,e))},delete:function(){return(/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return[4,eg(t=e.appConfig,function(e){if(!e||0!==e.registrationStatus)return e})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Q.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Q.create("app-offline");case 3:return[4,/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,O.__generator)(this,function(o){switch(o.label){case 0:var a;return a=t.fid,n=X(e)+"/"+a,r={method:"DELETE",headers:ee(e,t)},[4,et(function(){return fetch(n,r)})];case 1:if((i=o.sent()).ok)return[3,3];return[4,J("Delete Installation",i)];case 2:throw o.sent();case 3:return[2]}})})}(t,n)];case 4:return r.sent(),[4,ev(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n))},onIdChange:function(e){var t,r,i,o;return r=t=n.appConfig,ec(),i=ei(r),(o=eo.get(i))||(o=new Set,eo.set(i,o)),o.add(e),function(){var n,r;n=ei(t),(r=eo.get(n))&&(r.delete(e),0===r.size&&eo.delete(n),el())}}}},"PUBLIC")),i.registerVersion("@firebase/installations",W);var eE=((p={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',p["only-available-in-window"]="This method is available in a Window context.",p["only-available-in-sw"]="This method is available in a service worker context.",p["permission-default"]="The notification permission was not granted and dismissed instead.",p["permission-blocked"]="The notification permission was not granted and blocked instead.",p["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",p["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",p["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",p["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",p["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",p["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",p["token-update-no-token"]="FCM returned no token when updating the user to push.",p["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",p["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",p["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",p["invalid-vapid-key"]="The public VAPID key must be a string.",p["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",p),eS=new P.ErrorFactory("messaging","Messaging",eE),eC="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ek="FCM_MSG",eN="google.c.a.c_id";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,O.__spreadArray)([],(0,O.__read)(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(o=v||(v={})).PUSH_RECEIVED="push-received",o.NOTIFICATION_CLICKED="notification-clicked";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ex="fcm_token_details_db",eP="fcm_token_object_Store",eR="firebase-messaging-store",eD=null;function eO(){return eD||(eD=(0,K.openDb)("firebase-messaging-database",1,function(e){0===e.oldVersion&&e.createObjectStore(eR)})),eD}function eL(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,O.__generator)(this,function(i){switch(i.label){case 0:return t=eF(e),[4,eO()];case 1:return[4,i.sent().transaction(eR).objectStore(eR).get(t)];case 2:if(!(n=i.sent()))return[3,3];return[2,n];case 3:return[4,function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,O.__generator)(this,function(r){switch(r.label){case 0:if(!("databases"in indexedDB))return[3,2];return[4,indexedDB.databases()];case 1:if(!r.sent().map(function(e){return e.name}).includes(ex))return[2,null];r.label=2;case 2:return t=null,[4,(0,K.openDb)(ex,5,function(r){return(0,O.__awaiter)(n,void 0,void 0,function(){var n,i,o,a;return(0,O.__generator)(this,function(s){switch(s.label){case 0:if(r.oldVersion<2||!r.objectStoreNames.contains(eP))return[2];return[4,(n=r.transaction.objectStore(eP)).index("fcmSenderId").get(e)];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];t={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:eA(o.vapidKey)}}}else 3===r.oldVersion?t={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:eA(o.auth),p256dh:eA(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:eA(o.vapidKey)}}:4===r.oldVersion&&(t={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:eA(o.auth),p256dh:eA(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:eA(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,(0,K.deleteDb)(ex)];case 4:return r.sent(),[4,(0,K.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,(0,K.deleteDb)("undefined")];case 6:return r.sent(),[2,!function(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?null:t]}})})}(e.appConfig.senderId)];case 4:if(!(r=i.sent()))return[3,6];return[4,eM(e,r)];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function eM(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,O.__generator)(this,function(i){switch(i.label){case 0:return n=eF(e),[4,eO()];case 1:return[4,(r=i.sent().transaction(eR,"readwrite")).objectStore(eR).put(t,n)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2,t]}})})}function eF(e){return e.appConfig.appId}function ej(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,O.__generator)(this,function(a){switch(a.label){case 0:return[4,eq(e)];case 1:n={method:"DELETE",headers:a.sent()},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(eU(e.appConfig)+"/"+t,n)];case 3:return[4,a.sent().json()];case 4:if((r=a.sent()).error)throw i=r.error.message,eS.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=a.sent(),eS.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function eU(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.projectId+"/registrations"}function eq(e){var t=e.appConfig,n=e.installations;return(0,O.__awaiter)(this,void 0,void 0,function(){var e;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function eV(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==eC&&(o.web.applicationPubKey=i),o}function eB(e,t,n){return(0,O.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,O.__generator)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw eS.create("permission-blocked");return[4,function(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:if(n=r.sent())return[2,n];return[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){for(var t="=".repeat((4-e.length%4)%4),n=atob((e+t).replace(/\-/g,"+").replace(/_/g,"/")),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}(t)})]}})})}(t,n)];case 1:return r=a.sent(),[4,eL(e)];case 2:if(i=a.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:eA(r.getKey("auth")),p256dh:eA(r.getKey("p256dh"))},i)return[3,3];return[2,eW(e,o)];case 3:var s,u,c,l,h,f;if(s=i.subscriptionOptions,c=(u=o).vapidKey===s.vapidKey,l=u.endpoint===s.endpoint,h=u.auth===s.auth,f=u.p256dh===s.p256dh,c&&l&&h&&f)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,ej(e,i.token)];case 5:return a.sent(),[3,7];case 6:return console.warn(a.sent()),[3,7];case 7:return[2,eW(e,o)];case 8:if(Date.now()>=i.createTime+6048e5)return[2,function(e,t,n){return(0,O.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,O.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,5]),[4,function(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,O.__generator)(this,function(a){switch(a.label){case 0:return[4,eq(e)];case 1:n={method:"PATCH",headers:a.sent(),body:JSON.stringify(eV(t.subscriptionOptions))},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(eU(e.appConfig)+"/"+t.token,n)];case 3:return[4,a.sent().json()];case 4:return r=a.sent(),[3,6];case 5:throw i=a.sent(),eS.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw o=r.error.message,eS.create("token-update-failed",{errorInfo:o});if(!r.token)throw eS.create("token-update-no-token");return[2,r.token]}})})}(t,e)];case 1:return r=o.sent(),[4,eM(t,(0,O.__assign)((0,O.__assign)({},e),{token:r,createTime:Date.now()}))];case 2:return o.sent(),[2,r];case 3:return i=o.sent(),[4,eK(t,n)];case 4:throw o.sent(),i;case 5:return[2]}})})}({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)];return[2,i.token];case 9:return[2]}})})}function eK(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,O.__generator)(this,function(i){switch(i.label){case 0:return[4,eL(e)];case 1:if(!(n=i.sent()))return[3,4];return[4,ej(e,n.token)];case 2:return i.sent(),[4,function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return t=eF(e),[4,eO()];case 1:return[4,(n=r.sent().transaction(eR,"readwrite")).objectStore(eR).delete(t)];case 2:return r.sent(),[4,n.complete];case 3:return r.sent(),[2]}})})}(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:if(r=i.sent())return[2,r.unsubscribe()];return[2,!0]}})})}function eW(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return[4,/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,O.__generator)(this,function(a){switch(a.label){case 0:return[4,eq(e)];case 1:n={method:"POST",headers:a.sent(),body:JSON.stringify(eV(t))},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(eU(e.appConfig),n)];case 3:return[4,a.sent().json()];case 4:return r=a.sent(),[3,6];case 5:throw i=a.sent(),eS.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw o=r.error.message,eS.create("token-subscribe-failed",{errorInfo:o});if(!r.token)throw eS.create("token-subscribe-no-token");return[2,r.token]}})})}(e,t)];case 1:return[4,eM(e,n={token:r.sent(),createTime:Date.now(),subscriptionOptions:t})];case 2:return r.sent(),[2,n.token]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(e){return"object"==typeof e&&!!e&&eN in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eG=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(e){e.waitUntil(t.onPush(e))}),self.addEventListener("pushsubscriptionchange",function(e){e.waitUntil(t.onSubChange(e))}),self.addEventListener("notificationclick",function(e){e.waitUntil(t.onNotificationClick(e))})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!=typeof e)throw eS.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return(0,O.__awaiter)(this,void 0,void 0,function(){var n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:if(this.vapidKey)return[3,2];return[4,eL(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null==n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:eC,r.label=2;case 2:return[2,eB(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return eK(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw eS.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw eS.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw eS.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw eS.create("only-available-in-window")},e.prototype.onMessage=function(){throw eS.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw eS.create("only-available-in-window")},e.prototype.onPush=function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return(0,O.__generator)(this,function(o){var a,s,u,c,l,h,f,d,p;switch(o.label){case 0:if(!(t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(e){return null}}(e)))return console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2];return[4,eQ()];case 1:if((n=o.sent()).some(function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))return[2,function(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=v.PUSH_RECEIVED;try{for(var i=(0,O.__values)(e),o=i.next();!o.done;o=i.next())o.value.postMessage(t)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(n,t)];if(r=!1,!t.notification)return[3,3];return[4,(h=(a=t,(u=(0,O.__assign)({},a.notification)).data=((s={})[ek]=a,s),c=u).actions,f=Notification.maxActions,h&&f&&h.length>f&&console.warn("This browser only supports "+f+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(l=c.title)&&void 0!==l?l:"",c))];case 2:o.sent(),r=!0,o.label=3;case 3:if(!0===r&&!1===this.isOnBackgroundMessageUsed)return[2];return this.bgMessageHandler&&(function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(p={from:(d=t).from,collapseKey:d.collapse_key},d),d.data&&(p.data=d.data),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(p,d),i=p,"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,ez(1e3)];case 4:return o.sent(),[2]}})})},e.prototype.onSubChange=function(e){var t,n;return(0,O.__awaiter)(this,void 0,void 0,function(){var r;return(0,O.__generator)(this,function(i){switch(i.label){case 0:if(e.newSubscription)return[3,2];return[4,eK(this.firebaseDependencies,self.registration)];case 1:case 5:return i.sent(),[2];case 2:return[4,eL(this.firebaseDependencies)];case 3:return r=i.sent(),[4,eK(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,eB(this.firebaseDependencies,self.registration,null!==(n=null===(t=null==r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:eC)]}})})},e.prototype.onNotificationClick=function(e){var t,n;return(0,O.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,s;return(0,O.__generator)(this,function(u){switch(u.label){case 0:var c,l,h,f,d;if(!(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n[ek])||e.action||(e.stopImmediatePropagation(),e.notification.close(),!(i=(null!==(h=null===(l=(c=r).fcmOptions)||void 0===l?void 0:l.link)&&void 0!==h?h:null===(f=c.notification)||void 0===f?void 0:f.click_action)||(eH(c.data)?self.location.origin:null))||(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host)))return[2];return[4,function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a,s;return(0,O.__generator)(this,function(u){switch(u.label){case 0:return[4,eQ()];case 1:t=u.sent();try{for(r=(n=(0,O.__values)(t)).next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(e){a={error:e}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}})})}(o)];case 1:if(s=u.sent())return[3,4];return[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,ez(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:if(!s)return[2];return r.messageType=v.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]}})})},e}();function eQ(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eY=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(e){return t.messageEventListener(e)})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:var i;if(!(t=e.data).isFirebaseMessaging)return[2];if(this.onMessageCallback&&t.messageType===v.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((i=Object.assign({},t),delete i.messageType,delete i.isFirebaseMessaging,i)):this.onMessageCallback.next(Object.assign({},t))),!(eH(n=t.data)&&"1"===n["google.c.a.e"]))return[3,2];return[4,this.logEvent(t.messageType,n)];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){return(0,O.__generator)(this,function(t){switch(t.label){case 0:if("default"!==Notification.permission)return[3,2];return[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw eS.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,eB(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},e.prototype.updateVapidKey=function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){return(0,O.__generator)(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=eC),[2]})})},e.prototype.updateSwReg=function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){return(0,O.__generator)(this,function(t){switch(t.label){case 0:if(!(!e&&!this.swRegistration))return[3,2];return[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw eS.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},e.prototype.registerDefaultSw=function(){return(0,O.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,O.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw t=n.sent(),eS.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}})})},e.prototype.deleteToken=function(){return(0,O.__awaiter)(this,void 0,void 0,function(){return(0,O.__generator)(this,function(e){switch(e.label){case 0:if(this.swRegistration)return[3,2];return[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,eK(this.firebaseDependencies,this.swRegistration)]}})})},e.prototype.requestPermission=function(){return(0,O.__awaiter)(this,void 0,void 0,function(){var e;return(0,O.__generator)(this,function(t){switch(t.label){case 0:if("granted"===Notification.permission)return[2];return[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];if("denied"===e)throw eS.create("permission-blocked");throw eS.create("permission-default")}})})},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw eS.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw eS.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw eS.create("invalid-sw-registration");if(this.swRegistration)throw eS.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw eS.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw eS.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return n=function(e){switch(e){case v.NOTIFICATION_CLICKED:return"notification_open";case v.PUSH_RECEIVED:return"notification_foreground";default:throw Error()}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t[eN],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},e}();function eX(e){return eS.create("missing-app-config-values",{valueName:e})}function e$(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}x.default.INTERNAL.registerComponent(new L.Component("messaging",function(e){var t=e.getProvider("app").getImmediate(),n=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){if(!e||!e.options)throw eX("App Configuration Object");if(!e.name)throw eX("App Name");var t,n,r=e.options;try{for(var i=(0,O.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw eX(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),r={app:t,appConfig:n,installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!e$())throw eS.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new eG(r):new eY(r)},"PUBLIC").setServiceProps({isSupported:e$})),n(8847);var eJ="0.4.12",eZ="FB-PERF-TRACE-MEASURE",e0="_wt_",e1="_fcp",e2="_fid",e4="@firebase/performance/config",e3="@firebase/performance/configexpire",e6="Performance",e5=((g={})["trace started"]="Trace {$traceName} was started before.",g["trace stopped"]="Trace {$traceName} is not running.",g["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",g["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",g["no window"]="Window is not available.",g["no app id"]="App id is not available.",g["no project id"]="Project id is not available.",g["no api key"]="Api key is not available.",g["invalid cc log"]="Attempted to queue invalid cc event",g["FB not default"]="Performance can only start when Firebase app instance is the default one.",g["RC response not ok"]="RC response is not ok",g["invalid attribute name"]="Attribute name {$attributeName} is invalid.",g["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",g["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",g["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",g),e8=new P.ErrorFactory("performance",e6,e5),e9=new R.Logger(e6);e9.logLevel=R.LogLevel.INFO;var e7=function(){function e(e){if(this.window=e,!e)throw e8.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,P.isIndexedDBAvailable)()||(e9.info("IndexedDB is not supported by current browswer"),!1):(e9.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver(function(e){for(var n=0,r=e.getEntries();n<r.length;n++)t(r[n])}).observe({entryTypes:[e]})},e.getInstance=function(){return void 0===y&&(y=new e(m)),y},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(e,t){var n=e.length-t.length;if(n<0||n>1)throw e8.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var tt=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=te("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=te("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw e8.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw e8.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw e8.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===_&&(_=new e),_},e}();(a=w||(w={}))[a.UNKNOWN=0]="UNKNOWN",a[a.VISIBLE=1]="VISIBLE",a[a.HIDDEN=2]="HIDDEN";var tn=["firebase_","google_","ga_"],tr=RegExp("^[a-zA-Z]\\w*$");function ti(){switch(e7.getInstance().document.visibilityState){case"visible":return w.VISIBLE;case"hidden":return w.HIDDEN;default:return w.UNKNOWN}}var to={loggingEnabled:!0};function ta(e){if(!e)return e;var t=tt.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=to.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=ts(t.tracesSamplingRate),t.logNetworkAfterSampling=ts(t.networkRequestsSamplingRate),e}function ts(e){return Math.random()<=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tu=1;function tc(){var e;return tu=2,I=I||(e=e7.getInstance().document,new Promise(function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})).then(function(){var e;return(e=tt.getInstance().installationsService.getId()).then(function(e){b=e}),e}).then(function(e){var t,n;return(t=function(){var e=e7.getInstance().localStorage;if(e){var t=e.getItem(e3);if(t&&Number(t)>Date.now()){var n=e.getItem(e4);if(n)try{return JSON.parse(n)}catch(e){return}}}}())?(ta(t),Promise.resolve()):((n=tt.getInstance().installationsService.getToken()).then(function(e){}),n).then(function(t){return fetch(new Request("https://firebaseremoteconfig.googleapis.com/v1/projects/"+tt.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+tt.getInstance().getApiKey(),{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:tt.getInstance().getAppId(),app_version:eJ,sdk_version:"0.0.1"})})).then(function(e){if(e.ok)return e.json();throw e8.create("RC response not ok")})}).catch(function(){e9.info("Could not fetch config, will use default configs")}).then(ta).then(function(e){var t;return t=e7.getInstance().localStorage,void(e&&t&&(t.setItem(e4,JSON.stringify(e)),t.setItem(e3,String(Date.now()+36e5*tt.getInstance().configTimeToLive))))},function(){})}).then(function(){tu=3},function(){tu=3})}var tl=3,th=[],tf=!1;function td(e,t){!T&&(T=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e){if(!e.eventTime||!e.message)throw e8.create("invalid cc log");th=(0,O.__spreadArray)((0,O.__spreadArray)([],th),[e])}({message:tg.apply(void 0,e),eventTime:Date.now()})}),T(e,t)}function tp(e){var t=tt.getInstance();(t.instrumentationEnabled||!e.isAuto)&&(t.dataCollectionEnabled||e.isAuto)&&e7.getInstance().requiredApisAvailable()&&(!e.isAuto||ti()===w.VISIBLE)&&(3===tu?tv(e):tc().then(function(){return tv(e)},function(){return tv(e)}))}function tv(e){if(b){var t=tt.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout(function(){return td(e,1)},0)}}function tg(e,t){var n,r,i;return 0===t?(n={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},JSON.stringify({application_info:ty(),network_request_metric:n})):(r={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs},0!==Object.keys(e.counters).length&&(r.counters=e.counters),0!==Object.keys(i=e.getAttributes()).length&&(r.custom_attributes=i),JSON.stringify({application_info:ty(),trace_metric:r}))}function ty(){var e;return{google_app_id:tt.getInstance().getAppId(),app_instance_id:b,web_app_info:{sdk_version:eJ,page_url:e7.getInstance().getUrl(),service_worker_status:"serviceWorker"in(e=e7.getInstance().navigator)?e.serviceWorker.controller?2:3:1,visibility_state:ti(),effective_connection_type:function(){var e=e7.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}var tm=["_fp",e1,e2],t_=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=e7.getInstance(),this.randomId=Math.floor(1e6*Math.random()),!this.isAuto&&(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||eZ+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw e8.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw e8.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),tp(this)},e.prototype.record=function(e,t,n){if(e<=0)throw e8.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw e8.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=(0,O.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}tp(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){var n,r;if(n=this.name,0!==e.length&&!(e.length>100)&&(n&&n.startsWith(e0)&&tm.indexOf(e)>-1||!e.startsWith("_")))this.counters[e]=((r=Math.floor(t))<t&&e9.info("Metric value should be an Integer, setting the value as : "+r+"."),r);else throw e8.create("invalid custom metric name",{customMetricName:e})},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n=0!==e.length&&!(e.length>40)&&!tn.some(function(t){return e.startsWith(t)})&&!!e.match(tr),r=0!==t.length&&t.length<=100;if(n&&r){this.customAttributes[e]=t;return}if(!n)throw e8.create("invalid attribute name",{attributeName:e});if(!r)throw e8.create("invalid attribute value",{attributeValue:t})},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return(0,O.__assign)({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))},e.createOobTrace=function(t,n,r){var i=e7.getInstance().getUrl();if(i){var o=new e(e0+i,!0),a=Math.floor(1e3*e7.getInstance().getTimeOrigin());if(o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n){var s=n.find(function(e){return"first-paint"===e.name});s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find(function(e){return"first-contentful-paint"===e.name});u&&u.startTime&&o.putMetric(e1,Math.floor(1e3*u.startTime)),r&&o.putMetric(e2,Math.floor(1e3*r))}tp(o)}},e.createUserTimingTrace=function(t){tp(new e(t,!1,t))},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(e){if(e&&void 0!==e.responseStart){var t=e7.getInstance().getTimeOrigin(),n=Math.floor((e.startTime+t)*1e3),r=e.responseStart?Math.floor((e.responseStart-e.startTime)*1e3):void 0,i=Math.floor((e.responseEnd-e.startTime)*1e3);!function(e){var t=tt.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout(function(){return td(e,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:n,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:i})}}function tw(){b&&(setTimeout(function(){return function(){var e=e7.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){t_.createOobTrace(t,n),r=void 0},5e3);e.onFirstInputDelay(function(e){r&&(clearTimeout(r),t_.createOobTrace(t,n,e))})}else t_.createOobTrace(t,n)}()},0),setTimeout(function(){return function(){for(var e=e7.getInstance(),t=e.getEntriesByType("resource"),n=0;n<t.length;n++)tb(t[n]);e.setupObserver("resource",tb)}()},0),setTimeout(function(){return function(){for(var e=e7.getInstance(),t=e.getEntriesByType("measure"),n=0;n<t.length;n++)tI(t[n]);e.setupObserver("measure",tI)}()},0))}function tI(e){var t=e.name;t.substring(0,eZ.length)!==eZ&&t_.createUserTimingTrace(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tT=function(){function e(e){this.app=e,e7.getInstance().requiredApisAvailable()&&(0,P.validateIndexedDBOpenable)().then(function(e){e&&(tf||(function e(t){setTimeout(function(){if(0!==tl){var t,n,r;if(!th.length)return e(1e4);n=(t=th.splice(0,1e3)).map(function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}),(r={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:tt.getInstance().logSource,log_event:n},fetch(tt.getInstance().getFlTransportFullUrl(),{method:"POST",body:JSON.stringify(r)}).then(function(e){return e.ok||e9.info("Call to Firebase backend failed."),e.json()}).then(function(n){var r=Number(n.nextRequestWaitMillis),i=1e4;isNaN(r)||(i=Math.max(r,i));var o=n.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(th=(0,O.__spreadArray)((0,O.__spreadArray)([],t),th),e9.info("Retry transport request later.")),tl=3,e(i)})).catch(function(){th=(0,O.__spreadArray)((0,O.__spreadArray)([],t),th),tl--,e9.info("Tries left: "+tl+"."),e(1e4)})}},t)}(5500),tf=!0),tc().then(tw,tw))}).catch(function(e){e9.info("Environment doesn't support IndexedDB: "+e)})}return e.prototype.trace=function(e){return new t_(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return tt.getInstance().instrumentationEnabled},set:function(e){tt.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return tt.getInstance().dataCollectionEnabled},set:function(e){tt.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}();s=x.default,u=function(e,t){if("[DEFAULT]"!==e.name)throw e8.create("FB not default");if("undefined"==typeof window)throw e8.create("no window");return m=window,tt.getInstance().firebaseAppInstance=e,tt.getInstance().installationsService=t,new tT(e)},s.INTERNAL.registerComponent(new L.Component("performance",function(e){return u(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())},"PUBLIC")),s.registerVersion("@firebase/performance",eJ);var tE="https://www.googletagmanager.com/gtag/js";(c=E||(E={})).EVENT="event",c.SET="set",c.CONFIG="config",(l=S||(S={})).ADD_SHIPPING_INFO="add_shipping_info",l.ADD_PAYMENT_INFO="add_payment_info",l.ADD_TO_CART="add_to_cart",l.ADD_TO_WISHLIST="add_to_wishlist",l.BEGIN_CHECKOUT="begin_checkout",l.CHECKOUT_PROGRESS="checkout_progress",l.EXCEPTION="exception",l.GENERATE_LEAD="generate_lead",l.LOGIN="login",l.PAGE_VIEW="page_view",l.PURCHASE="purchase",l.REFUND="refund",l.REMOVE_FROM_CART="remove_from_cart",l.SCREEN_VIEW="screen_view",l.SEARCH="search",l.SELECT_CONTENT="select_content",l.SELECT_ITEM="select_item",l.SELECT_PROMOTION="select_promotion",l.SET_CHECKOUT_OPTION="set_checkout_option",l.SHARE="share",l.SIGN_UP="sign_up",l.TIMING_COMPLETE="timing_complete",l.VIEW_CART="view_cart",l.VIEW_ITEM="view_item",l.VIEW_ITEM_LIST="view_item_list",l.VIEW_PROMOTION="view_promotion",l.VIEW_SEARCH_RESULTS="view_search_results";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tS=new R.Logger("@firebase/analytics"),tC=((C={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",C["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",C["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",C["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",C["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",C["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",C["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",C["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',C["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',C),tk=new P.ErrorFactory("analytics","Analytics",tC),tN=new(function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=1e3),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}()),tA=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach(function(e){return e()})},e}(),tx={},tP=[],tR={},tD="dataLayer",tO="gtag",tL=!1,tM="analytics";(h=x.default).INTERNAL.registerComponent(new L.Component(tM,function(e){return function(e,t){!function(){var e=[];if((0,P.isBrowserExtension)()&&e.push("This is a browser extension environment."),(0,P.areCookiesEnabled)()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(e,t){return"("+(t+1)+") "+e}).join(" "),n=tk.create("invalid-analytics-context",{errorInfo:t});tS.warn(n.message)}}();var n=e.options.appId;if(!n)throw tk.create("no-app-id");if(!e.options.apiKey){if(e.options.measurementId)tS.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.');else throw tk.create("no-api-key")}if(null!=tx[n])throw tk.create("already-exists",{id:n});if(!tL){r=tD,i=[],Array.isArray(window[r])?i=window[r]:window[r]=i;var r,i,o,a,s,u,c=(o=tD,a=tO,s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[o].push(arguments)},window[a]&&"function"==typeof window[a]&&(s=window[a]),window[a]=(u=s,function(e,t,n){return(0,O.__awaiter)(this,void 0,void 0,function(){var r;return(0,O.__generator)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,6,,7]),e!==E.EVENT)return[3,2];return[4,function(e,t,n,r,i){return(0,O.__awaiter)(this,void 0,void 0,function(){var o,a,s,u,c,l,h;return(0,O.__generator)(this,function(f){switch(f.label){case 0:if(f.trys.push([0,4,,5]),o=[],!(i&&i.send_to))return[3,2];return Array.isArray(a=i.send_to)||(a=[a]),[4,Promise.all(n)];case 1:for(c=0,s=f.sent(),u=function(e){var n=s.find(function(t){return t.measurementId===e}),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},l=a;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return f.sent(),e(E.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),tS.error(h),[3,5];case 5:return[2]}})})}(u,tx,tP,t,n)];case 1:case 3:return i.sent(),[3,5];case 2:if(e!==E.CONFIG)return[3,4];return[4,function(e,t,n,r,i,o){return(0,O.__awaiter)(this,void 0,void 0,function(){var a,s,u;return(0,O.__generator)(this,function(c){switch(c.label){case 0:a=r[i],c.label=1;case 1:if(c.trys.push([1,7,,8]),!a)return[3,3];return[4,t[a]];case 2:return c.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:if(!(s=c.sent().find(function(e){return e.measurementId===i})))return[3,6];return[4,t[s.appId]];case 5:c.sent(),c.label=6;case 6:return[3,8];case 7:return u=c.sent(),tS.error(u),[3,8];case 8:return e(E.CONFIG,i,o),[2]}})})}(u,tx,tP,tR,t,n)];case 4:u(E.SET,t),i.label=5;case 5:return[3,7];case 6:return r=i.sent(),tS.error(r),[3,7];case 7:return[2]}})})}),{gtagCore:s,wrappedGtag:window[a]}),l=c.wrappedGtag,h=c.gtagCore;N=l,k=h,tL=!0}return tx[n]=function(e,t,n,r,i,o){return(0,O.__awaiter)(this,void 0,void 0,function(){var a,s,u,c,l,h;return(0,O.__generator)(this,function(f){switch(f.label){case 0:return(a=function(e,t,n){return void 0===t&&(t=tN),(0,O.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,s,u=this;return(0,O.__generator)(this,function(c){if(r=(n=e.options).appId,i=n.apiKey,o=n.measurementId,!r)throw tk.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw tk.create("no-api-key")}return a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new tA,setTimeout(function(){return(0,O.__awaiter)(u,void 0,void 0,function(){return(0,O.__generator)(this,function(e){return s.abort(),[2]})})},6e4),[2,function e(t,n,r,i){var o=n.throttleEndTimeMillis,a=n.backoffCount;return void 0===i&&(i=tN),(0,O.__awaiter)(this,void 0,void 0,function(){var n,s,u,c,l,h,f;return(0,O.__generator)(this,function(d){switch(d.label){case 0:n=t.appId,s=t.measurementId,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,new Promise(function(e,t){var n=setTimeout(e,Math.max(o-Date.now(),0));r.addEventListener(function(){clearTimeout(n),t(tk.create("fetch-throttle",{throttleEndTimeMillis:o}))})})];case 2:return d.sent(),[3,4];case 3:if(u=d.sent(),s)return tS.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:n,measurementId:s}];throw u;case 4:return d.trys.push([4,6,,7]),[4,function(e){var t;return(0,O.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a;return(0,O.__generator)(this,function(s){switch(s.label){case 0:return n=e.appId,r={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":e.apiKey})},[4,fetch("https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),r)];case 1:if(!(200!==(i=s.sent()).status&&304!==i.status))return[3,6];o="",s.label=2;case 2:return s.trys.push([2,4,,5]),[4,i.json()];case 3:return(null===(t=(a=s.sent()).error)||void 0===t?void 0:t.message)&&(o=a.error.message),[3,5];case 4:return s.sent(),[3,5];case 5:throw tk.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o});case 6:return[2,i.json()]}})})}(t)];case 5:return c=d.sent(),i.deleteThrottleMetadata(n),[2,c];case 6:if(!function(e){if(!(e instanceof P.FirebaseError)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l=d.sent())){if(i.deleteThrottleMetadata(n),s)return tS.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:n,measurementId:s}];throw l}return h=503===Number(l.customData.httpStatus)?(0,P.calculateBackoffMillis)(a,i.intervalMillis,30):(0,P.calculateBackoffMillis)(a,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:a+1},i.setThrottleMetadata(n,f),tS.debug("Calling attemptFetch again in "+h+" millis"),[2,e(t,f,r,i)];case 7:return[2]}})})}({appId:r,apiKey:i,measurementId:o},a,s,t)]})})}(e)).then(function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&tS.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(e){return tS.error(e)}),t.push(a),[4,Promise.all([a,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){return(0,O.__awaiter)(this,void 0,void 0,function(){var e;return(0,O.__generator)(this,function(t){switch(t.label){case 0:if((0,P.isIndexedDBAvailable)())return[3,1];return tS.warn(tk.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1];case 1:return t.trys.push([1,3,,4]),[4,(0,P.validateIndexedDBOpenable)()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),tS.warn(tk.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})})().then(function(e){return e?r.getId():void 0})])];case 1:if(u=(s=f.sent())[0],c=s[1],!function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(tE))return r}return null}()){var d,p;d=u.measurementId,(p=document.createElement("script")).src=tE+"?l="+o+"&id="+d,p.async=!0,document.head.appendChild(p)}return i("js",new Date),(h={}).origin="firebase",h.update=!0,l=h,null!=c&&(l.firebase_id=c),i(E.CONFIG,u.measurementId,l),[2,u.measurementId]}})})}(e,tP,tR,t,k,tD),{app:e,logEvent:function(e,t,r){/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e,t,n,r,i){return(0,O.__awaiter)(this,void 0,void 0,function(){var o,a;return(0,O.__generator)(this,function(s){switch(s.label){case 0:if(!(i&&i.global))return[3,1];return e(E.EVENT,n,r),[2];case 1:return[4,t];case 2:o=s.sent(),a=(0,O.__assign)((0,O.__assign)({},r),{send_to:o}),e(E.EVENT,n,a),s.label=3;case 3:return[2]}})})})(N,tx[n],e,t,r).catch(function(e){return tS.error(e)})},setCurrentScreen:function(e,t){(function(e,t,n,r){return(0,O.__awaiter)(this,void 0,void 0,function(){var i;return(0,O.__generator)(this,function(o){switch(o.label){case 0:if(!(r&&r.global))return[3,1];return e(E.SET,{screen_name:n}),[2,Promise.resolve()];case 1:return[4,t];case 2:i=o.sent(),e(E.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(N,tx[n],e,t).catch(function(e){return tS.error(e)})},setUserId:function(e,t){(function(e,t,n,r){return(0,O.__awaiter)(this,void 0,void 0,function(){var i;return(0,O.__generator)(this,function(o){switch(o.label){case 0:if(!(r&&r.global))return[3,1];return e(E.SET,{user_id:n}),[2,Promise.resolve()];case 1:return[4,t];case 2:i=o.sent(),e(E.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(N,tx[n],e,t).catch(function(e){return tS.error(e)})},setUserProperties:function(e,t){(function(e,t,n,r){return(0,O.__awaiter)(this,void 0,void 0,function(){var i,o,a,s,u;return(0,O.__generator)(this,function(c){switch(c.label){case 0:if(!(r&&r.global))return[3,1];for(o=0,i={},a=Object.keys(n);o<a.length;o++)i["user_properties."+(s=a[o])]=n[s];return e(E.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=c.sent(),e(E.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(N,tx[n],e,t).catch(function(e){return tS.error(e)})},setAnalyticsCollectionEnabled:function(e){(function(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}})})})(tx[n],e).catch(function(e){return tS.error(e)})},INTERNAL:{delete:function(){return delete tx[n],Promise.resolve()}}}}(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:function(e){if(tL)throw tk.create("already-initialized");e.dataLayerName&&(tD=e.dataLayerName),e.gtagName&&(tO=e.gtagName)},EventName:S,isSupported:function(){return(0,O.__awaiter)(this,void 0,void 0,function(){return(0,O.__generator)(this,function(e){switch(e.label){case 0:if((0,P.isBrowserExtension)()||!(0,P.areCookiesEnabled)()||!(0,P.isIndexedDBAvailable)())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(0,P.validateIndexedDBOpenable)()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}})})}})),h.INTERNAL.registerComponent(new L.Component("analytics-internal",function(e){try{return{logEvent:e.getProvider(tM).getImmediate().logEvent}}catch(e){throw tk.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),h.registerVersion("@firebase/analytics","0.6.10");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tF=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o;return(0,O.__generator)(this,function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:if(n=(t=a.sent())[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return[2,r];return e.eTag=r&&r.eTag,[4,this.client.fetch(e)];case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}})})},e}(),tj=((A={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",A["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",A["registration-api-key"]="Undefined API key. Check Firebase app initialization.",A["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",A["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",A["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",A["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",A["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",A["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",A["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',A["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',A["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",A["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",A),tU=new P.ErrorFactory("remoteconfig","Remote Config",tj),tq=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l,h,f,d,p;return(0,O.__generator)(this,function(v){switch(v.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:var g;n=(t=v.sent())[0],r=t[1],i=fetch((window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com")+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,{method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},body:JSON.stringify({sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===g&&(g=navigator),g.languages&&g.languages[0]||g.language)})}),o=new Promise(function(t,n){e.signal.addEventListener(function(){var e=Error("The operation was aborted.");e.name="AbortError",n(e)})}),v.label=2;case 2:return v.trys.push([2,5,,6]),[4,Promise.race([i,o])];case 3:return v.sent(),[4,i];case 4:return a=v.sent(),[3,6];case 5:throw s=v.sent(),u="fetch-client-network","AbortError"===s.name&&(u="fetch-timeout"),tU.create(u,{originalErrorMessage:s.message});case 6:if(c=a.status,l=a.headers.get("ETag")||void 0,200!==a.status)return[3,11];d=void 0,v.label=7;case 7:return v.trys.push([7,9,,10]),[4,a.json()];case 8:return d=v.sent(),[3,10];case 9:throw p=v.sent(),tU.create("fetch-client-parse",{originalErrorMessage:p.message});case 10:h=d.entries,f=d.state,v.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===f?c=500:"NO_CHANGE"===f?c=304:("NO_TEMPLATE"===f||"EMPTY_CONFIG"===f)&&(h={}),304!==c&&200!==c)throw tU.create("fetch-status",{httpStatus:c});return[2,{status:c,eTag:l,config:h}]}})})},e}(),tV=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach(function(e){return e()})},e}(),tB=["1","true","t","yes","y","on"],tK=function(){function e(e,t){void 0===t&&(t=""),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&tB.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},e.prototype.getSource=function(){return this._source},e}(),tW=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=R.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=R.LogLevel.SILENT;break;default:this._logger.logLevel=R.LogLevel.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return(0,O.__awaiter)(this,void 0,void 0,function(){var e,t,n;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:if(t=(e=r.sent())[0],n=e[1],!t||!t.config||!t.eTag||t.eTag===n)return[2,!1];return[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])];case 2:return r.sent(),[2,!0]}})})},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){e._isInitializationComplete=!0})),this._initializePromise},e.prototype.fetch=function(){return(0,O.__awaiter)(this,void 0,void 0,function(){var e,t,n,r=this;return(0,O.__generator)(this,function(i){switch(i.label){case 0:e=new tV,setTimeout(function(){return(0,O.__awaiter)(r,void 0,void 0,function(){return(0,O.__generator)(this,function(t){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:var o,a;return a="fetch-throttle",n=(o=t=i.sent())instanceof P.FirebaseError&&-1!==o.code.indexOf(a)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}})})},e.prototype.fetchAndActivate=function(){return(0,O.__awaiter)(this,void 0,void 0,function(){return(0,O.__generator)(this,function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}})})},e.prototype.getAll=function(){var e,t,n=this;return(e=this._storageCache.getActiveConfig(),t=this.defaultConfig,void 0===e&&(e={}),void 0===t&&(t={}),Object.keys((0,O.__assign)((0,O.__assign)({},e),t))).reduce(function(e,t){return e[t]=n.getValue(t),e},{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new tK("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new tK("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new tK("static"))},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tH(e,t){var n=e.target.error||void 0;return tU.create(t,{originalErrorMessage:n&&n.message})}var tz="app_namespace_store",tG=function(){function e(e,t,n,r){void 0===r&&(r=new Promise(function(e,t){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(tH(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(tz,{keyPath:"compositeKey"})}})),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise(function(r,i){var o=t.transaction([tz],"readonly").objectStore(tz),a=n.createCompositeKey(e);try{var s=o.get(a);s.onerror=function(e){i(tH(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;t?r(t.value):r(void 0)}}catch(e){i(tU.create("storage-get",{originalErrorMessage:e&&e.message}))}})]}})})},e.prototype.set=function(e,t){return(0,O.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,O.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var a=n.transaction([tz],"readwrite").objectStore(tz),s=r.createCompositeKey(e);try{var u=a.put({compositeKey:s,value:t});u.onerror=function(e){o(tH(e,"storage-set"))},u.onsuccess=function(){i()}}catch(e){o(tU.create("storage-set",{originalErrorMessage:e&&e.message}))}})]}})})},e.prototype.delete=function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,O.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise(function(r,i){var o=t.transaction([tz],"readwrite").objectStore(tz),a=n.createCompositeKey(e);try{var s=o.delete(a);s.onerror=function(e){i(tH(e,"storage-delete"))},s.onsuccess=function(){r()}}catch(e){i(tU.create("storage-delete",{originalErrorMessage:e&&e.message}))}})]}})})},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),tQ=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return(0,O.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i,o;return(0,O.__generator)(this,function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}})})},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}(),tY=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return(0,O.__awaiter)(this,void 0,void 0,function(){var t;return(0,O.__generator)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}})})},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return(0,O.__awaiter)(this,void 0,void 0,function(){var t,i,o;return(0,O.__generator)(this,function(a){switch(a.label){case 0:var s;return[4,(s=e.signal,new Promise(function(e,t){var r=setTimeout(e,Math.max(n-Date.now(),0));s.addEventListener(function(){clearTimeout(r),t(tU.create("fetch-throttle",{throttleEndTimeMillis:n}))})}))];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof P.FirebaseError)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+(0,P.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}})})},e}(),tX="@firebase/remote-config";(f=x.default).INTERNAL.registerComponent(new L.Component("remoteConfig",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"==typeof window)throw tU.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw tU.create("registration-project-id");if(!s)throw tU.create("registration-api-key");if(!u)throw tU.create("registration-app-id");n=n||"firebase";var c=new tG(u,r.name,n),l=new tQ(c),h=new R.Logger(tX);h.logLevel=R.LogLevel.ERROR;var d=new tW(r,new tF(new tY(new tq(i,f.SDK_VERSION,n,a,s,u),c),c,l,h),l,c,h);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),f.registerVersion(tX,"0.1.37"),n(2224),/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */x.default.registerVersion("firebase","8.6.3","app"),/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),x.default.registerVersion("firebase","8.6.3")},8676:function(e,t){!function(e){"use strict";function t(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function n(e,n,r){var i,o=new Promise(function(o,a){t(i=e[n].apply(e,r)).then(o,a)});return o.request=i,o}function r(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function i(e,t,r,i){i.forEach(function(i){i in r.prototype&&(e.prototype[i]=function(){return n(this[t],i,arguments)})})}function o(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function a(e,t,r,i){i.forEach(function(i){i in r.prototype&&(e.prototype[i]=function(){var e,r,o;return e=this[t],r=arguments,(o=n(e,i,r)).then(function(e){if(e)return new u(e,o.request)})})})}function s(e){this._index=e}function u(e,t){this._cursor=e,this._request=t}function c(e){this._store=e}function l(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function h(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new l(n)}function f(e){this._db=e}r(s,"_index",["name","keyPath","multiEntry","unique"]),i(s,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),a(s,"_index",IDBIndex,["openCursor","openKeyCursor"]),r(u,"_cursor",["direction","key","primaryKey","value"]),i(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(u.prototype[e]=function(){var n=this,r=arguments;return Promise.resolve().then(function(){return n._cursor[e].apply(n._cursor,r),t(n._request).then(function(e){if(e)return new u(e,n._request)})})})}),c.prototype.createIndex=function(){return new s(this._store.createIndex.apply(this._store,arguments))},c.prototype.index=function(){return new s(this._store.index.apply(this._store,arguments))},r(c,"_store",["name","keyPath","indexNames","autoIncrement"]),i(c,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),a(c,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),o(c,"_store",IDBObjectStore,["deleteIndex"]),l.prototype.objectStore=function(){return new c(this._tx.objectStore.apply(this._tx,arguments))},r(l,"_tx",["objectStoreNames","mode"]),o(l,"_tx",IDBTransaction,["abort"]),h.prototype.createObjectStore=function(){return new c(this._db.createObjectStore.apply(this._db,arguments))},r(h,"_db",["name","version","objectStoreNames"]),o(h,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new l(this._db.transaction.apply(this._db,arguments))},r(f,"_db",["name","version","objectStoreNames"]),o(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[c,s].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t,n=(t=arguments,Array.prototype.slice.call(t)),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[s,c].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){if(!e||(r.push(e.value),void 0!==t&&r.length==t)){i(r);return}e.continue()})})})}),e.openDb=function(e,t,r){var i=n(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){r&&r(new h(o.result,e.oldVersion,o.transaction))}),i.then(function(e){return new f(e)})},e.deleteDb=function(e){return n(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},3454:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(7663)},1118:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(8513)}])},8473:function(e,t,n){"use strict";n.d(t,{Ho:function(){return u},aC:function(){return s}});var r=n(5893),i=n(7294),o=n(7438);let a=(0,i.createContext)();function s(){return(0,i.useContext)(a)}let u=e=>{let{children:t}=e,[n,s]=(0,i.useState)(""),[u,c]=(0,i.useState)(!0);return(0,i.useEffect)(()=>o.I8.onAuthStateChanged(e=>{c(!1),s(e)}),[]),(0,r.jsx)(a.Provider,{value:{admin:n,loginAdmin:(e,t)=>o.I8.signInWithEmailAndPassword(e,t),logoutAdmin:()=>o.I8.signOut().then(()=>s(""))},children:t})}},7438:function(e,t,n){"use strict";n.d(t,{I8:function(){return u},tO:function(){return o},h:function(){return a},AB:function(){return s}});var r=n(4203);n(8847),n(8483);let i=r.Z.apps.length?r.Z.app():r.Z.initializeApp({apiKey:"AIzaSyC3OX7-J6SZiPn_qET7K7a4Yq6opLPGHC4",authDomain:"mvmschool-4397d.firebaseapp.com",projectId:"mvmschool-4397d",storageBucket:"mvmschool-4397d.appspot.com",messagingSenderId:"595512531465",appId:"1:595512531465:web:323bcdd9bf0009e34df6d8",measurementId:"G-TJRPY50QYM"}),o=r.Z.storage(),a=r.Z.firestore(),s=r.Z.firestore.FieldValue.serverTimestamp,u=i.auth()},6691:function(e,t){"use strict";var n,r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{ACTION_FAST_REFRESH:function(){return h},ACTION_NAVIGATE:function(){return s},ACTION_PREFETCH:function(){return l},ACTION_REFRESH:function(){return a},ACTION_RESTORE:function(){return u},ACTION_SERVER_ACTION:function(){return f},ACTION_SERVER_PATCH:function(){return c},PrefetchCacheEntryStatus:function(){return r},PrefetchKind:function(){return n},isThenable:function(){return d}});let a="refresh",s="navigate",u="restore",c="server-patch",l="prefetch",h="fast-refresh",f="server-action";function d(e){return e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(i=n||(n={})).AUTO="auto",i.FULL="full",i.TEMPORARY="temporary",(o=r||(r={})).fresh="fresh",o.reusable="reusable",o.expired="expired",o.stale="stale",("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4318:function(e,t,n){"use strict";function r(e,t,n,r){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return r}}),n(8364),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return b}});let r=n(8754),i=n(5893),o=r._(n(7294)),a=n(1401),s=n(2045),u=n(7420),c=n(7201),l=n(1443),h=n(9953),f=n(5320),d=n(2905),p=n(4318),v=n(953),g=n(6691),y=new Set;function m(e,t,n,r,i,o){if(o||(0,s.isLocalURL)(t)){if(!r.bypassPrefetchedCheck){let i=t+"%"+n+"%"+(void 0!==r.locale?r.locale:"locale"in e?e.locale:void 0);if(y.has(i))return;y.add(i)}(async()=>o?e.prefetch(t,i):e.prefetch(t,n,r))().catch(e=>{})}}function _(e){return"string"==typeof e?e:(0,u.formatUrl)(e)}let b=o.default.forwardRef(function(e,t){let n,r;let{href:u,as:y,children:b,prefetch:w=null,passHref:I,replace:T,shallow:E,scroll:S,locale:C,onClick:k,onMouseEnter:N,onTouchStart:A,legacyBehavior:x=!1,...P}=e;n=b,x&&("string"==typeof n||"number"==typeof n)&&(n=(0,i.jsx)("a",{children:n}));let R=o.default.useContext(h.RouterContext),D=o.default.useContext(f.AppRouterContext),O=null!=R?R:D,L=!R,M=!1!==w,F=null===w?g.PrefetchKind.AUTO:g.PrefetchKind.FULL,{href:j,as:U}=o.default.useMemo(()=>{if(!R){let e=_(u);return{href:e,as:y?_(y):e}}let[e,t]=(0,a.resolveHref)(R,u,!0);return{href:e,as:y?(0,a.resolveHref)(R,y):t||e}},[R,u,y]),q=o.default.useRef(j),V=o.default.useRef(U);x&&(r=o.default.Children.only(n));let B=x?r&&"object"==typeof r&&r.ref:t,[K,W,H]=(0,d.useIntersection)({rootMargin:"200px"}),z=o.default.useCallback(e=>{(V.current!==U||q.current!==j)&&(H(),V.current=U,q.current=j),K(e),B&&("function"==typeof B?B(e):"object"==typeof B&&(B.current=e))},[U,B,j,H,K]);o.default.useEffect(()=>{O&&W&&M&&m(O,j,U,{locale:C},{kind:F},L)},[U,j,W,C,M,null==R?void 0:R.locale,O,L,F]);let G={ref:z,onClick(e){x||"function"!=typeof k||k(e),x&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(e),O&&!e.defaultPrevented&&function(e,t,n,r,i,a,u,c,l){let{nodeName:h}=e.currentTarget;if("A"===h.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!l&&!(0,s.isLocalURL)(n)))return;e.preventDefault();let f=()=>{let e=null==u||u;"beforePopState"in t?t[i?"replace":"push"](n,r,{shallow:a,locale:c,scroll:e}):t[i?"replace":"push"](r||n,{scroll:e})};l?o.default.startTransition(f):f()}(e,O,j,U,T,E,S,C,L)},onMouseEnter(e){x||"function"!=typeof N||N(e),x&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),O&&(M||!L)&&m(O,j,U,{locale:C,priority:!0,bypassPrefetchedCheck:!0},{kind:F},L)},onTouchStart:function(e){x||"function"!=typeof A||A(e),x&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),O&&(M||!L)&&m(O,j,U,{locale:C,priority:!0,bypassPrefetchedCheck:!0},{kind:F},L)}};if((0,c.isAbsoluteUrl)(U))G.href=U;else if(!x||I||"a"===r.type&&!("href"in r.props)){let e=void 0!==C?C:null==R?void 0:R.locale,t=(null==R?void 0:R.isLocaleDomain)&&(0,p.getDomainLocale)(U,e,null==R?void 0:R.locales,null==R?void 0:R.domainLocales);G.href=t||(0,v.addBasePath)((0,l.addLocale)(U,e,null==R?void 0:R.defaultLocale))}return x?o.default.cloneElement(r,G):(0,i.jsx)("a",{...P,...G,children:n})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2905:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return u}});let r=n(7294),i=n(3815),o="function"==typeof IntersectionObserver,a=new Map,s=[];function u(e){let{rootRef:t,rootMargin:n,disabled:u}=e,c=u||!o,[l,h]=(0,r.useState)(!1),f=(0,r.useRef)(null),d=(0,r.useCallback)(e=>{f.current=e},[]);return(0,r.useEffect)(()=>{if(o){if(c||l)return;let e=f.current;if(e&&e.tagName)return function(e,t,n){let{id:r,observer:i,elements:o}=function(e){let t;let n={root:e.root||null,margin:e.rootMargin||""},r=s.find(e=>e.root===n.root&&e.margin===n.margin);if(r&&(t=a.get(r)))return t;let i=new Map;return t={id:n,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=i.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)})},e),elements:i},s.push(n),a.set(n,t),t}(n);return o.set(e,t),i.observe(e),function(){if(o.delete(e),i.unobserve(e),0===o.size){i.disconnect(),a.delete(r);let e=s.findIndex(e=>e.root===r.root&&e.margin===r.margin);e>-1&&s.splice(e,1)}}}(e,e=>e&&h(e),{root:null==t?void 0:t.current,rootMargin:n})}else if(!l){let e=(0,i.requestIdleCallback)(()=>h(!0));return()=>(0,i.cancelIdleCallback)(e)}},[c,n,t,l,f.current]),[d,l,(0,r.useCallback)(()=>{h(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8513:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(5893),i=n(9008),o=n.n(i),a=n(1163),s=n.n(a),u=function(){return(0,r.jsx)("section",{className:"footer-bottom bg-three",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"bottom-text text-center",children:(0,r.jsxs)("p",{children:["\xa9",new Date().getFullYear()," M V M Residential Higher Secondary School. All rights reserved.",(0,r.jsx)("br",{})," Powered by",(0,r.jsx)("strong",{children:(0,r.jsx)("a",{style:{textDecoration:"none",color:"inherit",marginLeft:"3px"},href:"https://signroots.com",children:"signrOots Technologies"})})]})})})})},c=n(7294),l=n(1664),h=n.n(l),f=function(){let e=(0,a.useRouter)(),[t,n]=(0,c.useState)(!1),[i,o]=(0,c.useState)(""),s=e=>{window.scrollY>100?n(!0):n(!1)},u=e=>{window.innerWidth<800?o("navbar-collapse collapse clearfix"):window.innerWidth>800&&o("navbar-collapse collapse clearfix show")},l=()=>{"navbar-collapse collapse clearfix show"===i&&window.innerWidth<800?o("navbar-collapse collapse clearfix"):o("navbar-collapse collapse clearfix show")};return(0,c.useEffect)(()=>(window.addEventListener("scroll",s),window.innerWidth<800?o("navbar-collapse collapse clearfix"):window.innerWidth>800&&o("navbar-collapse collapse clearfix show"),window.addEventListener("resize",u),()=>{window.removeEventListener("scroll",s),window.removeEventListener("resize",u)}),[]),(0,r.jsxs)("header",{className:"main-header",children:[(0,r.jsx)("header",{className:"header-area",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"row align-items-center",children:[(0,r.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-12",children:(0,r.jsx)("div",{className:"header-logo",children:(0,r.jsx)(h(),{href:"/",children:(0,r.jsx)("img",{src:"/images/favicon/android-chrome-512x512.png",alt:"school_logo"})})})}),(0,r.jsx)("div",{className:"col-xl-9 col-lg-9 col-md-12",children:(0,r.jsx)("div",{className:"header-contact-info",children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("div",{className:"iocn-holder",children:(0,r.jsx)("i",{className:"fas fa-home"})}),(0,r.jsxs)("div",{className:"text-holder",children:[(0,r.jsx)("strong",{children:"ADDRESS:"}),(0,r.jsx)("p",{children:"Valayamkulam, P.O Kokoor Malappuram, Kerala"})]})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("div",{className:"iocn-holder",children:(0,r.jsx)("i",{className:"fas fa-phone"})}),(0,r.jsxs)("div",{className:"text-holder",children:[(0,r.jsx)("strong",{children:"PHONE:"}),(0,r.jsx)("p",{children:"+919567871424,+917593078368"})]})]})]})})})]})})}),(0,r.jsx)("section",{className:t?"main-menu-one stricky stricky-fixed":"main-menu-one stricky ",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"menu-style-one clearfix",children:(0,r.jsxs)("nav",{className:"main-menu",children:[(0,r.jsx)("div",{className:"navbar-header",children:(0,r.jsxs)("button",{type:"button",onClick:l,className:"navbar-toggle","data-toggle":"collapse","data-target":".navbar-collapse",children:[(0,r.jsx)("span",{className:"icon-bar"}),(0,r.jsx)("span",{className:"icon-bar"}),(0,r.jsx)("span",{className:"icon-bar"})]})}),(0,r.jsx)("div",{className:i,id:"navbarSupportedContent",children:(0,r.jsxs)("ul",{className:"navigation clearfix",children:[(0,r.jsx)("li",{className:"/"==e.pathname?"current activeLink":"current",onClick:l,children:(0,r.jsxs)(h(),{href:"/",children:[(0,r.jsx)("i",{className:"fa fa-home","aria-hidden":"true"}),"Home"]})}),(0,r.jsx)("li",{className:"/about"==e.pathname?"activeLink":"",onClick:l,children:(0,r.jsx)(h(),{href:"/about",children:"About Us"})}),(0,r.jsx)("li",{className:"/facilities"==e.pathname?"activeLink":"",onClick:l,children:(0,r.jsx)(h(),{href:"/facilities",children:"Facilities"})}),(0,r.jsx)("li",{className:"/management"==e.pathname?"activeLink":"",onClick:l,children:(0,r.jsx)(h(),{href:"/management",children:"Management"})}),(0,r.jsx)("li",{className:"/curriculum"==e.pathname?"activeLink":"",onClick:l,children:(0,r.jsx)(h(),{href:"/curriculum",children:"Curriculum"})}),(0,r.jsx)("li",{className:"/gallery"==e.pathname?"activeLink":"",onClick:l,children:(0,r.jsx)(h(),{href:"/gallery",children:"Gallery"})}),(0,r.jsx)("li",{className:"/admission"==e.pathname?"activeLink":"",onClick:l,children:(0,r.jsx)(h(),{href:"/admission",children:"Admission"})}),(0,r.jsx)("li",{className:"/contactus"==e.pathname?"activeLink":"",onClick:l,children:(0,r.jsx)(h(),{href:"/contactus",children:"Contact Us"})})]})})]})})})})]})};n(9311),n(7918),n(9603),n(7704);var d=n(8473),p=n(4865),v=n.n(p);n(204);var g=()=>{let[e,t]=(0,c.useState)(!1),n=e=>{window.scrollY>300?t(!0):t(!1)};return(0,c.useEffect)(()=>{window.addEventListener("scroll",n)},[]),(0,r.jsx)("button",{className:e?"scroll-to-top showScrollBtn":"scroll-to-top ",onClick:()=>window.scrollTo(0,0),children:(0,r.jsx)("span",{className:"fa fa-angle-up"})})};s().events.on("routeChangeStart",()=>v().start()),s().events.on("routeChangeComplete",()=>v().done()),s().events.on("routeChangeError",()=>v().done());var y=function(e){let{Component:t,pageProps:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{children:"M.V.M Higher Secondary School"}),(0,r.jsx)("meta",{name:"description",content:"Assabah Association Trust is a well organized and established non-profit organization, under Muslim management. The trust is managing number of educational institutions. M.V.M.R.H.S.S founded in 1986 under Assabah Association Trust. School provides quality education for all community with affordable cost. Now the school has grown to a full fledged Higher Secondary School starting from K.G. to Higher Secondary level with reorganization of government of Kerala."}),(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/images/favicon/apple-touch-icon.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/images/favicon/favicon-32x32.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/images/favicon/favicon-16x16.png"}),(0,r.jsx)("link",{rel:"manifest",href:"/images/favicon/site.webmanifest"}),(0,r.jsx)("meta",{property:"og:description",content:"Assabah Association Trust is a well organized and established non-profit organization, under Muslim management. The trust is managing number of educational institutions. M.V.M.R.H.S.S founded in 1986 under Assabah Association Trust. School provides quality education for all community with affordable cost. Now the school has grown to a full fledged Higher Secondary School starting from K.G. to Higher Secondary level with reorganization of government of Kerala."}),(0,r.jsx)("meta",{name:"twitter:description",content:"Assabah Association Trust is a well organized and established non-profit organization, under Muslim management. The trust is managing number of educational institutions. M.V.M.R.H.S.S founded in 1986 under Assabah Association Trust. School provides quality education for all community with affordable cost. Now the school has grown to a full fledged Higher Secondary School starting from K.G. to Higher Secondary level with reorganization of government of Kerala."}),(0,r.jsx)("meta",{property:"og:image",content:"/images/favicon/favicon-32x32.png"}),(0,r.jsx)("meta",{name:"twitter:image",content:"/images/favicon/favicon-32x32.png"}),(0,r.jsx)("meta",{name:"twitter:card",content:"/images/favicon/favicon-32x32.png"}),(0,r.jsx)("meta",{property:"article:section",content:"Assabah Association Trust is a well organized and established non-profit organization, under Muslim management. The trust is managing number of educational institutions. M.V.M.R.H.S.S founded in 1986 under Assabah Association Trust. School provides quality education for all community with affordable cost. Now the school has grown to a full fledged Higher Secondary School starting from K.G. to Higher Secondary level with reorganization of government of Kerala."}),(0,r.jsx)("meta",{property:"og:type",content:"article"}),(0,r.jsx)("meta",{property:"og:url",content:"https://www.mvmrhss.com/"}),(0,r.jsx)("meta",{property:"og:title",content:"M.V.M Higher Secondary School"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x",crossorigin:"anonymous"}),(0,r.jsx)("script",{src:"https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js",integrity:"sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4",crossorigin:"anonymous"}),(0,r.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css",integrity:"sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==",crossorigin:"anonymous",referrerpolicy:"no-referrer"})]}),(0,r.jsx)(f,{}),(0,r.jsx)(d.Ho,{children:(0,r.jsx)(t,{...n})}),(0,r.jsx)(g,{}),(0,r.jsx)(u,{})]})}},204:function(){},7704:function(){},9311:function(){},9603:function(){},7918:function(){},7663:function(e){!function(){var t={229:function(e){var t,n,r,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u=[],c=!1,l=-1;function h(){c&&r&&(c=!1,r.length?u=r.concat(u):l=-1,u.length&&f())}function f(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(r=u,u=[];++l<t;)r&&r[l].run();l=-1,t=u.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new d(e,t)),1!==u.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},a=!0;try{t[e](o,o.exports,r),a=!1}finally{a&&delete n[e]}return o.exports}r.ab="//";var i=r(229);e.exports=i}()},9008:function(e,t,n){e.exports=n(7828)},1664:function(e,t,n){e.exports=n(9577)},1163:function(e,t,n){e.exports=n(9090)},4865:function(e,t,n){var r,i;void 0!==(i="function"==typeof(r=function(){var e,t,n,r={};r.version="0.2.0";var i=r.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function o(e,t,n){return e<t?t:e>n?n:e}r.configure=function(e){var t,n;for(t in e)void 0!==(n=e[t])&&e.hasOwnProperty(t)&&(i[t]=n);return this},r.status=null,r.set=function(e){var t=r.isStarted();e=o(e,i.minimum,1),r.status=1===e?null:e;var n=r.render(!t),u=n.querySelector(i.barSelector),c=i.speed,l=i.easing;return n.offsetWidth,a(function(t){var o,a;""===i.positionUsing&&(i.positionUsing=r.getPositioningCSS()),s(u,(o=e,(a="translate3d"===i.positionUsing?{transform:"translate3d("+(-1+o)*100+"%,0,0)"}:"translate"===i.positionUsing?{transform:"translate("+(-1+o)*100+"%,0)"}:{"margin-left":(-1+o)*100+"%"}).transition="all "+c+"ms "+l,a)),1===e?(s(n,{transition:"none",opacity:1}),n.offsetWidth,setTimeout(function(){s(n,{transition:"all "+c+"ms linear",opacity:0}),setTimeout(function(){r.remove(),t()},c)},c)):setTimeout(t,c)}),this},r.isStarted=function(){return"number"==typeof r.status},r.start=function(){r.status||r.set(0);var e=function(){setTimeout(function(){r.status&&(r.trickle(),e())},i.trickleSpeed)};return i.trickle&&e(),this},r.done=function(e){return e||r.status?r.inc(.3+.5*Math.random()).set(1):this},r.inc=function(e){var t=r.status;return t?("number"!=typeof e&&(e=(1-t)*o(Math.random()*t,.1,.95)),t=o(t+e,0,.994),r.set(t)):r.start()},r.trickle=function(){return r.inc(Math.random()*i.trickleRate)},e=0,t=0,r.promise=function(n){return n&&"resolved"!==n.state()&&(0===t&&r.start(),e++,t++,n.always(function(){0==--t?(e=0,r.done()):r.set((e-t)/e)})),this},r.render=function(e){if(r.isRendered())return document.getElementById("nprogress");c(document.documentElement,"nprogress-busy");var t=document.createElement("div");t.id="nprogress",t.innerHTML=i.template;var n,o=t.querySelector(i.barSelector),a=e?"-100":(-1+(r.status||0))*100,u=document.querySelector(i.parent);return s(o,{transition:"all 0 linear",transform:"translate3d("+a+"%,0,0)"}),!i.showSpinner&&(n=t.querySelector(i.spinnerSelector))&&f(n),u!=document.body&&c(u,"nprogress-custom-parent"),u.appendChild(t),t},r.remove=function(){l(document.documentElement,"nprogress-busy"),l(document.querySelector(i.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&f(e)},r.isRendered=function(){return!!document.getElementById("nprogress")},r.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective" in e?"translate3d":t+"Transform" in e?"translate":"margin"};var a=(n=[],function(e){n.push(e),1==n.length&&function e(){var t=n.shift();t&&t(e)}()}),s=function(){var e=["Webkit","O","Moz","ms"],t={};function n(n,r,i){var o;r=t[o=(o=r).replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})]||(t[o]=function(t){var n=document.body.style;if(t in n)return t;for(var r,i=e.length,o=t.charAt(0).toUpperCase()+t.slice(1);i--;)if((r=e[i]+o)in n)return r;return t}(o)),n.style[r]=i}return function(e,t){var r,i,o=arguments;if(2==o.length)for(r in t)void 0!==(i=t[r])&&t.hasOwnProperty(r)&&n(e,r,i);else n(e,o[1],o[2])}}();function u(e,t){return("string"==typeof e?e:h(e)).indexOf(" "+t+" ")>=0}function c(e,t){var n=h(e),r=n+t;u(n,t)||(e.className=r.substring(1))}function l(e,t){var n,r=h(e);u(e,t)&&(n=r.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function h(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function f(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return r})?r.call(t,n,t,e):r)&&(e.exports=i)},7582:function(e,t,n){"use strict";n.r(t),n.d(t,{__addDisposableResource:function(){return O},__assign:function(){return o},__asyncDelegator:function(){return S},__asyncGenerator:function(){return E},__asyncValues:function(){return C},__await:function(){return T},__awaiter:function(){return p},__classPrivateFieldGet:function(){return P},__classPrivateFieldIn:function(){return D},__classPrivateFieldSet:function(){return R},__createBinding:function(){return g},__decorate:function(){return s},__disposeResources:function(){return M},__esDecorate:function(){return c},__exportStar:function(){return y},__extends:function(){return i},__generator:function(){return v},__importDefault:function(){return x},__importStar:function(){return A},__makeTemplateObject:function(){return k},__metadata:function(){return d},__param:function(){return u},__propKey:function(){return h},__read:function(){return _},__rest:function(){return a},__runInitializers:function(){return l},__setFunctionName:function(){return f},__spread:function(){return b},__spreadArray:function(){return I},__spreadArrays:function(){return w},__values:function(){return m}});var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t,n,r,i,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,u=r.kind,c="getter"===u?"get":"setter"===u?"set":"value",l=!t&&e?r.static?e:e.prototype:null,h=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),f=!1,d=n.length-1;d>=0;d--){var p={};for(var v in r)p[v]="access"===v?{}:r[v];for(var v in r.access)p.access[v]=r.access[v];p.addInitializer=function(e){if(f)throw TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var g=(0,n[d])("accessor"===u?{get:h.get,set:h.set}:h[c],p);if("accessor"===u){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw TypeError("Object expected");(s=a(g.get))&&(h.get=s),(s=a(g.set))&&(h.set=s),(s=a(g.init))&&i.unshift(s)}else(s=a(g))&&("field"===u?i.unshift(s):h[c]=s)}l&&Object.defineProperty(l,r.name,h),f=!0}function l(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function h(e){return"symbol"==typeof e?e:"".concat(e)}function f(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}u((r=r.apply(e,t||[])).next())})}function v(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var g=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function y(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||g(t,e,n)}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e}function w(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function I(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function T(e){return this instanceof T?(this.v=e,this):new T(e)}function E(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||s(e,t)})},t&&(r[e]=t(r[e])))}function s(e,t){try{var n;(n=i[e](t)).value instanceof T?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function S(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:T(e[r](t)),done:!1}:i?i(t):t}:i}}function C(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=m(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}}function k(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var N=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&g(t,e,n);return N(t,e),t}function x(e){return e&&e.__esModule?e:{default:e}}function P(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function R(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function D(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function O(e,t,n){if(null!=t){var r,i;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(n){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if("function"!=typeof r)throw TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var L="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function M(e){function t(t){e.error=e.hasError?new L(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function n(){for(;e.stack.length;){var r=e.stack.pop();try{var i=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(i).then(n,function(e){return t(e),n()})}catch(e){t(e)}}if(e.hasError)throw e.error}()}t.default={__extends:i,__assign:o,__rest:a,__decorate:s,__param:u,__metadata:d,__awaiter:p,__generator:v,__createBinding:g,__exportStar:y,__values:m,__read:_,__spread:b,__spreadArrays:w,__spreadArray:I,__await:T,__asyncGenerator:E,__asyncDelegator:S,__asyncValues:C,__makeTemplateObject:k,__importStar:A,__importDefault:x,__classPrivateFieldGet:P,__classPrivateFieldSet:R,__classPrivateFieldIn:D,__addDisposableResource:O,__disposeResources:M}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(1118),t(9090)}),_N_E=e.O()}]);